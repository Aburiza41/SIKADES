import{r as o,j as t,L as _,a as U}from"./app-EIz8nQ5Q.js";import{S as k}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as I}from"./AuthenticatedLayout-DaJ7Bo11.js";import{H as q,a as C}from"./index-D-VSm5dn.js";import M from"./OfficialIdentifyForm-D7LKsyB6.js";import R from"./StudiesForm-DGhWBOwk.js";import B from"./OfficialTempatKerjaForm-j_EQjNR0.js";import G from"./OrangTuaForm-BROqGwza.js";import J from"./HubunganForm-CwPU_Lyj.js";import Q from"./AnakForm-BXJF8Fgs.js";import V from"./PositionsForm-DBKVNw0U.js";import W from"./TrainingsForm-C6BDCN1n.js";import X from"./OrganizationsForm-BkkkeRed.js";import{m as l}from"./proxy-Br4hXrCY.js";import"./index-CuuF2Vom.js";import"./iconBase-CIswt8ol.js";import"./transition-DuUQTJM_.js";import"./LoadingPage-DIqH4F6W.js";import"./index-26-9MRme.js";import"./index-DHDwUslh.js";import"./index-BXqEWn_S.js";import"./react-select.esm-Q-Xj6kKm.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-B8EcdQ8U.js";var F;(F=document.querySelector('meta[name="csrf-token"]'))!=null&&F.getAttribute("content");function ka({initialPositions:T,initialOrganizations:v,position:d}){const[r,E]=o.useState([]),[c,N]=o.useState([]),[u,w]=o.useState([]),[f,D]=o.useState([]),[h,P]=o.useState([]),[j,x]=o.useState([]),[b,H]=o.useState([]),[m,A]=o.useState([]),[y,L]=o.useState([]),[g,S]=o.useState(!1),[n,Y]=o.useState({}),z=async(p,K)=>{var $,O;p.preventDefault(),S(!0);const i=new FormData;for(const a in r)a==="foto"&&r[a]instanceof File?i.append(`official[${a}]`,r[a]):i.append(`official[${a}]`,r[a]);for(const a in c)i.append(`tempat_kerja[${a}]`,c[a]);for(const a in f)i.append(`position[${a}]`,f[a]);j.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`organizations[${s}][${e}]`,a[e]):i.append(`organizations[${s}][${e}]`,a[e])}),u.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`studies[${s}][${e}]`,a[e]):i.append(`studies[${s}][${e}]`,a[e])}),h.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`trainings[${s}][${e}]`,a[e]):i.append(`trainings[${s}][${e}]`,a[e])}),b.forEach((a,s)=>{for(const e in a)a[e]!==void 0&&a[e]!==null&&i.append(`orang_tua[${s}][${e}]`,a[e])});for(const a in m)i.append(`hubungan[${a}]`,m[a]);y.forEach((a,s)=>{for(const e in a)i.append(`anak[${s}][${e}]`,a[e])});try{const a=await U.post(`/village/official/${K}/store`,i,{headers:{"Content-Type":"multipart/form-data"}});k.fire("Success","Data berhasil diperbarui.","success")}catch(a){k.fire("Error",((O=($=a.response)==null?void 0:$.data)==null?void 0:O.message)||"Terjadi kesalahan","error")}finally{S(!1)}};return t.jsxs(I,{header:t.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Tambah Pejabat Desa",t.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Penambahan Data Pejabat Desa"})]}),breadcrumb:[{name:"Tambah Official",path:"/village/official/create",active:!0,icon:t.jsx(C,{className:"w-5 h-5 mr-3"})}],children:[t.jsx(_,{title:"Update Official"}),t.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:t.jsxs("form",{onSubmit:p=>z(p,d),className:"space-y-8",children:[t.jsx(M,{official:r,setOfficial:E,errors:n}),t.jsx(B,{tempat_kerja:c,setTempatKerja:N,errors:n}),t.jsx(V,{position:d,positions:T,officialPosition:f,setOfficialPosition:D}),t.jsx(X,{organizations:v,setOrganizations:x,officialOrganizations:j,setOfficialOrganizations:x}),t.jsx(R,{officialStudies:u,setOfficialStudies:w}),t.jsx(W,{officialTrainings:h,setOfficialTrainings:P}),t.jsx(G,{orang_tua:b,setOrangTua:H,errors:n}),t.jsx(J,{hubungan:m,setHubungan:A,errors:n}),t.jsx(Q,{anak:y,setAnak:L,errors:n}),t.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:t.jsxs(l.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:g,children:[t.jsx(q,{className:"mr-2"}),g?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{ka as default};
