import{K as Y,r as l,j as e,L,S as x}from"./app-EIz8nQ5Q.js";import{S as o}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as B}from"./AuthenticatedLayout-DaJ7Bo11.js";import F from"./VillageInfo-Dt5rE0AD.js";import T from"./DescriptionList-Bqr6s2Ur.js";import v from"./Modal-ClXxoUY3.js";import $ from"./EditVillageModal-BQ9FBqvy.js";import K from"./PDF-B3euhkt-.js";import{a as U}from"./index-D-VSm5dn.js";import q from"./List-CwkZ9-X7.js";import"./index-CuuF2Vom.js";import"./iconBase-CIswt8ol.js";import"./transition-DuUQTJM_.js";import"./LoadingPage-DIqH4F6W.js";import"./proxy-Br4hXrCY.js";import"./index-26-9MRme.js";import"./index-BTPrMAX7.js";import"./jspdf.plugin.autotable-C7mnqvEA.js";import"./typeof-QjJsDpFa.js";import"./index.es-BsUn4GSa.js";import"./xlsx-5rFX-EW9.js";import"./Actions-BhWEac7_.js";var S;(S=document.querySelector('meta[name="csrf-token"]'))!=null&&S.getAttribute("content");function xe({village:c,descriptionLatest:w,descriptions:D}){const{flash:i}=Y().props,[b,d]=l.useState(!1),[n,m]=l.useState(!1),[g,u]=l.useState(!1),[a,h]=l.useState(null),[t,r]=l.useState({score_idm:"",status_idm:"",score_prodeskel:"",score_epdeskel:"",status:"",classification:"",year:new Date().getFullYear().toString()}),[_,j]=l.useState(!1),[M,y]=l.useState({...c});l.useEffect(()=>{i.success&&o.fire("Success",i.success,"success"),i.error&&o.fire("Error",i.error,"error")},[i]);const E=()=>{m(!1),u(!1),d(!0),r({score_idm:"",status_idm:"",score_prodeskel:"",score_epdeskel:"",status:"",classification:"",year:new Date().getFullYear().toString()})},C=s=>{h(s),m(!0),u(!1),d(!0),r({...s})},k=s=>{h(s),m(!1),u(!0),d(!0)},V=s=>{o.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(f=>{f.isConfirmed&&x.delete(`/village/profile/description/delete/${s}`,{onSuccess:()=>{o.fire("Deleted!","Data has been successfully deleted.","success"),x.reload()},onError:()=>{o.fire("Error","An error occurred while deleting the data.","error")}})})},I=s=>{s.preventDefault();const f={...t,village_id:c.id},A=n?`/village/profile/description/update/${a.id}`:"/village/profile/description/store";x["post"](A,f,{onSuccess:()=>{o.fire("Success",`Description ${n?"updated":"added"} successfully.`,"success"),d(!1),x.reload()},onError:O=>{o.fire("Error",Object.values(O).join(", "),"error")}})},p=()=>{d(!1),m(!1),u(!1),h(null),r({score_idm:"",status_idm:"",score_prodeskel:"",score_epdeskel:"",status:"",classification:"",year:new Date().getFullYear().toString()})},P=()=>{j(!0),y({...c})},N=s=>{K(s)};return e.jsxs(B,{header:e.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Profil Desa",e.jsx("p",{className:"text-sm font-thin mt-1",children:"Deskripsi dan Data Desa"})]}),breadcrumb:[{name:"Profil",path:"/village/profile",active:!0,icon:e.jsx(U,{className:"w-5 h-5 mr-3"})}],children:[e.jsx(L,{title:"Village Profile"}),e.jsxs("div",{className:"p-4",children:[e.jsx(F,{village:c,handleEditVillage:P}),e.jsx(T,{description:w,onEdit:C,onDelete:V,onView:k,onPrint:N}),e.jsx(q,{descriptions:D,onView:k,onPrint:N,onAdd:E}),e.jsx(v,{isOpen:b&&!g,onClose:p,title:n?"Edit Description":"Add Description",children:e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score IDM"}),e.jsx("input",{type:"number",value:t.score_idm,onChange:s=>r({...t,score_idm:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Masukkan Score IDM"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status IDM"}),e.jsx("input",{type:"text",value:t.status_idm,onChange:s=>r({...t,status_idm:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Masukkan Status IDM"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score Prodeskel"}),e.jsx("input",{type:"number",value:t.score_prodeskel,onChange:s=>r({...t,score_prodeskel:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Masukkan Score Prodeskel"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score Epdeskel"}),e.jsx("input",{type:"number",value:t.score_epdeskel,onChange:s=>r({...t,score_epdeskel:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Masukkan Score Epdeskel"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("input",{type:"text",value:t.status,onChange:s=>r({...t,status:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Masukkan Status"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Classification"}),e.jsx("textarea",{value:t.classification,onChange:s=>r({...t,classification:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:4,placeholder:"Masukkan Klasifikasi"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),e.jsx("input",{type:"number",value:t.year,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:p,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:n?"Update":"Save"})]})]})}),e.jsx(v,{isOpen:b&&g,onClose:p,title:"View Description",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score IDM"}),e.jsx("p",{className:"mt-1 text-gray-900",children:a==null?void 0:a.score_idm})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status IDM"}),e.jsx("p",{className:"mt-1 text-gray-900",children:a==null?void 0:a.status_idm})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score Prodeskel"}),e.jsx("p",{className:"mt-1 text-gray-900",children:a==null?void 0:a.score_prodeskel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),e.jsx("p",{className:"mt-1 text-gray-900",children:a==null?void 0:a.year})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})}),e.jsx($,{isOpen:_,onClose:()=>j(!1),editedVillage:M,setEditedVillage:y})]})]})}export{xe as default};
