import{r as n,j as t,L as M,a as R}from"./app-cnLqKnWv.js";import{S as v}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as B}from"./AuthenticatedLayout-DtE7q2g1.js";import{l as G,m as J}from"./index-CyDsHmf4.js";import Q from"./OfficialIdentifyForm-CU4LiBwD.js";import V from"./StudiesForm-BAR0eeV_.js";import W from"./OfficialTempatKerjaForm-D1WspLEa.js";import X from"./OrangTuaForm-HHibhkGI.js";import Y from"./HubunganForm-B2zDObmV.js";import Z from"./AnakForm-C6E8gWsg.js";import O from"./PositionsForm-zShIFRED.js";import ee from"./TrainingsForm-C84Mm4h7.js";import ae from"./OrganizationsForm-CXFYs47D.js";import{m as u}from"./proxy-0toHJmZX.js";import"./index-sj701c6h.js";import"./iconBase-CMF4PMHw.js";import"./transition-LX_87-cn.js";import"./LoadingPage-CsjTuYab.js";import"./index-CSb7vC3W.js";import"./index-DC9iVcT_.js";import"./index-DidX0__a.js";import"./react-select.esm-kjDh-dq3.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-c6l4leOc.js";import"./floating-ui.dom-CHZBHl4C.js";var w;(w=document.querySelector('meta[name="csrf-token"]'))!=null&&w.getAttribute("content");function Ee({official:a,studies:F,initialPositions:T,initialOrganizations:E,position:g,id:N}){const[p,D]=n.useState({nik:a.nik,nipd:a.nipd,nama_lengkap:a.nama_lengkap,gelar_depan:a.gelar_depan,gelar_belakang:a.gelar_belakang,tempat_lahir:a.tempat_lahir,tanggal_lahir:a.tanggal_lahir,jenis_kelamin:a.jenis_kelamin,rt:a.addresses.rt,rw:a.addresses.rw,kode_pos:a.addresses.postal,alamat:a.addresses.alamat,province_code:a.addresses.province_code,province_name:a.addresses.province_name,regency_code:a.addresses.regency_code,regency_name:a.addresses.regency_name,district_code:a.addresses.district_code,district_name:a.addresses.district_name,village_code:a.addresses.village_code,village_name:a.addresses.village_name,handphone:a.contacts.handphone,gol_darah:a.identities.gol_darah,pendidikan:a.identities.pendidikan,bpjs_kesehatan:a.identities.bpjs_kesehatan,bpjs_ketenagakerjaan:a.identities.bpjs_ketenagakerjaan,npwp:a.identities.npwp}),[d,P]=n.useState({rt:a.work_place.rt,rw:a.work_place.rw,postal:a.work_place.kode_pos,alamat:a.work_place.alamat,regency_code:"",district_code:"",village_code:""}),[_,A]=n.useState(F),[c,H]=n.useState([]),[h,L]=n.useState([]),[f,j]=n.useState([]),[k,z]=n.useState([]),[i,K]=n.useState([]),[b,U]=n.useState([]),[y,x]=n.useState(!1),[m,se]=n.useState({}),I=async(l,q,C)=>{var $,S;l.preventDefault(),x(!0);const r=new FormData;for(const e in p)e==="foto"&&p[e]instanceof File?r.append(`official[${e}]`,p[e]):r.append(`official[${e}]`,p[e]);for(const e in d)r.append(`tempat_kerja[${e}]`,d[e]);for(const e in c)r.append(`position[${e}]`,c[e]);f.forEach((e,o)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?r.append(`organizations[${o}][${s}]`,e[s]):r.append(`organizations[${o}][${s}]`,e[s])}),_.forEach((e,o)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?r.append(`studies[${o}][${s}]`,e[s]):r.append(`studies[${o}][${s}]`,e[s])}),h.forEach((e,o)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?r.append(`trainings[${o}][${s}]`,e[s]):r.append(`trainings[${o}][${s}]`,e[s])}),k.forEach((e,o)=>{for(const s in e)e[s]!==void 0&&e[s]!==null&&r.append(`orang_tua[${o}][${s}]`,e[s])});for(const e in i)r.append(`hubungan[${e}]`,i[e]);b.forEach((e,o)=>{for(const s in e)r.append(`anak[${o}][${s}]`,e[s])});try{const e=await R.post(`/village/official/${q}/${C}/Edit`,r,{headers:{"Content-Type":"multipart/form-data"}});v.fire("Success","Data berhasil diperbarui.","success")}catch(e){v.fire("Error",((S=($=e.response)==null?void 0:$.data)==null?void 0:S.message)||"Terjadi kesalahan","error")}finally{x(!1)}};return t.jsxs(B,{header:t.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Tambah Pejabat Desa",t.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Penambahan Data Pejabat Desa"})]}),breadcrumb:[{name:"Tambah Official",path:"/village/official/create",active:!0,icon:t.jsx(J,{className:"w-5 h-5 mr-3"})}],children:[t.jsx(M,{title:"Update Official"}),t.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:t.jsxs("form",{onSubmit:l=>I(l,g,N),className:"space-y-8",children:[t.jsx(Q,{official:p,setOfficial:D,errors:m}),t.jsx(W,{tempat_kerja:d,setTempatKerja:P,errors:m}),t.jsx(O,{position:g,positions:T,officialPosition:c,setOfficialPosition:H}),t.jsx(ae,{organizations:E,setOrganizations:j,officialOrganizations:f,setOfficialOrganizations:j}),t.jsx(V,{officialStudies:_,setOfficialStudies:A}),t.jsx(ee,{officialTrainings:h,setOfficialTrainings:L}),t.jsx(X,{orang_tua:k,setOrangTua:z,errors:m}),t.jsx(Y,{hubungan:i,setHubungan:K,errors:m}),t.jsx(Z,{anak:b,setAnak:U,errors:m}),t.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:t.jsxs(u.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:y,children:[t.jsx(G,{className:"mr-2"}),y?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{Ee as default};
