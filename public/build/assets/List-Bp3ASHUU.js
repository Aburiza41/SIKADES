import{r as l,j as e,$ as z}from"./app-cnLqKnWv.js";import{$ as Q,I as k,Q as q,M as G,N as V,L as W}from"./index-sj701c6h.js";import{u as j,w as X}from"./xlsx-5rFX-EW9.js";import Y from"./Actions-BtuhkdyP.js";import{H as Z,a as ee,b as te}from"./index-Cg9YPSb5.js";import{m as b}from"./proxy-0toHJmZX.js";import"./iconBase-CMF4PMHw.js";import"./index-CoBPEikz.js";function ce({officials:r,fetchData:S,loading:D,onEdit:C,onDelete:T,onView:M,onPrint:F}){var f;const[g,E]=l.useState(""),[y,P]=l.useState(""),[i,w]=l.useState((r==null?void 0:r.current_page)||1),[c,H]=l.useState((r==null?void 0:r.per_page)||10),[p,_]=l.useState("id"),[u,N]=l.useState("asc"),L=["SD/MI","SMP/MTS","SMA/SMK/MA","D1","D2","D3","D4","S1","S2","S3"];l.useEffect(()=>{S({page:i,perPage:c,search:g,filters:y,sortField:p,sortDirection:u})},[i,c,g,y,p,u]);const R=t=>w(t),$=t=>{H(parseInt(t.target.value)),w(1)},I=t=>{p===t?N(u==="asc"?"desc":"asc"):(_(t),N("asc"))},O=()=>{const t=JSON.stringify(r.data,null,2),s=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download="officials.json",o.click(),URL.revokeObjectURL(a)},A=()=>{const t=j.json_to_sheet(r.data),s=j.book_new();j.book_append_sheet(s,t,"officials"),X(s,"officials.xlsx")},J=t=>{var d;if(!t||t.length===0)return{position:"-",remainingTime:"-"};const a=[...t].sort((x,m)=>new Date(m.mulai)-new Date(x.mulai))[0],o=((d=a.position)==null?void 0:d.name)||"-";let n="-";if(a.selesai){const K=new Date(a.selesai)-new Date,v=Math.ceil(K/(1e3*60*60*24));v>0?n=`${v} hari`:n="Masa jabatan berakhir"}return{position:o,remainingTime:n}},U=({role:t})=>{let s="",a="";switch(t){case"tolak":s="bg-red-500",a="Tolak";break;case"daftar":s="bg-blue-500",a="Daftar";break;case"validasi":s="bg-green-500",a="Terima";break;case"proses":s="bg-yellow-500",a="Proses";break;default:s="bg-gray-500",a="Tidak Diketahui"}return e.jsx("span",{className:`px-2 py-1 text-xs text-white rounded-full ${s}`,children:a})},h=(t,s)=>{const a=p===t;return e.jsx("th",{className:"border cursor-pointer hover:bg-gray-100 p-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:()=>I(t),children:e.jsxs("div",{className:"flex items-center",children:[s,a?u==="asc"?e.jsx(G,{className:"ml-1"}):e.jsx(V,{className:"ml-1"}):e.jsx(W,{className:"ml-1 text-gray-400"})]})})},B=({currentPage:t,lastPage:s,handlePageChange:a})=>{const o=()=>{const n=[],d=Math.max(1,t-2),x=Math.min(s,t+2);d>1&&(n.push(1),d>2&&n.push("..."));for(let m=d;m<=x;m++)n.push(m);return x<s&&(x<s-1&&n.push("..."),n.push(s)),n};return e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>a(t-1),disabled:t===1,className:`p-2 rounded-md border ${t===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(Z,{className:"w-4 h-4"})}),o().map((n,d)=>e.jsx("button",{onClick:()=>typeof n=="number"&&a(n),className:`p-2 min-w-[36px] rounded-md border text-sm ${n===t?"border-green-500 bg-green-50 text-green-600 font-medium":n==="..."?"border-transparent text-gray-500 cursor-default":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,disabled:n==="...",children:n==="..."?e.jsx(ee,{}):n},d)),e.jsx("button",{onClick:()=>a(t+1),disabled:t===s,className:`p-2 rounded-md border ${t===s?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(te,{className:"w-4 h-4"})})]})})};return e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 w-full",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Q,{className:"text-gray-400"})}),e.jsx(b.input,{type:"text",placeholder:"Cari nama...",value:g,onChange:t=>E(t.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300}})]}),e.jsxs("select",{value:y,onChange:t=>P(t.target.value),className:"block w-full md:w-auto pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[e.jsx("option",{value:"",children:"Semua Pendidikan"}),L.map((t,s)=>e.jsx("option",{value:t,children:t},s))]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[e.jsxs(b.button,{onClick:O,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(k,{className:"mr-2"})," JSON"]}),e.jsxs(b.button,{onClick:A,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(k,{className:"mr-2"})," Excel"]}),e.jsxs(b.a,{as:z,href:route("village.official.create"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(q,{className:"mr-2"})," Tambah"]})]})]}),e.jsx("div",{className:"overflow-x-auto w-full px-5 py-3",children:e.jsxs("table",{className:"w-full divide-x divide-gray-200 text-sm border",children:[e.jsx("thead",{className:"bg-gray-50 border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),h("nama_lengkap","Nama Lengkap"),h("nik","NIK"),h("niad","NIAD"),h("pendidikan","Pendidikan"),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jabatan"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sisa Jabatan"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-x divide-gray-200 border",children:D?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"border px-2 py-2 text-center text-sm text-gray-500",children:"Memuat data..."})}):((f=r==null?void 0:r.data)==null?void 0:f.length)>0?r.data.map((t,s)=>{const{position:a,remainingTime:o}=J(t.positions);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:(i-1)*c+s+1}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.nama_lengkap})}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:t.nik}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:t.niad}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:t.identities.pendidikan||"-"}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:a}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:o}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:e.jsx(U,{role:t.status})}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(Y,{row:t,onEdit:C,onDelete:T,onView:M,onPrint:F})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"border px-2 py-2 text-center text-sm text-gray-500",children:"Tidak ada data yang ditemukan"})})})]})}),e.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm text-gray-700 mr-2",children:"Baris per halaman:"}),e.jsxs("select",{value:c,onChange:$,className:"block w-20 pl-3 pr-10 py-1 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Menampilkan ",e.jsx("span",{className:"font-medium",children:(i-1)*c+1})," sampai"," ",e.jsx("span",{className:"font-medium",children:Math.min(i*c,(r==null?void 0:r.total)||0)})," ","dari ",e.jsx("span",{className:"font-medium",children:(r==null?void 0:r.total)||0})," data"]}),e.jsx(B,{currentPage:i,lastPage:(r==null?void 0:r.last_page)||1,handlePageChange:R})]})]})}export{ce as default};
