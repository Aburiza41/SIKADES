import{K as _,r as c,j as e}from"./app-cnLqKnWv.js";import"./sweetalert2.esm.all-LHqzTR4y.js";import{o as D,d as S}from"./index-sj701c6h.js";import A from"./Actions-B15WSBEy.js";import"./iconBase-CMF4PMHw.js";import"./index-CoBPEikz.js";function Y({officials:s,fetchData:l,onView:i,onPrint:p}){var b;_().props.auth.user;const[x,M]=c.useState(""),[u,T]=c.useState(""),[a,y]=c.useState((s==null?void 0:s.current_page)||1),[n,w]=c.useState((s==null?void 0:s.per_page)||10),[h,v]=c.useState("id"),[o,j]=c.useState("asc");c.useEffect(()=>{l({page:a,perPage:n,search:x,filters:u,sortField:h,sortDirection:o})},[a,n,x,u,h,o]);const g=t=>y(t),P=t=>{w(Number(t.target.value)),y(1)},m=t=>{h===t?j(o==="asc"?"desc":"asc"):(v(t),j("asc"))},C=({role:t})=>{let r="",d="";switch(t){case"tolak":r="bg-red-500",d="Tolak";break;case"daftar":r="bg-blue-500",d="Daftar";break;case"validasi":r="bg-green-500",d="Terima";break;case"proses":r="bg-yellow-500",d="Proses";break;default:r="bg-gray-500",d="Tidak Diketahui"}return e.jsx("span",{className:`px-2 py-1 text-xs text-white rounded-full ${r}`,children:d})};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg ",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs border",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"70px"},children:"No"}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"250px"},onClick:()=>m("nama_lengkap"),children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Nama Lengkap"})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},onClick:()=>m("nik"),children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"NIK"})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},onClick:()=>m("nipd"),children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"NIPD"})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},onClick:()=>m("pendidikan"),children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Pendidikan"})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Jabatan"})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Pelatihan"})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},children:e.jsx("div",{className:"flex items-center cursor-pointer",children:"Organisasi"})}),e.jsx("th",{className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Desa"}),e.jsx("th",{className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kecamatan"}),e.jsx("th",{className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"120px"},children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:((b=s==null?void 0:s.data)==null?void 0:b.length)>0?s.data.map((t,r)=>{var d,N,k;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:(a-1)*n+r+1}),e.jsxs("td",{className:"px-2 py-2 border whitespace-nowrap",children:[e.jsx("span",{className:"font-semibold",children:t.nama_lengkap}),"  (",F(t==null?void 0:t.tanggal_lahir)," ","th)"]}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.nik}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.nipd}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:((d=t==null?void 0:t.identities)==null?void 0:d.pendidikan_terakhir)||"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:((k=(N=t==null?void 0:t.positions)==null?void 0:N.position)==null?void 0:k.name)||"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:Array.isArray(t==null?void 0:t.official_trainings)?t.official_trainings.length:"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:Array.isArray(t==null?void 0:t.official_organizations)?t.official_organizations.length:"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.village.name_dagri||"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.village.district.name_dagri||"-"}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500 text-center",children:e.jsx(C,{role:t.status})}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:e.jsx(A,{row:t,onView:i,onPrint:p})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center",children:"Tidak ada data yang ditemukan"})})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-4",children:[e.jsxs("div",{className:"mb-2 md:mb-0 flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("select",{id:"rowsPerPage",value:n,onChange:P,className:"border rounded",children:[5,10,25,50,100].map(t=>e.jsx("option",{value:t,children:t},t))})}),e.jsxs("span",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:(a-1)*n+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(a*n,(s==null?void 0:s.total)||0)})," ","Total"," ",e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.total)||0})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>g(a-1),disabled:a===1,className:"px-3 py-1 border rounded disabled:opacity-50 bg-green-700 text-white",children:e.jsx(D,{})}),Array.from({length:Math.ceil(((s==null?void 0:s.total)||0)/n)},(t,r)=>r+1).slice(Math.max(0,a-3),Math.min(Math.ceil(((s==null?void 0:s.total)||0)/n),a+2)).map(t=>e.jsx("button",{onClick:()=>g(t),className:`px-3 py-1 border rounded ${a===t?"bg-green-700 text-white opacity-50":""}`,children:t},t)),e.jsx("button",{onClick:()=>g(a+1),disabled:a===Math.ceil(((s==null?void 0:s.total)||0)/n),className:"px-3 py-1 border rounded disabled:opacity-50 bg-green-700 text-white",children:e.jsx(S,{})})]})})]})]})}const F=s=>{if(!s)return"-";const l=new Date,i=new Date(s);let p=l.getFullYear()-i.getFullYear();const x=l.getMonth()-i.getMonth();return(x<0||x===0&&l.getDate()<i.getDate())&&p--,p};export{Y as default};
