import{r as i,j as e}from"./app-cnLqKnWv.js";import{$ as I,I as v,M as J,N as P,L as z}from"./index-sj701c6h.js";import{u as f,w as q}from"./xlsx-5rFX-EW9.js";import G from"./Actions-B5IPXbRG.js";import{H as Q,a as V,b as W}from"./index-Cg9YPSb5.js";import{m as y}from"./proxy-0toHJmZX.js";import"./iconBase-CMF4PMHw.js";import"./index-CoBPEikz.js";import"./sweetalert2.esm.all-LHqzTR4y.js";function le({users:a,fetchData:k,loading:S,onEdit:C,onDelete:_,onView:F,onPrint:E}){var w;console.log(a);const[h,R]=i.useState(""),[b,D]=i.useState(""),[c,j]=i.useState((a==null?void 0:a.current_page)||1),[m,H]=i.useState((a==null?void 0:a.per_page)||10),[x,A]=i.useState("id"),[p,N]=i.useState("asc");i.useEffect(()=>{k({page:c,perPage:m,search:h,filters:b,sortField:x,sortDirection:p})},[c,m,h,b,x,p]);const L=t=>j(t),M=t=>{H(parseInt(t.target.value)),j(1)},U=t=>{x===t?N(p==="asc"?"desc":"asc"):(A(t),N("asc"))},O=()=>{const t=JSON.stringify((a==null?void 0:a.data)||[],null,2),r=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(r),l=document.createElement("a");l.href=s,l.download="users.json",l.click(),URL.revokeObjectURL(s)},T=()=>{const t=f.json_to_sheet((a==null?void 0:a.data)||[]),r=f.book_new();f.book_append_sheet(r,t,"users"),q(r,"users.xlsx")},$=({role:t})=>{let r="",s="";switch(t){case"admin":r="bg-red-500",s="Admin";break;case"regency":r="bg-blue-500",s="Kabupaten";break;case"district":r="bg-green-500",s="Kecamatan";break;case"village":r="bg-yellow-500",s="Desa";break;default:r="bg-gray-500",s="Unknown"}return e.jsx("span",{className:`px-2 py-1 text-xs text-white rounded-full ${r}`,children:s})},g=(t,r)=>{const s=x===t;return e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U(t),children:e.jsxs("div",{className:"flex items-center",children:[r,s?p==="asc"?e.jsx(J,{className:"ml-1"}):e.jsx(P,{className:"ml-1"}):e.jsx(z,{className:"ml-1 text-gray-400"})]})})},K=({currentPage:t,lastPage:r,handlePageChange:s})=>{const l=()=>{const n=[],o=Math.max(1,t-2),d=Math.min(r,t+2);o>1&&(n.push(1),o>2&&n.push("..."));for(let u=o;u<=d;u++)n.push(u);return d<r&&(d<r-1&&n.push("..."),n.push(r)),n};return e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>s(t-1),disabled:t===1,className:`p-2 rounded-md border ${t===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(Q,{className:"w-4 h-4"})}),l().map((n,o)=>e.jsx("button",{onClick:()=>typeof n=="number"&&s(n),className:`p-2 min-w-[36px] rounded-md border text-sm ${n===t?"border-green-500 bg-green-50 text-green-600 font-medium":n==="..."?"border-transparent text-gray-500 cursor-default":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,disabled:n==="...",children:n==="..."?e.jsx(V,{}):n},o)),e.jsx("button",{onClick:()=>s(t+1),disabled:t===r,className:`p-2 rounded-md border ${t===r?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(W,{className:"w-4 h-4"})})]})})},B=t=>{var r,s,l,n,o,d;return t.role==="regency"?((s=(r=t.user_regency)==null?void 0:r.regency)==null?void 0:s.name_bps)||"N/A":t.role==="district"?((n=(l=t.user_district)==null?void 0:l.district)==null?void 0:n.name_bps)||"N/A":t.role==="village"?((d=(o=t.user_village)==null?void 0:o.village)==null?void 0:d.name_bps)||"N/A":"Admin Pusat"};return e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 w-full",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{className:"text-gray-400"})}),e.jsx(y.input,{type:"text",placeholder:"Cari nama...",value:h,onChange:t=>R(t.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300}})]}),e.jsxs("select",{value:b,onChange:t=>D(t.target.value),className:"block w-full md:w-auto pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[e.jsx("option",{value:"",children:"Semua Role"}),e.jsx("option",{value:"village",children:"Desa"}),e.jsx("option",{value:"district",children:"Kecamatan"}),e.jsx("option",{value:"regency",children:"Kabupaten"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[e.jsxs(y.button,{onClick:O,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(v,{className:"mr-2"})," JSON"]}),e.jsxs(y.button,{onClick:T,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(v,{className:"mr-2"})," Excel"]})]})]}),e.jsx("div",{className:"overflow-x-auto w-full px-5 py-3",children:e.jsxs("table",{className:"w-full divide-x divide-gray-200 text-sm border",children:[e.jsx("thead",{className:"bg-gray-50 border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),g("name","Nama"),g("email","Email"),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Daerah"}),g("role","Role"),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-x divide-gray-200 border",children:S?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"border px-2 py-2 text-center text-sm text-gray-500",children:"Memuat data..."})}):((w=a==null?void 0:a.data)==null?void 0:w.length)>0?a.data.map((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:t.id}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name})}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:t.email}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:B(t)}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500",children:e.jsx($,{role:t.role})}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(G,{row:t,onEdit:C,onDelete:_,onView:F,onPrint:E})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"border px-2 py-2 text-center text-sm text-gray-500",children:"Tidak ada data yang ditemukan"})})})]})}),e.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm text-gray-700 mr-2",children:"Baris per halaman:"}),e.jsxs("select",{value:m,onChange:M,className:"block w-20 pl-3 pr-10 py-1 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Menampilkan ",e.jsx("span",{className:"font-medium",children:(c-1)*m+1})," sampai"," ",e.jsx("span",{className:"font-medium",children:Math.min(c*m,(a==null?void 0:a.total)||0)})," ","dari ",e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.total)||0})," data"]}),e.jsx(K,{currentPage:c,lastPage:(a==null?void 0:a.last_page)||1,handlePageChange:L})]})]})}export{le as default};
