import{K,r as d,j as a,L as $,S as g}from"./app-CVPon-in.js";import{S as n}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as F}from"./AuthenticatedLayout-uxNNxEb-.js";import V from"./List-v15eEeBS.js";import{H as Y}from"./index-CQ3QYBQr.js";import S from"./Modal-CKtXlrf5.js";import q from"./PDF-DLekiA8U.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./transition-CxQxzVBW.js";import"./LoadingPage-D5KRQg6W.js";import"./proxy-D2F4h_SH.js";import"./index-Bz8wJd-C.js";import"./index.es-Cx28G3hx.js";import"./xlsx-5rFX-EW9.js";import"./Actions-CPYCzywh.js";import"./index-Bid0kMqz.js";import"./Procces-Bru-WDcn.js";import"./jspdf.plugin.autotable-Ct2Crhd4.js";import"./typeof-QjJsDpFa.js";var E;const C=((E=document.querySelector('meta[name="csrf-token"]'))==null?void 0:E.getAttribute("content"))||"";function ge({initialOfficials:O,officials:H}){const{flash:l}=K().props,[c,h]=d.useState(O),[A,_]=d.useState(!1),[y,k]=d.useState(!1),[m,w]=d.useState(!1),[v,f]=d.useState(!1),[i,N]=d.useState(null),[t,p]=d.useState({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""});d.useEffect(()=>{l!=null&&l.success&&n.fire("Success",l.success,"success"),l!=null&&l.error&&n.fire("Error",l.error,"error")},[l]);const j=({page:e=1,perPage:r=10,search:o="",filters:s="",sortField:b="",sortDirection:P=""})=>{_(!0),g.get("/regency/official",{page:e,per_page:r,search:o,filters:s,sort_field:b,sort_direction:P},{preserveState:!0,replace:!0,onSuccess:R=>{h(R.props.officials),_(!1)},onError:()=>{n.fire("Error","Failed to fetch data. Please try again.","error"),_(!1)}})},B=e=>{N(e),w(!0),f(!1),k(!0),p({village_id:e.village_id,nik:e.nik,niad:e.niad,nama_lengkap:e.nama_lengkap,gelar_depan:e.gelar_depan,gelar_belakang:e.gelar_belakang,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,jenis_kelamin:e.jenis_kelamin,status_perkawinan:e.status_perkawinan,agama:e.agama,alamat:e.alamat,rt:e.rt,rw:e.rw,regency_code:e.regency_code,regency_name:e.regency_name,district_code:e.district_code,district_name:e.district_name,village_code:e.village_code,village_name:e.village_name,handphone:e.handphone,gol_darah:e.gol_darah,pendidikan:e.pendidikan,bpjs_kesehatan:e.bpjs_kesehatan,bpjs_ketenagakerjaan:e.bpjs_ketenagakerjaan,npwp:e.npwp,status:e.status})},D=e=>{n.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&g.delete(`/regency/official/${e}`,{headers:{"X-CSRF-TOKEN":C},onSuccess:()=>{n.fire("Deleted!","Data has been successfully deleted.","success"),j({})},onError:()=>{n.fire("Error","An error occurred while deleting the data.","error")}})})},[U,x]=d.useState(!1),T=e=>{n.fire({title:"Are you sure?",text:"This official will be accepted!",icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, accept it!"}).then(r=>{r.isConfirmed&&(x(!0),g.put(`/regency/official/${e.nik}/accept`,{},{onSuccess:()=>{n.fire("Accepted!","The official has been accepted.","success");const o=c.data.map(s=>s.nik===e.nik?{...s,status:"validasi"}:s);h({...c,data:o}),x(!1)},onError:()=>{n.fire("Error","An error occurred while accepting the official.","error"),x(!1)}}))})},I=e=>{n.fire({title:"Are you sure?",text:"This official will be rejected!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, reject it!"}).then(r=>{r.isConfirmed&&g.put(`/regency/official/${e.nik}/reject`,{},{onSuccess:()=>{n.fire("Rejected!","The official has been rejected.","success");const o=c.data.map(s=>s.nik===e.nik?{...s,status:"tolak"}:s);h({...c,data:o})},onError:()=>{n.fire("Error","An error occurred while rejecting the official.","error")}})})},L=e=>{const r={nama_lengkap:e.nama_lengkap,nik:e.nik,niad:e.niad,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,jenis_kelamin:e.jenis_kelamin,status_perkawinan:e.status_perkawinan,agama:e.agama,alamat:e.alamat,handphone:e.handphone,gol_darah:e.gol_darah,pendidikan:e.pendidikan,bpjs_kesehatan:e.bpjs_kesehatan,bpjs_ketenagakerjaan:e.bpjs_ketenagakerjaan,npwp:e.npwp,status:e.status};q(r)},M=e=>{e.preventDefault();const r=m?`/regency/official/${i.id}`:"/regency/official",o=m?"put":"post",s={village_id:t.village_id,nik:t.nik,niad:t.niad,nama_lengkap:t.nama_lengkap,gelar_depan:t.gelar_depan,gelar_belakang:t.gelar_belakang,tempat_lahir:t.tempat_lahir,tanggal_lahir:t.tanggal_lahir,jenis_kelamin:t.jenis_kelamin,status_perkawinan:t.status_perkawinan,agama:t.agama,alamat:t.alamat,rt:t.rt,rw:t.rw,regency_code:t.regency_code,regency_name:t.regency_name,district_code:t.district_code,district_name:t.district_name,village_code:t.village_code,village_name:t.village_name,handphone:t.handphone,gol_darah:t.gol_darah,pendidikan:t.pendidikan,bpjs_kesehatan:t.bpjs_kesehatan,bpjs_ketenagakerjaan:t.bpjs_ketenagakerjaan,npwp:t.npwp,status:t.status};g[o](r,s,{headers:{"X-CSRF-TOKEN":C},onSuccess:()=>{n.fire("Success",`Official ${m?"updated":"added"} successfully.`,"success"),k(!1),j({})},onError:b=>{n.fire("Error",Object.values(b).join(", "),"error")}})},u=()=>{k(!1),w(!1),f(!1),N(null),p({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""})};return a.jsxs(F,{header:a.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Official",a.jsx("p",{className:"text-sm font-thin mt-1",children:"Daftar Official"})]}),breadcrumb:[{name:"Official",path:"/regency/official",active:!0,icon:a.jsx(Y,{className:"w-5 h-5 mr-3"})}],children:[a.jsx($,{title:"Official"}),a.jsx("div",{className:"p-4",children:a.jsx(V,{officials:c,fetchData:j,loading:A,onEdit:B,onDelete:D,onAccept:T,onReject:I,onPrint:L})}),a.jsx(S,{isOpen:y&&!v,onClose:u,title:m?"Edit Official":"Add Official",children:a.jsx("div",{className:"p-4",children:a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),a.jsx("input",{type:"text",value:t.nama_lengkap,onChange:e=>p({...t,nama_lengkap:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),a.jsx("input",{type:"text",value:t.nik,onChange:e=>p({...t,nik:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),a.jsx("input",{type:"text",value:t.niad,onChange:e=>p({...t,niad:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"flex justify-end",children:[a.jsx("button",{type:"button",onClick:u,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:m?"Update":"Save"})]})]})})}),a.jsx(S,{isOpen:y&&v,onClose:u,title:"View Official",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),a.jsx("p",{className:"mt-1 text-gray-900",children:i==null?void 0:i.nama_lengkap})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),a.jsx("p",{className:"mt-1 text-gray-900",children:i==null?void 0:i.nik})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),a.jsx("p",{className:"mt-1 text-gray-900",children:i==null?void 0:i.niad})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})})]})}export{ge as default};
