import{r as c,j as e,e as h}from"./app-CVPon-in.js";import{S as l}from"./sweetalert2.esm.all-LHqzTR4y.js";import y from"./Modal-CqbpqWG5.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./index-Bz8wJd-C.js";import"./proxy-D2F4h_SH.js";const L=({isOpen:u,onClose:i,editedVillage:s,setEditedVillage:n})=>{const[t,f]=c.useState(null),[d,x]=c.useState(""),[p,m]=c.useState(!1),b=2*1024*1024,g=async r=>{if(r.preventDefault(),m(!0),t&&t.size>b){l.fire("Error","Logo file size exceeds the maximum limit of 2MB.","error"),m(!1);return}const a=new FormData;a.append("description",s.description),a.append("website",s.website),t&&a.append("logo",t);try{const o=await h.post(`/village/profile/${s.id}`,a);o.data.success?(l.fire("Success","Village profile updated successfully.","success").then(()=>{window.location.reload()}),n(o.data),i()):l.fire("Error","Failed to update village profile.","error")}catch(o){console.error("Error updating village profile:",o),l.fire("Error","Failed to update village profile.","error")}finally{m(!1)}};return e.jsx(y,{isOpen:u,onClose:i,title:"Edit Village",children:e.jsxs("form",{onSubmit:g,className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deskripsi"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:s.description||"",onChange:r=>n({...s,description:r.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Website"}),e.jsx("input",{type:"url",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:s.website||"",onChange:r=>{n({...s,website:r.target.value}),x("")}}),d&&e.jsx("p",{className:"text-red-500 text-sm",children:d})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo"}),e.jsx("input",{type:"file",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",onChange:r=>f(r.target.files[0]),accept:"image/*"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:i,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",disabled:p,children:p?"Loading...":"Simpan"})]})]})})};export{L as default};
