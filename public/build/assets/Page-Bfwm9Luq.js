import{K as M,r as o,j as e,L as G,S as v}from"./app-cnLqKnWv.js";import{S as n}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as L}from"./AuthenticatedLayout-DtE7q2g1.js";import F from"./List-CVbK7jqm.js";import{k as V}from"./index-CyDsHmf4.js";import w from"./Modal-D7All7tf.js";import"./index-sj701c6h.js";import"./iconBase-CMF4PMHw.js";import"./transition-LX_87-cn.js";import"./LoadingPage-CsjTuYab.js";import"./proxy-0toHJmZX.js";import"./index-CSb7vC3W.js";import"./xlsx-5rFX-EW9.js";import"./Actions-XvkPhilo.js";import"./index-CoBPEikz.js";var C;const S=((C=document.querySelector('meta[name="csrf-token"]'))==null?void 0:C.getAttribute("content"))||"";function de({initialRegencies:E}){const{flash:d}=M().props,[K,A]=o.useState(E),[D,f]=o.useState(!1),[y,l]=o.useState(!1),[m,x]=o.useState(!1),[k,p]=o.useState(!1),[s,j]=o.useState(null),[t,i]=o.useState({code_bps:"",name_bps:"",code_dagri:"",name_dagri:"",active:!1,code:""}),[r,c]=o.useState({});o.useEffect(()=>{d!=null&&d.success&&n.fire("Success",d.success,"success"),d!=null&&d.error&&n.fire("Error",d.error,"error")},[d]);const _=({page:a=1,perPage:u=10,search:b="",sortField:N="",sortDirection:g=""})=>{f(!0),v.get("/admin/regency",{page:a,per_page:u,search:b,sort_field:N,sort_direction:g},{preserveState:!0,replace:!0,onSuccess:$=>{A($.props.initialRegencies),f(!1)},onError:()=>{n.fire("Error","Failed to fetch data. Please try again.","error"),f(!1)}})},B=()=>{x(!1),p(!1),l(!0),c({}),i({code_bps:"",name_bps:"",code_dagri:"",name_dagri:"",active:!1,code:""})},T=a=>{j(a),x(!0),p(!1),l(!0),c({}),i({code_bps:a.code_bps,name_bps:a.name_bps,code_dagri:a.code_dagri,name_dagri:a.name_dagri,active:a.active,code:a.code})},I=a=>{j(a),x(!1),p(!0),l(!0)},O=a=>{n.fire({title:"Apakah Anda yakin?",text:"Data kabupaten/kota ini akan dihapus!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(u=>{u.isConfirmed&&v.delete(`/admin/regency/${a}`,{headers:{"X-CSRF-TOKEN":S},onSuccess:()=>{n.fire("Terhapus!","Kabupaten/kota berhasil dihapus.","success"),_({})},onError:b=>{n.fire("Error",b.error||"Terjadi kesalahan saat menghapus data.","error")}})})},P=()=>{const a={};return t.code_bps||(a.code_bps="Code BPS wajib diisi."),t.name_bps||(a.name_bps="Name BPS wajib diisi."),t.code_dagri||(a.code_dagri="Code DAGRI wajib diisi."),t.name_dagri||(a.name_dagri="Name DAGRI wajib diisi."),t.code||(a.code="Code wajib diisi."),c(a),Object.keys(a).length===0},R=a=>{if(a.preventDefault(),!P()){n.fire("Error","Harap isi semua kolom yang wajib.","error");return}const u=m?`/admin/regency/${s.id}`:"/admin/regency",b=m?"put":"post",N={code_bps:t.code_bps,name_bps:t.name_bps,code_dagri:t.code_dagri,name_dagri:t.name_dagri,active:t.active,code:t.code};v[b](u,N,{headers:{"X-CSRF-TOKEN":S},onSuccess:()=>{n.fire("Success",`Kabupaten/kota ${m?"diperbarui":"ditambahkan"} berhasil.`,"success"),l(!1),c({}),_({})},onError:g=>{c(g),n.fire("Error",Object.values(g).join(", "),"error")}})},h=()=>{l(!1),x(!1),p(!1),j(null),c({}),i({code_bps:"",name_bps:"",code_dagri:"",name_dagri:"",active:!1,code:""})};return e.jsxs(L,{header:e.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Regency",e.jsx("p",{className:"text-sm font-thin mt-1",children:"Daftar Kabupaten/Kota"})]}),breadcrumb:[{name:"Regency",path:"/admin/regency",active:!0,icon:e.jsx(V,{className:"w-5 h-5 mr-3"})}],children:[e.jsx(G,{title:"Regency"}),e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:B,className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Tambah Kabupaten/Kota"}),e.jsx(F,{regencies:K,fetchData:_,loading:D,onEdit:T,onDelete:O,onView:I})]}),e.jsx(w,{isOpen:y&&!k,onClose:h,title:m?"Ubah Kabupaten/Kota":"Tambah Kabupaten/Kota",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code BPS"}),e.jsx("input",{type:"text",value:t.code_bps,onChange:a=>i({...t,code_bps:a.target.value}),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${r.code_bps?"border-red-500":""}`}),r.code_bps&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.code_bps})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name BPS"}),e.jsx("input",{type:"text",value:t.name_bps,onChange:a=>i({...t,name_bps:a.target.value}),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${r.name_bps?"border-red-500":""}`}),r.name_bps&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name_bps})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code DAGRI"}),e.jsx("input",{type:"text",value:t.code_dagri,onChange:a=>i({...t,code_dagri:a.target.value}),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${r.code_dagri?"border-red-500":""}`}),r.code_dagri&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.code_dagri})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name DAGRI"}),e.jsx("input",{type:"text",value:t.name_dagri,onChange:a=>i({...t,name_dagri:a.target.value}),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${r.name_dagri?"border-red-500":""}`}),r.name_dagri&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name_dagri})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Active"}),e.jsx("input",{type:"checkbox",checked:t.active,onChange:a=>i({...t,active:a.target.checked}),className:"mt-1 rounded border-gray-300"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code"}),e.jsx("input",{type:"text",value:t.code,onChange:a=>i({...t,code:a.target.value}),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm ${r.code?"border-red-500":""}`}),r.code&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.code})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:h,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:m?"Perbarui":"Simpan"})]})]})})}),e.jsx(w,{isOpen:y&&k,onClose:h,title:"Lihat Kabupaten/Kota",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code BPS"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s==null?void 0:s.code_bps})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name BPS"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s==null?void 0:s.name_bps})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code DAGRI"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s==null?void 0:s.code_dagri})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name DAGRI"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s==null?void 0:s.name_dagri})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Active"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s!=null&&s.active?"Ya":"Tidak"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code"}),e.jsx("p",{className:"mt-1 text-gray-900",children:s==null?void 0:s.code})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Tutup"})})]})})]})}export{de as default};
