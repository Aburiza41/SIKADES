import{K as R,r as o,j as a,L as F,S as _}from"./app-EIz8nQ5Q.js";import{S as n}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as q}from"./AuthenticatedLayout-DaJ7Bo11.js";import U from"./List-lGsKLbYt.js";import{a as X}from"./index-D-VSm5dn.js";import C from"./Modal-CgMU3B99.js";import H from"./PDF-DcbmXZAU.js";import"./index-CuuF2Vom.js";import"./iconBase-CIswt8ol.js";import"./transition-DuUQTJM_.js";import"./LoadingPage-DIqH4F6W.js";import"./proxy-Br4hXrCY.js";import"./index-26-9MRme.js";import"./Actions-C-yEkhj7.js";import"./index-BTPrMAX7.js";import"./Procces-DQeczn_0.js";import"./ExcelImportModal-DeTVL3SM.js";import"./jspdf.plugin.autotable-C7mnqvEA.js";import"./typeof-QjJsDpFa.js";var B;const E=((B=document.querySelector('meta[name="csrf-token"]'))==null?void 0:B.getAttribute("content"))||"";function ge({initialOfficials:$,officials:Y,role:c,position:j}){const{flash:l}=R().props,[p,x]=o.useState($),[T,b]=o.useState(!1),[S,k]=o.useState(!1),[g,y]=o.useState(!1),[f,v]=o.useState(!1),[r,w]=o.useState(null),[t,u]=o.useState({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""});o.useEffect(()=>{l!=null&&l.success&&n.fire("Success",l.success,"success"),l!=null&&l.error&&n.fire("Error",l.error,"error")},[l]);const N=({page:e=1,perPage:s=10,search:i="",filters:d="",sortField:m="",sortDirection:M=""})=>{b(!0),_.get(`/admin/official/${c}`,{page:e,per_page:s,search:i,filters:d,sort_field:m,sort_direction:M},{preserveState:!0,replace:!0,onSuccess:K=>{x(K.props.officials),b(!1)},onError:()=>{n.fire("Error","Failed to fetch data. Please try again.","error"),b(!1)}})},O=e=>{w(e),y(!0),v(!1),k(!0),u({village_id:e.village_id,nik:e.nik,niad:e.niad,nama_lengkap:e.nama_lengkap,gelar_depan:e.gelar_depan,gelar_belakang:e.gelar_belakang,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,jenis_kelamin:e.jenis_kelamin,status_perkawinan:e.status_perkawinan,agama:e.agama,alamat:e.alamat,rt:e.rt,rw:e.rw,regency_code:e.regency_code,regency_name:e.regency_name,district_code:e.district_code,district_name:e.district_name,village_code:e.village_code,village_name:e.village_name,handphone:e.handphone,gol_darah:e.gol_darah,pendidikan:e.pendidikan,bpjs_kesehatan:e.bpjs_kesehatan,bpjs_ketenagakerjaan:e.bpjs_ketenagakerjaan,npwp:e.npwp,status:e.status})},D=e=>{w(e),y(!1),v(!0),k(!0)},A=e=>{n.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&_.delete(`/admin/official/${c}/${e}`,{headers:{"X-CSRF-TOKEN":E},onSuccess:()=>{n.fire("Deleted!","Data has been successfully deleted.","success"),N({})},onError:()=>{n.fire("Error","An error occurred while deleting the data.","error")}})})},P=e=>{const s={nama_lengkap:e.nama_lengkap,nik:e.nik,niad:e.niad,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,jenis_kelamin:e.jenis_kelamin,status_perkawinan:e.status_perkawinan,agama:e.agama,alamat:e.alamat,handphone:e.handphone,gol_darah:e.gol_darah,pendidikan:e.pendidikan,bpjs_kesehatan:e.bpjs_kesehatan,bpjs_ketenagakerjaan:e.bpjs_ketenagakerjaan,npwp:e.npwp,status:e.status};H(s)},I=e=>{e.preventDefault();const s=g?`/admin/official/${c}/${r.id}`:`/admin/official/${c}`,i=g?"put":"post",d={village_id:t.village_id,nik:t.nik,nipd:t.nipd,nama_lengkap:t.nama_lengkap,gelar_depan:t.gelar_depan,gelar_belakang:t.gelar_belakang,tempat_lahir:t.tempat_lahir,tanggal_lahir:t.tanggal_lahir,jenis_kelamin:t.jenis_kelamin,status_perkawinan:t.status_perkawinan,agama:t.agama,alamat:t.alamat,rt:t.rt,rw:t.rw,regency_code:t.regency_code,regency_name:t.regency_name,district_code:t.district_code,district_name:t.district_name,village_code:t.village_code,village_name:t.village_name,handphone:t.handphone,gol_darah:t.gol_darah,pendidikan:t.pendidikan,bpjs_kesehatan:t.bpjs_kesehatan,bpjs_ketenagakerjaan:t.bpjs_ketenagakerjaan,npwp:t.npwp,status:t.status};_[i](s,d,{headers:{"X-CSRF-TOKEN":E},onSuccess:()=>{n.fire("Success",`Official ${g?"updated":"added"} successfully.`,"success"),k(!1),N({})},onError:m=>{n.fire("Error",Object.values(m).join(", "),"error")}})},h=()=>{k(!1),y(!1),v(!1),w(null),u({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""})},V=e=>{n.fire({title:"Apakah anda yakin?",text:`Pilih terima untuk menyetujui verifikasi ${e.nama_lengkap}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Terima",cancelButtonText:"Batal"}).then(s=>{s.isConfirmed&&(setIsProcessing(!0),_.put(`/regency/official/${e.nik}/accept`,{},{onSuccess:i=>{n.fire("Terima!",`Verifikasi ${i.nama_lengkap} diterima`,"success");const d=p.data.map(m=>m.nik===i.nik?{...m,status:"validasi"}:m);x({...p,data:d}),setIsProcessing(!1)},onError:i=>{n.fire("Error",`Verifikasi Terima ${i.nama_lengkap} dalam kendala`,"error"),setIsProcessing(!1)}}))})},L=e=>{n.fire({title:"Apakah anda yakin?",text:`Pilih terima untuk menolak verifikasi ${e.nama_lengkap}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Terima",cancelButtonText:"Batal"}).then(s=>{s.isConfirmed&&_.put(`/regency/official/${e.nik}/reject`,{},{onSuccess:()=>{n.fire("Tolak!",`Verifikasi ${e.nama_lengkap} ditolak`,"success");const i=p.data.map(d=>d.nik===e.nik?{...d,status:"tolak"}:d);x({...p,data:i})},onError:()=>{n.fire("Error",`Verifikasi Tolak ${e.nama_lengkap} dalam kendala`,"error")}})})};return a.jsxs(q,{header:a.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Daftar ",j.name,a.jsxs("p",{className:"text-sm font-thin mt-1",children:["Daftar pejabat desa dengan jabatan ",j.name]})]}),breadcrumb:[{name:"Pejabat",path:`/admin/official/${c}`,active:!0,icon:a.jsx(X,{className:"w-5 h-5 mr-3"})}],children:[a.jsx(F,{title:"Official"}),a.jsx("div",{className:"p-4",children:a.jsx(U,{officials:p,fetchData:N,loading:T,onEdit:O,onDelete:A,onView:D,onPrint:P,position:j,onAccept:V,onReject:L,role:c})}),a.jsx(C,{isOpen:S&&!f,onClose:h,title:g?"Edit Official":"Add Official",children:a.jsx("div",{className:"p-4",children:a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),a.jsx("input",{type:"text",value:t.nama_lengkap,onChange:e=>u({...t,nama_lengkap:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),a.jsx("input",{type:"text",value:t.nik,onChange:e=>u({...t,nik:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIPD"}),a.jsx("input",{type:"text",value:t.niad,onChange:e=>u({...t,niad:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"flex justify-end",children:[a.jsx("button",{type:"button",onClick:h,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:g?"Update":"Save"})]})]})})}),a.jsx(C,{isOpen:S&&f,onClose:h,title:"View Official",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),a.jsx("p",{className:"mt-1 text-gray-900",children:r==null?void 0:r.nama_lengkap})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),a.jsx("p",{className:"mt-1 text-gray-900",children:r==null?void 0:r.nik})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),a.jsx("p",{className:"mt-1 text-gray-900",children:r==null?void 0:r.niad})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})})]})}export{ge as default};
