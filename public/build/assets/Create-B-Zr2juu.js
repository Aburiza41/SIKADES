import{r as c,e as l,j as n,L as le,S as ge}from"./app-CVPon-in.js";import{S as Q}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as _e}from"./AuthenticatedLayout-uxNNxEb-.js";import{j as ue,H as he}from"./index-CQ3QYBQr.js";import ve from"./OfficialForm-DRPX1Svh.js";import fe from"./OfficialAddressForm-DOZJ_ZBp.js";import be from"./StudiesForm-DL141F-Z.js";import ke from"./OfficialContactForm-C1A0cOo1.js";import ye from"./OfficialIdentityForm-DOVfuZ4_.js";import je from"./PositionsForm-BDnF336f.js";import Se from"./TrainingsForm-BYyRIml2.js";import xe from"./OrganizationsForm-H1A41BBe.js";import{m as u}from"./proxy-D2F4h_SH.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./transition-CxQxzVBW.js";import"./LoadingPage-D5KRQg6W.js";import"./index-Bz8wJd-C.js";import"./react-select.esm-DGr4SDH5.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-CM85KNXL.js";import"./index.es-Cx28G3hx.js";var W;(W=document.querySelector('meta[name="csrf-token"]'))!=null&&W.getAttribute("content");function We({official:s,positions:X,trainings:Y,organizations:Z,studies:O}){var P,D,N,z,T,A,L,U,H,R,I,V,M,q,B,G,J,K;const[d,ee]=c.useState({village_id:s.village_id||"",nik:s.nik||"",niad:s.niad||"",nama_lengkap:s.nama_lengkap||"",gelar_depan:s.gelar_depan||"",gelar_belakang:s.gelar_belakang||"",tempat_lahir:s.tempat_lahir||"",tanggal_lahir:s.tanggal_lahir||"",jenis_kelamin:s.jenis_kelamin||"",status_perkawinan:s.status_perkawinan||"Menikah",agama:s.agama||""}),[i,p]=c.useState({alamat:((P=s.addresses)==null?void 0:P.alamat)||"",rt:((D=s.addresses)==null?void 0:D.rt)||"",rw:((N=s.addresses)==null?void 0:N.rw)||"",province_code:((z=s.addresses)==null?void 0:z.province_code)||"",province_name:((T=s.addresses)==null?void 0:T.province_name)||"",regency_code:((A=s.addresses)==null?void 0:A.regency_code)||"",regency_name:((L=s.addresses)==null?void 0:L.regency_name)||"",district_code:((U=s.addresses)==null?void 0:U.district_code)||"",district_name:((H=s.addresses)==null?void 0:H.district_name)||"",village_code:((R=s.addresses)==null?void 0:R.village_code)||"",village_name:((I=s.addresses)==null?void 0:I.village_name)||""}),[g,se]=c.useState({handphone:((V=s.contacts)==null?void 0:V.handphone)||"",email:((M=s.contacts)==null?void 0:M.email)||""}),[_,te]=c.useState({gol_darah:((q=s.identities)==null?void 0:q.gol_darah)||"",pendidikan:((B=s.identities)==null?void 0:B.pendidikan)||"",bpjs_kesehatan:((G=s.identities)==null?void 0:G.bpjs_kesehatan)||"",bpjs_ketenagakerjaan:((J=s.identities)==null?void 0:J.bpjs_ketenagakerjaan)||"",npwp:((K=s.identities)==null?void 0:K.npwp)||""}),[h,v]=c.useState(s.studies||[]),[f,b]=c.useState(s.position_official||[]),[k,y]=c.useState(s.official_trainings||[]),[j,S]=c.useState(s.official_organizations||[]),[x,ae]=c.useState([]),[$,oe]=c.useState([]),[w,ne]=c.useState([]),[F,re]=c.useState([]),[E,C]=c.useState(!1),[m,$e]=c.useState({});c.useEffect(()=>{l.get("/village/bps/wilayah").then(r=>ae(r.data)).catch(r=>console.error("Error fetching provinces:",r))},[]);const ce=r=>{const o=r.target.value,e=x.find(t=>t.kode_bps===r.target.value);p({...i,province_code:e.kode_bps,province_name:e.nama_bps,regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""}),l.get(`/village/bps/wilayah/kabupaten/${o}`).then(t=>oe(t.data)).catch(t=>console.error("Error fetching regencies:",t))},ie=r=>{const o=r.target.value,e=$.find(t=>t.kode_bps===r.target.value);p({...i,regency_code:e.kode_bps,regency_name:e.nama_bps,district_code:"",district_name:"",village_code:"",village_name:""}),l.get(`/village/bps/wilayah/kecamatan/${o}`).then(t=>ne(t.data)).catch(t=>console.error("Error fetching districts:",t))},de=r=>{const o=r.target.value,e=w.find(t=>t.kode_bps===r.target.value);p({...i,district_code:e.kode_bps,district_name:e.nama_bps,village_code:"",village_name:""}),l.get(`/village/bps/wilayah/desa/${o}`).then(t=>re(t.data)).catch(t=>console.error("Error fetching villages:",t))},pe=r=>{const o=F.find(e=>e.kode_bps===r.target.value);p({...i,village_code:o.kode_bps,village_name:o.nama_bps})},me=r=>{r.preventDefault(),C(!0);const o=new FormData;for(const e in d)o.append(`official[${e}]`,d[e]);for(const e in i)o.append(`address[${e}]`,i[e]);for(const e in g)o.append(`contact[${e}]`,g[e]);for(const e in _)o.append(`identity[${e}]`,_[e]);h.forEach((e,t)=>{for(const a in e)a==="doc_scan"&&e[a]instanceof File?o.append(`studies[${t}][${a}]`,e[a]):o.append(`studies[${t}][${a}]`,e[a])}),f.forEach((e,t)=>{for(const a in e)a==="foto"&&e[a]instanceof File?o.append(`positions[${t}][${a}]`,e[a]):o.append(`positions[${t}][${a}]`,e[a])}),k.forEach((e,t)=>{for(const a in e)a==="doc_scan"&&e[a]instanceof File?o.append(`trainings[${t}][${a}]`,e[a]):o.append(`trainings[${t}][${a}]`,e[a])}),j.forEach((e,t)=>{for(const a in e)a==="doc_scan"&&e[a]instanceof File?o.append(`organizations[${t}][${a}]`,e[a]):o.append(`organizations[${t}][${a}]`,e[a])}),ge.post(`/village/official/${d.nik}/update`,o,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{Q.fire("Success","Data berhasil diperbarui.","success")},onError:e=>{Q.fire("Error",Object.values(e).join(", "),"error")},onFinish:()=>{C(!1)}})};return n.jsxs(_e,{header:n.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Update Official",n.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Pembaruan Data Official"})]}),breadcrumb:[{name:"Update Official",path:`/village/official/update/${d.id}`,active:!0,icon:n.jsx(he,{className:"w-5 h-5 mr-3"})}],children:[n.jsx(le,{title:"Update Official"}),n.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:n.jsxs("form",{onSubmit:me,className:"space-y-4",children:[n.jsx(ve,{official:d,setOfficial:ee,errors:m}),n.jsx(fe,{address:i,setAddress:p,provinces:x,regencies:$,districts:w,villages:F,handleProvinceChange:ce,handleRegencyChange:ie,handleDistrictChange:de,handleVillageChange:pe,errors:m}),n.jsx(ke,{contact:g,setContact:se,errors:m}),n.jsx(ye,{identity:_,setIdentity:te,errors:m}),n.jsx(be,{studies:O,setStudies:v,officialStudies:h,setOfficialStudies:v}),n.jsx(je,{positions:X,setPositions:b,officialPositions:f,setOfficialPositions:b}),n.jsx(Se,{trainings:Y,setTrainings:y,officialTrainings:k,setOfficialTrainings:y}),n.jsx(xe,{organizations:Z,setOrganizations:S,officialOrganizations:j,setOfficialOrganizations:S}),n.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:n.jsxs(u.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:E,children:[n.jsx(ue,{className:"mr-2"})," ",E?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{We as default};
