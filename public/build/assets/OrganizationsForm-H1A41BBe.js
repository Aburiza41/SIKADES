import{r as s,j as e}from"./app-CVPon-in.js";import{k as D,l as F,m as X}from"./index-CQ3QYBQr.js";import{S as Y}from"./react-select.esm-DGr4SDH5.js";import{X as $}from"./index.es-Cx28G3hx.js";import{S as n}from"./sweetalert2.esm.all-LHqzTR4y.js";import{m as i}from"./proxy-D2F4h_SH.js";import{A}from"./index-Bz8wJd-C.js";import"./iconBase-DWCpscjx.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-CM85KNXL.js";function ne({organizations:T=[],setOrganizations:B=()=>{},officialOrganizations:l=[],setOfficialOrganizations:p=()=>{}}){const[H,w]=s.useState(!1),[M,N]=s.useState(!1),[g,v]=s.useState(""),[k,O]=s.useState(""),[o,r]=s.useState(null),[b,c]=s.useState(""),[h,d]=s.useState(""),[P,m]=s.useState(null),[S,u]=s.useState(""),[x,y]=s.useState(null),_=T.map(a=>({value:a.id,label:a.title})),E=()=>{w(!0)},j=()=>{w(!1),v(""),O("")},C=(a=null)=>{if(a!==null){const t=l[a];r({value:t.organization_id,label:t.organization_title}),c(t.nama),d(t.posisi),m(t.doc_scan||null),u(t.keterangan||""),y(a)}else r(null),c(""),d(""),m(null),u(""),y(null);N(!0)},z=()=>{N(!1),r(null),c(""),d(""),m(null),u(""),y(null)},J=async()=>{if(!g.trim()){n.fire({icon:"error",title:"Oops...",text:"Judul organisasi tidak boleh kosong!"});return}try{const a=await axios.post("/village/official/organization/store",{title:g,description:k});if(a.data.success){const t={id:a.data.data.id,title:a.data.data.title,description:a.data.data.description};B(f=>[...f,t]),j()}else n.fire({icon:"error",title:"Gagal",text:"Gagal menambahkan organisasi baru: "+a.data.message})}catch(a){console.error("Gagal menambahkan organisasi baru:",a),n.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat menambahkan organisasi baru. Silakan coba lagi."}),j()}},R=()=>{if(!o||!b||!h){n.fire({icon:"error",title:"Oops...",text:"Harap isi semua field yang diperlukan!"});return}const a={organization_id:o.value,organization_title:o.label,nama:b,posisi:h,doc_scan:P,keterangan:S};if(x!==null){const t=[...l];t[x]=a,p(t)}else p([...l,a]);z()},G=a=>{n.fire({title:"Apakah Anda yakin?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){const f=l.filter((q,K)=>K!==a);p(f),n.fire("Dihapus!","Data telah dihapus.","success")}})},I=[{name:"Organisasi",selector:a=>a.organization_title,sortable:!0},{name:"Nama",selector:a=>a.nama,sortable:!0},{name:"Posisi",selector:a=>a.posisi,sortable:!0},{name:"Keterangan",selector:a=>a.keterangan,sortable:!0},{name:"Aksi",cell:(a,t)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",onClick:()=>C(t),className:"px-2 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 flex items-center",children:[e.jsx(F,{className:"mr-1"})," Edit"]}),e.jsxs("button",{type:"button",onClick:()=>G(t),className:"px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[e.jsx(X,{className:"mr-1"})," Hapus"]})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}];return e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"bg-white w-full p-4 shadow rounded-lg mt-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center border-b",children:[e.jsxs("div",{className:"space-y-0",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-700",children:"H. Formulir Riwayat Organisasi"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Formulir ini digunakan untuk mengisi riwayat organisasi pejabat desa."})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(i.button,{type:"button",onClick:E,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:[e.jsx(D,{className:"mr-2"})," Jenis Organisasi"]}),e.jsxs(i.button,{type:"button",onClick:()=>C(),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center",children:[e.jsx(D,{className:"mr-2"})," Tambah"]})]})]}),e.jsx($,{columns:I,data:l,pagination:!0,highlightOnHover:!0,responsive:!0,noDataComponent:"Tidak ada data riwayat organisasi."})]}),e.jsx(A,{children:H&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(i.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tambah Jenis Organisasi Baru"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Judul Organisasi"}),e.jsx("input",{type:"text",value:g,onChange:a=>v(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Judul Organisasi"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deskripsi"}),e.jsx("textarea",{value:k,onChange:a=>O(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Deskripsi Organisasi",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:j,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:J,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Simpan"})]})]})})}),e.jsx(A,{children:M&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(i.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/2 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:x!==null?"Edit Riwayat Organisasi":"Tambah Riwayat Organisasi"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organisasi"}),e.jsx(Y,{options:_,value:o,onChange:r,placeholder:"Pilih Organisasi",isClearable:!0,isSearchable:!0,className:"mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("input",{type:"text",value:b,onChange:a=>c(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Nama"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Posisi"}),e.jsx("input",{type:"text",value:h,onChange:a=>d(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Posisi"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dokumen"}),e.jsx("input",{type:"file",onChange:a=>m(a.target.files[0]),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("textarea",{value:S,onChange:a=>u(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Keterangan",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:z,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:x!==null?"Simpan Perubahan":"Simpan"})]})]})})})]})}export{ne as default};
