import{r as n,e as f,j as a,L as te,S as se}from"./app-CVPon-in.js";import{S as C}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as ie}from"./AuthenticatedLayout-uxNNxEb-.js";import{j as ae,H as oe}from"./index-CQ3QYBQr.js";import ne from"./OfficialForm-DRPX1Svh.js";import re from"./OfficialAddressForm-DOZJ_ZBp.js";import ce from"./StudiesForm-DL141F-Z.js";import le from"./OfficialContactForm-C1A0cOo1.js";import de from"./OfficialIdentityForm-DOVfuZ4_.js";import fe from"./PositionsForm-BDnF336f.js";import pe from"./TrainingsForm-BYyRIml2.js";import me from"./OrganizationsForm-H1A41BBe.js";import{m as g}from"./proxy-D2F4h_SH.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./transition-CxQxzVBW.js";import"./LoadingPage-D5KRQg6W.js";import"./index-Bz8wJd-C.js";import"./react-select.esm-DGr4SDH5.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-CM85KNXL.js";import"./index.es-Cx28G3hx.js";var P;(P=document.querySelector('meta[name="csrf-token"]'))!=null&&P.getAttribute("content");function Ue({official:u,addresses:D,contacts:N,identities:T,studies:z,positions:A,trainings:L,organizations:U,opsPositions:H,opsTrainings:R,opsOrganizations:I,opsStudies:V}){console.log("official",u);const[c,q]=n.useState(u),[r,l]=n.useState(D),[p,M]=n.useState(N),[m,B]=n.useState(T),[h,v]=n.useState(z),[b,y]=n.useState(A),[_,S]=n.useState(L),[x,$]=n.useState(U),[j,G]=n.useState([]),[k,J]=n.useState([]),[O,K]=n.useState([]),[F,Q]=n.useState([]),[E,w]=n.useState(!1),[d,ge]=n.useState({});n.useEffect(()=>{f.get("/village/bps/wilayah").then(o=>G(o.data)).catch(o=>console.error("Error fetching provinces:",o))},[]);const W=o=>{const i=o.target.value,e=j.find(t=>t.kode_bps===o.target.value);l({...r,province_code:e.kode_bps,province_name:e.nama_bps,regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""}),f.get(`/village/bps/wilayah/kabupaten/${i}`).then(t=>J(t.data)).catch(t=>console.error("Error fetching regencies:",t))},X=o=>{const i=o.target.value,e=k.find(t=>t.kode_bps===o.target.value);l({...r,regency_code:e.kode_bps,regency_name:e.nama_bps,district_code:"",district_name:"",village_code:"",village_name:""}),f.get(`/village/bps/wilayah/kecamatan/${i}`).then(t=>K(t.data)).catch(t=>console.error("Error fetching districts:",t))},Y=o=>{const i=o.target.value,e=O.find(t=>t.kode_bps===o.target.value);l({...r,district_code:e.kode_bps,district_name:e.nama_bps,village_code:"",village_name:""}),f.get(`/village/bps/wilayah/desa/${i}`).then(t=>Q(t.data)).catch(t=>console.error("Error fetching villages:",t))},Z=o=>{const i=F.find(e=>e.kode_bps===o.target.value);l({...r,village_code:i.kode_bps,village_name:i.nama_bps})},ee=o=>{o.preventDefault(),w(!0);const i=new FormData;for(const e in c)i.append(`official[${e}]`,c[e]);for(const e in r)i.append(`address[${e}]`,r[e]);for(const e in p)i.append(`contact[${e}]`,p[e]);for(const e in m)i.append(`identity[${e}]`,m[e]);h.forEach((e,t)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?i.append(`studies[${t}][${s}]`,e[s]):i.append(`studies[${t}][${s}]`,e[s])}),b.forEach((e,t)=>{for(const s in e)s==="foto"&&e[s]instanceof File?i.append(`positions[${t}][${s}]`,e[s]):i.append(`positions[${t}][${s}]`,e[s])}),_.forEach((e,t)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?i.append(`trainings[${t}][${s}]`,e[s]):i.append(`trainings[${t}][${s}]`,e[s])}),x.forEach((e,t)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?i.append(`organizations[${t}][${s}]`,e[s]):i.append(`organizations[${t}][${s}]`,e[s])}),se.post(`/village/official/${c.nik}/update`,i,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{C.fire("Success","Data berhasil diperbarui.","success")},onError:e=>{C.fire("Error",Object.values(e).join(", "),"error")},onFinish:()=>{w(!1)}})};return a.jsxs(ie,{header:a.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Update Official",a.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Pembaruan Data Official"})]}),breadcrumb:[{name:"Update Official",path:`/village/official/update/${c.id}`,active:!0,icon:a.jsx(oe,{className:"w-5 h-5 mr-3"})}],children:[a.jsx(te,{title:"Update Official"}),a.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:a.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[a.jsx(ne,{official:c,setOfficial:q,errors:d}),a.jsx(re,{address:r,setAddress:l,provinces:j,regencies:k,districts:O,villages:F,handleProvinceChange:W,handleRegencyChange:X,handleDistrictChange:Y,handleVillageChange:Z,errors:d}),a.jsx(le,{contact:p,setContact:M,errors:d}),a.jsx(de,{identity:m,setIdentity:B,errors:d}),a.jsx(ce,{studies:V,setStudies:v,officialStudies:h,setOfficialStudies:v}),a.jsx(fe,{positions:H,setPositions:y,officialPositions:b,setOfficialPositions:y}),a.jsx(pe,{trainings:R,setTrainings:S,officialTrainings:_,setOfficialTrainings:S}),a.jsx(me,{organizations:I,setOrganizations:$,officialOrganizations:x,setOfficialOrganizations:$}),a.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:a.jsxs(g.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:E,children:[a.jsx(ae,{className:"mr-2"})," ",E?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{Ue as default};
