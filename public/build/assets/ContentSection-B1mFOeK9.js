import{r as i,e as j,j as e}from"./app-CVPon-in.js";import{C as N,r as te}from"./chart-BbJoQLWu.js";import{a as ie,B as J,C as le,f as re,o as O,g as ne,k as oe,h as B,b as de,c as V,D as R}from"./index-QcoFFRoy.js";import{X as $}from"./index.es-Cx28G3hx.js";import{m as l}from"./proxy-D2F4h_SH.js";import{A as ce}from"./index-Bz8wJd-C.js";import"./iconBase-DWCpscjx.js";N.register(...te);function be(){var C,P,T,I,K,L,H,M,E;const[d,G]=i.useState([]),[c,v]=i.useState([]),[g,y]=i.useState([]),[n,U]=i.useState(""),[o,w]=i.useState(""),[h,f]=i.useState(""),[k,r]=i.useState([]),[s,_]=i.useState(null),[b,D]=i.useState(!1),[W,m]=i.useState(!1),[p,X]=i.useState({}),[u,z]=i.useState({});i.useEffect(()=>{m(!0),j.get("/profile-village/kabupaten").then(a=>{const t=a.data;G(t),r(t)}).catch(a=>{console.error("Gagal mengambil data Kabupaten:",a)}).finally(()=>m(!1))},[]),i.useEffect(()=>{n?p[n]?(v(p[n]),r(p[n])):(m(!0),j.get(`/profile-village/kecamatan/${n}`).then(a=>{const t=a.data;v(t),r(t),X(x=>({...x,[n]:t}))}).catch(a=>{console.error("Gagal mengambil data Kecamatan:",a)}).finally(()=>m(!1))):r(d)},[n,d,p]),i.useEffect(()=>{o?u[o]?(y(u[o]),r(u[o])):(m(!0),j.get(`/profile-village/desa/${o}`).then(a=>{const t=a.data;y(t),r(t),z(x=>({...x,[o]:t}))}).catch(a=>{console.error("Gagal mengambil data Desa:",a)}).finally(()=>m(!1))):c.length>0?r(c):r(d)},[o,c,d,u]),i.useEffect(()=>{if(h){const a=g.find(t=>t.code_bps===h);r(a?[a]:[])}else g.length>0?r(g):c.length>0?r(c):r(d)},[h,g,c,d]);const S=a=>{_(a),D(!0)},Z=()=>{D(!1),_(null)};i.useEffect(()=>{b&&s&&q(s)},[b,s]);const q=a=>{var A,F;const t=(A=document.getElementById("educationChart"))==null?void 0:A.getContext("2d");t&&new N(t,{type:"bar",data:{labels:Object.keys((a==null?void 0:a.education_totals)||{}),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values((a==null?void 0:a.education_totals)||{}),backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}});const x=(F=document.getElementById("genderChart"))==null?void 0:F.getContext("2d");x&&new N(x,{type:"pie",data:{labels:Object.keys((a==null?void 0:a.gender_totals)||{}).map(se=>se==="L"?"Laki-laki":"Perempuan"),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values((a==null?void 0:a.gender_totals)||{}),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})},Q=[{name:"Pendidikan",selector:a=>a.category,sortable:!0},{name:"Jumlah",selector:a=>a.total,sortable:!0}],Y=[{name:"Jenis Kelamin",selector:a=>a.category,sortable:!0},{name:"Jumlah",selector:a=>a.total,sortable:!0}],ee=s?Object.entries((s==null?void 0:s.education_totals)||{}).map(([a,t])=>({category:a,total:t})):[],ae=s?Object.entries((s==null?void 0:s.gender_totals)||{}).map(([a,t])=>({category:a==="L"?"Laki-laki":"Perempuan",total:t})):[];return e.jsx("section",{className:"py-32 text-green-900 min-h-screen bg-gradient-to-b from-green-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:"w-full bg-white rounded-lg shadow-lg p-6 border",children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Profil Desa"}),e.jsx("nav",{className:"flex mb-2","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center space-x-2",children:[e.jsx("li",{className:"inline-flex items-center",children:e.jsxs("a",{href:"/",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-green-600",children:[e.jsx(ie,{className:"w-4 h-4 mr-1 text-gray-500"}),"Beranda"]})}),e.jsx("li",{"aria-current":"page",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-3 h-3 text-gray-400 mx-1"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Profil"})]})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4 text-justify",children:"Profil Desa dalam SIKADES (Sistem Informasi Kumpulan Data Aparatur Desa) berisi data lengkap mengenai struktur pemerintahan desa, informasi kependudukan, serta berbagai aspek pembangunan desa. Sistem ini dirancang untuk menyediakan akses mudah terhadap data aparatur desa, potensi wilayah, serta program dan kegiatan yang sedang berlangsung. Dengan SIKADES, pengelolaan administrasi desa menjadi lebih efisien, transparan, dan dapat diakses oleh masyarakat serta pihak terkait untuk mendukung pembangunan desa yang berkelanjutan."})]}),e.jsx(l.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!0},className:"w-full",children:e.jsx("div",{className:"flex gap-2 justify-center w-full",children:e.jsxs("div",{className:"w-full bg-gradient-to-r from-green-50 to-green-100 flex gap-2 p-4 rounded-lg border border-green-200 hover:border-green-300 transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsxs("select",{value:n,onChange:a=>{U(a.target.value),w(""),f("")},className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",children:[e.jsx("option",{value:"",children:"Pilih Kabupaten"}),d.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]}),e.jsxs("select",{value:o,onChange:a=>{w(a.target.value),f("")},className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",disabled:!n,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),c.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]}),e.jsxs("select",{value:h,onChange:a=>f(a.target.value),className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",disabled:!o,children:[e.jsx("option",{value:"",children:"Pilih Desa/Kelurahan"}),g.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]})]})})}),e.jsx(l.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.4},viewport:{once:!0},className:"w-full",children:e.jsx("div",{children:W?e.jsxs("div",{className:"flex flex-col justify-center items-center p-16 gap-4 text-gray-900",children:[e.jsx(le,{className:"animate-spin text-5xl text-green-600"}),e.jsx("p",{className:"text-xl font-semibold text-gray-700 animate-pulse",children:"Memuat Data..."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Harap tunggu sebentar, kami sedang menyiapkan data untuk Anda."})]}):e.jsx("div",{className:"space-y-6 text-left",children:k.length>0?k.map(a=>e.jsxs(l.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},whileHover:{scale:1.02},className:"flex justify-between items-center p-6 bg-white border rounded-lg shadow-lg hover:shadow-xl cursor-pointer hover:bg-gradient-to-r hover:from-green-700 hover:to-green-800 hover:text-white transition-all duration-300",onClick:()=>S(a),children:[e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex items-center space-x-4",children:[e.jsx("div",{className:"relative w-16 h-16 flex items-center justify-center bg-green-100 rounded-full hover:bg-green-200 transition-all duration-300",children:a.logo_path?e.jsx(l.img,{src:a.logo_path,alt:`Logo ${a.name_dagri}`,className:"w-16 h-16 object-cover rounded-full hover:scale-110 transition-all duration-300",whileHover:{scale:1.1}}):e.jsx(re,{className:"text-2xl text-green-600 hover:text-green-700 transition-all duration-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 hover:text-white transition-all duration-300",children:a.name_dagri}),e.jsx("p",{className:"text-sm text-gray-600 hover:text-gray-200 transition-all duration-300",children:a.code_dagri})]})]}),e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"flex justify-between items-center space-x-4 w-[30%]",children:[e.jsxs("div",{className:"grid gap-2 w-[80%]",children:[a.total_districts>0&&e.jsxs(l.div,{whileHover:{scale:1.05},transition:{duration:.2},className:"flex items-center gap-2 w-full bg-green-100 py-2 px-4 rounded-lg hover:bg-green-200 transition-all duration-300",children:[e.jsx(O,{className:"text-lg text-green-600"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[e.jsx("p",{className:"text-sm text-gray-700 hover:text-gray-900 transition-all duration-300",children:"Kecamatan"}),e.jsx("p",{className:"font-semibold text-green-700 hover:text-green-900 transition-all duration-300",children:a.total_districts})]})]}),a.total_villages>0&&e.jsxs(l.div,{whileHover:{scale:1.05},transition:{duration:.2},className:"flex items-center gap-2 w-full bg-green-100 py-2 px-4 rounded-lg hover:bg-green-200 transition-all duration-300",children:[e.jsx(ne,{className:"text-lg text-green-600"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[e.jsx("p",{className:"text-sm text-gray-700 hover:text-gray-900 transition-all duration-300",children:"Desa"}),e.jsx("p",{className:"font-semibold text-green-700 hover:text-green-900 transition-all duration-300",children:a.total_villages})]})]})]}),e.jsx(l.div,{whileHover:{scale:1.1},transition:{duration:.2},className:"flex items-center justify-center p-3 bg-green-100 rounded-full hover:bg-green-200 transition-all duration-300",onClick:t=>{t.stopPropagation(),S(a)},children:e.jsx(J,{className:"text-2xl text-green-600 hover:text-green-700 transition-all duration-300"})})]})]},a.code_bps)):e.jsx("p",{className:"text-gray-500",children:"Tidak ada data yang dipilih."})})})}),e.jsx(ce,{children:b&&s&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-start justify-center pt-20 shadow-lg",children:e.jsxs(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-full max-w-5xl max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 px-5",children:[e.jsxs("h3",{className:"text-2xl font-bold",children:["Profil ",s.name_bps]}),e.jsx("button",{onClick:Z,className:"text-gray-500 hover:text-gray-700 transition-all duration-300",children:e.jsx(oe,{size:24})})]}),e.jsxs("div",{className:"max-h-[65vh] overflow-y-auto p-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200 shadow-md",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(O,{})," Lokasi"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Nama Dagri:"})," ",s.name_dagri]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Nama BPS:"})," ",s.name_bps]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Kode BPS:"})," ",s.code_bps]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Kode Dagri:"})," ",s.code_dagri]})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200 shadow-md",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(B,{})," Informasi Umum"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Kecamatan:"})," ",s.total_districts]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Desa:"})," ",s.total_villages]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Pejabat:"})," ",s.total_officials]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Dibuat Pada:"})," ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Diperbarui Pada:"})," ",new Date(s.updated_at).toLocaleDateString()]})]})]}),(s==null?void 0:s.description_latest)&&e.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200 shadow-md mt-6",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(B,{})," Deskripsi Terbaru Desa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Skor IDM:"})," ",s.description_latest.score_idm||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Status IDM:"})," ",s.description_latest.status_idm||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Skor Prodeskel:"})," ",s.description_latest.score_prodeskel||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Skor Epdeskel:"})," ",s.description_latest.score_epdeskel||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Status Pengembangan:"})," ",s.description_latest.status||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Klasifikasi:"})," ",s.description_latest.classification||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Tahun:"})," ",s.description_latest.year||"Tidak tersedia"]})]})]}),(s==null?void 0:s.officials)&&s.officials.length>0&&e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200 shadow-md mt-6",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(de,{})," Informasi Kepala Desa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Nama Lengkap:"})," ",((C=s.officials[0])==null?void 0:C.nama_lengkap)||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Tempat, Tanggal Lahir:"})," ",`${(P=s.officials[0])==null?void 0:P.tempat_lahir}, ${new Date((T=s.officials[0])==null?void 0:T.tanggal_lahir).toLocaleDateString("id-ID")}`||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Jenis Kelamin:"})," ",((I=s.officials[0])==null?void 0:I.jenis_kelamin)==="L"?"Laki-laki":"Perempuan"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Pendidikan:"})," ",((K=s.officials[0])==null?void 0:K.pendidikan)||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Alamat:"})," ",((L=s.officials[0])==null?void 0:L.alamat)||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Mulai Jabatan:"})," ",new Date((H=s.officials[0])==null?void 0:H.position_official[0].mulai).toLocaleDateString("id-ID")||"Tidak tersedia"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Selesai Jabatan:"})," ",(M=s.officials[0])!=null&&M.position_official[0].selesai?new Date((E=s.officials[0])==null?void 0:E.position_official[0].selesai).toLocaleDateString("id-ID"):"Masih Menjabat"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs(l.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(V,{})," Pendidikan"]}),e.jsx("div",{className:"h-48",children:e.jsx("canvas",{id:"educationChart"})})]}),e.jsxs(l.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(V,{})," Jenis Kelamin"]}),e.jsx("div",{className:"h-48",children:e.jsx("canvas",{id:"genderChart"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-6",children:[e.jsxs(l.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(R,{})," Pendidikan"]}),e.jsx($,{columns:Q,data:ee,pagination:!0,highlightOnHover:!0,responsive:!0})]}),e.jsxs(l.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(R,{})," Jenis Kelamin"]}),e.jsx($,{columns:Y,data:ae,pagination:!0,highlightOnHover:!0,responsive:!0})]})]})]})]})})})]})})}export{be as default};
