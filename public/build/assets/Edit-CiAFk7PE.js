import{r as n,j as t,L as J,a as Q}from"./app-EIz8nQ5Q.js";import{S as w}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as V}from"./AuthenticatedLayout-DaJ7Bo11.js";import{H as W,a as X}from"./index-D-VSm5dn.js";import Y from"./OfficialIdentifyForm-i7vngBoP.js";import Z from"./StudiesForm-Cz2eL3aE.js";import O from"./OfficialTempatKerjaForm-CvlzlgDb.js";import ee from"./OrangTuaForm-C9_Snc6Z.js";import ae from"./HubunganForm-BLOLdVVS.js";import se from"./AnakForm-23ZKDto0.js";import te from"./PositionsForm-B_S6ziG0.js";import re from"./TrainingsForm-Dywl2Wbz.js";import oe from"./OrganizationsForm-DGBpPHyl.js";import{m as u}from"./proxy-Br4hXrCY.js";import"./index-CuuF2Vom.js";import"./iconBase-CIswt8ol.js";import"./transition-DuUQTJM_.js";import"./LoadingPage-DIqH4F6W.js";import"./index-26-9MRme.js";import"./index-DHDwUslh.js";import"./index-BXqEWn_S.js";import"./react-select.esm-Q-Xj6kKm.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-B8EcdQ8U.js";var F;(F=document.querySelector('meta[name="csrf-token"]'))!=null&&F.getAttribute("content");function Pe({official:a,studies:T,initialPositions:E,organizations:g,position:_,anak:N,trainings:D,orang_tua:P,pasangan:H,id:A}){const[p,L]=n.useState({nik:a.nik,nipd:a.nipd,nama_lengkap:a.nama_lengkap,gelar_depan:a.gelar_depan,gelar_belakang:a.gelar_belakang,tempat_lahir:a.tempat_lahir,tanggal_lahir:a.tanggal_lahir,jenis_kelamin:a.jenis_kelamin,rt:a.addresses.rt,rw:a.addresses.rw,kode_pos:a.addresses.postal,alamat:a.addresses.alamat,province_code:a.addresses.province_code,province_name:a.addresses.province_name,regency_code:a.addresses.regency_code,regency_name:a.addresses.regency_name,district_code:a.addresses.district_code,district_name:a.addresses.district_name,village_code:a.addresses.village_code,village_name:a.addresses.village_name,handphone:a.contacts.handphone,gol_darah:a.identities.gol_darah,pendidikan:a.identities.pendidikan,bpjs_kesehatan:a.identities.bpjs_kesehatan,bpjs_ketenagakerjaan:a.identities.bpjs_ketenagakerjaan,npwp:a.identities.npwp}),[m,z]=n.useState({rt:a.work_place.rt,rw:a.work_place.rw,postal:a.work_place.kode_pos,alamat:a.work_place.alamat,regency_code:"",district_code:"",village_code:""}),[h,K]=n.useState(T),[c,U]=n.useState([]),[f,I]=n.useState(D),[j,k]=n.useState(g),[b,q]=n.useState(P),[i,C]=n.useState(H||{}),[y,M]=n.useState(N),[x,$]=n.useState(!1),[d,ne]=n.useState({}),R=async(l,B,G)=>{var S,v;l.preventDefault(),$(!0);const r=new FormData;for(const e in p)e==="foto"&&p[e]instanceof File?r.append(`official[${e}]`,p[e]):r.append(`official[${e}]`,p[e]);for(const e in m)r.append(`tempat_kerja[${e}]`,m[e]);for(const e in c)r.append(`position[${e}]`,c[e]);j.forEach((e,o)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?r.append(`organizations[${o}][${s}]`,e[s]):r.append(`organizations[${o}][${s}]`,e[s])}),h.forEach((e,o)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?r.append(`studies[${o}][${s}]`,e[s]):r.append(`studies[${o}][${s}]`,e[s])}),f.forEach((e,o)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?r.append(`trainings[${o}][${s}]`,e[s]):r.append(`trainings[${o}][${s}]`,e[s])}),b.forEach((e,o)=>{for(const s in e)e[s]!==void 0&&e[s]!==null&&r.append(`orang_tua[${o}][${s}]`,e[s])});for(const e in i)r.append(`hubungan[${e}]`,i[e]);y.forEach((e,o)=>{for(const s in e)r.append(`anak[${o}][${s}]`,e[s])});try{const e=await Q.post(`/village/official/${B}/${G}/Edit`,r,{headers:{"Content-Type":"multipart/form-data"}});w.fire("Success","Data berhasil diperbarui.","success")}catch(e){w.fire("Error",((v=(S=e.response)==null?void 0:S.data)==null?void 0:v.message)||"Terjadi kesalahan","error")}finally{$(!1)}};return t.jsxs(V,{header:t.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Tambah Pejabat Desa",t.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Penambahan Data Pejabat Desa"})]}),breadcrumb:[{name:"Tambah Official",path:"/village/official/create",active:!0,icon:t.jsx(X,{className:"w-5 h-5 mr-3"})}],children:[t.jsx(J,{title:"Update Official"}),t.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:t.jsxs("form",{onSubmit:l=>R(l,_,A),className:"space-y-8",children:[t.jsx(Y,{official:p,setOfficial:L,errors:d}),t.jsx(O,{tempat_kerja:m,setTempatKerja:z,errors:d}),t.jsx(te,{position:_,positions:E,officialPosition:c,setOfficialPosition:U}),t.jsx(oe,{organizations:g,setOrganizations:k,officialOrganizations:j,setOfficialOrganizations:k}),t.jsx(Z,{officialStudies:h,setOfficialStudies:K}),t.jsx(re,{officialTrainings:f,setOfficialTrainings:I}),t.jsx(ee,{orang_tua:b,setOrangTua:q,errors:d}),t.jsx(ae,{hubungan:i,setHubungan:C,errors:d}),t.jsx(se,{anak:y,setAnak:M,errors:d}),t.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:t.jsxs(u.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:x,children:[t.jsx(W,{className:"mr-2"}),x?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{Pe as default};
