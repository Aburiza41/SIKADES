import{r as d,j as e}from"./app-cnLqKnWv.js";import{I as f,L as R,M as D,N as L}from"./index-sj701c6h.js";import{u as h,w as T}from"./xlsx-5rFX-EW9.js";import A from"./Actions-XvkPhilo.js";import{m as u}from"./proxy-0toHJmZX.js";import"./iconBase-CMF4PMHw.js";import"./index-CoBPEikz.js";function M({regencies:s,fetchData:N,loading:y,onEdit:b,onDelete:g,onView:v}){const[p,k]=d.useState(""),[a,j]=d.useState((s==null?void 0:s.current_page)||1),[n,_]=d.useState((s==null?void 0:s.per_page)||10),[m,S]=d.useState("id"),[x,C]=d.useState("asc");d.useEffect(()=>{N({page:a,perPage:n,search:p,sortField:m,sortDirection:x})},[a,n,p,m,x]);const w=t=>{j(t)},P=t=>{_(t),j(1)},o=t=>{const c=["id","code_bps","name_bps","code_dagri","name_dagri","active","code","created_at","updated_at"].includes(t)?t:"id";let i="asc";c===t&&(i=x==="asc"?"desc":"asc"),S(c),C(i)},F=()=>{const t=JSON.stringify(s.data,null,2),r=new Blob([t],{type:"application/json"}),c=URL.createObjectURL(r),i=document.createElement("a");i.href=c,i.download="regencies.json",i.click(),URL.revokeObjectURL(c)},E=()=>{const t=h.json_to_sheet(s.data),r=h.book_new();h.book_append_sheet(r,t,"regencies"),T(r,"regencies.xlsx")},l=t=>m!==t?e.jsx(R,{className:"ml-1"}):x==="asc"?e.jsx(D,{className:"ml-1"}):e.jsx(L,{className:"ml-1"});return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[e.jsx(u.input,{type:"text",placeholder:"Cari nama atau kode...",value:p,onChange:t=>k(t.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto",whileHover:{scale:1.02},whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300}}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[e.jsxs(u.button,{onClick:F,className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(f,{className:"mr-2"})," Export JSON"]}),e.jsxs(u.button,{onClick:E,className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(f,{className:"mr-2"})," Export Excel"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>o("code_bps"),children:["Code BPS ",l("code_bps")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>o("name_bps"),children:["Name BPS ",l("name_bps")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>o("code_dagri"),children:["Code DAGRI ",l("code_dagri")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>o("name_dagri"),children:["Name DAGRI ",l("name_dagri")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>o("active"),children:["Active ",l("active")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>o("code"),children:["Code ",l("code")]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading..."})}):((s==null?void 0:s.data)||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-sm text-gray-500",children:"Tidak ada data"})}):((s==null?void 0:s.data)||[]).map((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(a-1)*n+r+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.code_bps||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.name_bps||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.code_dagri||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.name_dagri||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.active?"Ya":"Tidak"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(A,{row:t,onEdit:()=>b(t),onDelete:()=>g(t.id),onView:()=>v(t)})})]},t.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"mr-2",children:"Rows per page:"}),e.jsxs("select",{value:n,onChange:t=>P(parseInt(t.target.value)),className:"border p-1 rounded",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>w(a-1),disabled:a===1,className:"px-3 py-1 border rounded mr-2 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",a," of ",(s==null?void 0:s.last_page)||1]}),e.jsx("button",{onClick:()=>w(a+1),disabled:a===((s==null?void 0:s.last_page)||1),className:"px-3 py-1 border rounded ml-2 disabled:opacity-50",children:"Next"})]})]})]})}export{M as default};
