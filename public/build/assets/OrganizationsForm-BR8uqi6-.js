import{r as i,j as e,a as le}from"./app-EIz8nQ5Q.js";import{h as F,b as U,c as K,i as _,d as re,e as $,j as V,f as X,g as Y,k as q,l as oe}from"./index-D-VSm5dn.js";import{b as Q}from"./index-CuuF2Vom.js";import{S as ce}from"./react-select.esm-Q-Xj6kKm.js";import{S as o}from"./sweetalert2.esm.all-LHqzTR4y.js";import{m as t}from"./proxy-Br4hXrCY.js";import{A as W}from"./index-26-9MRme.js";import"./iconBase-CIswt8ol.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-B8EcdQ8U.js";function ve({organizations:b=[],setOrganizations:y=()=>{},officialOrganizations:l=[],setOfficialOrganizations:c=()=>{}}){const[H,d]=i.useState(!1),[x,u]=i.useState(!1),[m,r]=i.useState(""),[G,I]=i.useState(""),[j,N]=i.useState(null),[z,v]=i.useState(""),[A,w]=i.useState(""),[k,C]=i.useState(""),[p,g]=i.useState(""),[R,T]=i.useState(""),[J,S]=i.useState(""),[f,h]=i.useState(null),[O,B]=i.useState(null),ee={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},n={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0,transition:{duration:.3}},focus:{scale:1.02,boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.5)"}},E={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}}},ae=b.map(a=>({value:a.id,label:a.title})),M=()=>{d(!1),r(""),I("")},P=(a=null)=>{if(a!==null){const s=l[a];N({value:s.organization_id,label:s.organization_title}),v(s.nama),w(s.posisi),C(s.mulai),g(s.selesai),T(s.pimpinan),S(s.tempat),h(s.doc_scan||null),B(a)}else N(null),v(""),w(""),C(""),g(""),T(""),S(""),h(null),B(null);u(!0)},L=()=>{u(!1),N(null),v(""),w(""),C(""),g(""),T(""),S(""),h(null),B(null)},te=async()=>{if(!m.trim()){o.fire({icon:"error",title:"Oops...",text:"Judul organisasi tidak boleh kosong!"});return}try{const a=await le.post("/village/official/organization/store",{title:m,description:G});if(a.data.success){const s={id:a.data.data.id,title:a.data.data.title,description:a.data.data.description};y(D=>[...D,s]),M()}else o.fire({icon:"error",title:"Gagal",text:"Gagal menambahkan organisasi baru: "+a.data.message})}catch(a){console.error("Gagal menambahkan organisasi baru:",a),o.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat menambahkan organisasi baru. Silakan coba lagi."}),M()}},se=()=>{if(!j||!z||!A){o.fire({icon:"error",title:"Oops...",text:"Harap isi semua field yang diperlukan!"});return}const a={organization_id:j.value,organization_title:j.label,nama:z,posisi:A,mulai:k,selesai:p,pimpinan:R,tempat:J,doc_scan:f};if(O!==null){const s=[...l];s[O]=a,c(s),o.fire({title:"Berhasil!",text:"Data organisasi berhasil diperbarui.",icon:"success",iconColor:"#10b981",confirmButtonColor:"#3b82f6",background:"#ffffff"})}else c([...l,a]),o.fire({title:"Berhasil!",text:"Data organisasi berhasil ditambahkan.",icon:"success",iconColor:"#10b981",confirmButtonColor:"#3b82f6",background:"#ffffff"});L()},ie=a=>{o.fire({title:"Apakah Anda yakin?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#ef4444",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal",background:"#ffffff",iconColor:"#f59e0b"}).then(s=>{if(s.isConfirmed){const D=l.filter((de,ne)=>ne!==a);c(D),o.fire({title:"Dihapus!",text:"Data telah dihapus.",icon:"success",iconColor:"#10b981",confirmButtonColor:"#3b82f6",background:"#ffffff"})}})};return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white w-full p-6 shadow-lg rounded-xl mt-8 border border-gray-100",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(t.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5},children:e.jsx(F,{className:"text-3xl text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"D. KEANGGOTAAN ORGANISASI"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center",children:[e.jsx(U,{className:"mr-1 text-blue-500"}),"Formulir ini digunakan untuk mengisi riwayat organisasi pejabat desa."]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(t.button,{type:"button",onClick:()=>P(),whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 flex items-center text-sm font-medium shadow-md",children:[e.jsx(K,{className:"mr-2 text-lg"})," Tambah Riwayat"]})})]}),e.jsx(t.div,{variants:ee,initial:"hidden",animate:"visible",className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organisasi"}),e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posisi"}),e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dokumen"}),e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lama Jabatan"}),e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pimpinan"}),e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tempat"}),e.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length>0?l.map((a,s)=>e.jsxs(t.tr,{className:"hover:bg-gray-50",variants:E,children:[e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-800",children:a.organization_title}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-800",children:a.nama}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-800",children:a.posisi}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-800",children:a.doc_scan?e.jsxs("a",{href:URL.createObjectURL(a.doc_scan),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(_,{className:"mr-1"}),"Lihat"]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-800",children:Z(a.mulai,a.selesai)}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-800",children:a.pimpinan||"-"}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-800",children:a.tempat||"-"}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(t.button,{type:"button",onClick:()=>P(s),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 flex items-center text-xs shadow-sm",children:[e.jsx(re,{className:"mr-1"})," ","Edit"]}),e.jsxs(t.button,{type:"button",onClick:()=>ie(s),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 flex items-center text-xs shadow-sm",children:[e.jsx($,{className:"mr-1"})," ","Hapus"]})]})})]},s)):e.jsx(t.tr,{variants:E,children:e.jsx("td",{colSpan:"7",className:"px-2 py-2 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[e.jsx(U,{className:"text-4xl mb-2 text-blue-200"}),e.jsx("p",{className:"text-sm font-medium",children:"Tidak ada data riwayat organisasi."}),e.jsxs(t.button,{type:"button",onClick:()=>P(),whileHover:{scale:1.03},whileTap:{scale:.98},className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 flex items-center text-sm font-medium shadow-md",children:[e.jsx(K,{className:"mr-2"})," ","Tambah Riwayat"]})]})})})})]})})]}),e.jsx(W,{children:H&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx(t.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",damping:25},className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[e.jsx(V,{className:"mr-2 text-blue-500"}),"Tambah Jenis Organisasi Baru"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Judul Organisasi"}),e.jsx(t.input,{type:"text",value:m,onChange:a=>r(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Judul Organisasi",whileFocus:"focus",variants:n})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi"}),e.jsx(t.textarea,{value:G,onChange:a=>I(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Deskripsi Organisasi",rows:"3",whileFocus:"focus",variants:n})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxs(t.button,{type:"button",onClick:M,whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center",children:[e.jsx(X,{className:"mr-2"})," Batal"]}),e.jsxs(t.button,{type:"button",onClick:te,whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-colors flex items-center shadow-md",children:[e.jsx(Y,{className:"mr-2"})," Simpan"]})]})]})})})}),e.jsx(W,{children:x&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx(t.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",damping:25},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[e.jsx(F,{className:"mr-2 text-blue-500"}),O!==null?"Edit Riwayat Organisasi":"Tambah Riwayat Organisasi"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(V,{className:"mr-2 text-blue-500"})," ","Jenis Organisasi"]}),e.jsx(t.div,{whileFocus:"focus",variants:n,children:e.jsx(ce,{options:ae,value:j,onChange:N,placeholder:"Pilih Organisasi",isClearable:!0,isSearchable:!0,className:"basic-single",classNamePrefix:"select",styles:{control:a=>({...a,minHeight:"42px",borderColor:"#d1d5db","&:hover":{borderColor:"#d1d5db"},borderRadius:"0.5rem",boxShadow:"none","&:focus-within":{boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.5)",borderColor:"transparent"}})}})})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(F,{className:"mr-2 text-blue-500"})," ","Nama Organisasi"]}),e.jsx(t.input,{type:"text",value:z,onChange:a=>v(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Nama",whileFocus:"focus",variants:n})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(Q,{className:"mr-2 text-blue-500"})," ","Kedudukan/Jabatan"]}),e.jsx(t.input,{type:"text",value:A,onChange:a=>w(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Posisi",whileFocus:"focus",variants:n})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.4},className:"col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(q,{className:"mr-2 text-blue-500"}),"Tanggal Mulai"]}),e.jsx(t.input,{type:"date",value:k,onChange:a=>{C(a.target.value),p||g(a.target.value)},max:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",whileFocus:"focus",variants:n})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.5},className:"col-span-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(q,{className:"mr-2 text-blue-500"}),"Tanggal Selesai"]}),e.jsx(t.input,{type:"date",value:p,onChange:a=>g(a.target.value),min:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",whileFocus:"focus",variants:n})]}),e.jsx(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.6},className:"col-span-2",children:e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("span",{className:"font-medium",children:"Durasi: "}),Z(k,p)]})}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.7},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(Q,{className:"mr-2 text-blue-500"})," ","Nama Pimpinan"]}),e.jsx(t.input,{type:"text",value:R,onChange:a=>T(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Pimpinan",whileFocus:"focus",variants:n})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.8},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(oe,{className:"mr-2 text-blue-500"})," ","Tempat"]}),e.jsx(t.input,{type:"text",value:J,onChange:a=>S(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Tempat",whileFocus:"focus",variants:n})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.9},className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(_,{className:"mr-2 text-blue-500"}),"Dokumen"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t.input,{type:"file",onChange:a=>{if(a.target.files&&a.target.files.length>0){const s=a.target.files[0];if(!["application/pdf","image/jpeg","image/png"].includes(s.type)){alert("Hanya file PDF, JPEG, atau PNG yang diizinkan");return}if(s.size>5*1024*1024){alert("Ukuran file maksimal 5MB");return}h(s)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:".pdf,.jpg,.jpeg,.png",whileFocus:"focus",variants:n}),f&&e.jsx("button",{onClick:()=>h(null),className:"p-2 text-red-500 hover:text-red-700",title:"Hapus dokumen",children:e.jsx($,{})})]}),f&&e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-600",children:[e.jsx(_,{className:"mr-2"}),e.jsx("span",{children:f.name}),e.jsxs("span",{className:"ml-2 text-gray-400",children:["(",(f.size/1024).toFixed(1)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxs(t.button,{type:"button",onClick:L,whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center",children:[e.jsx(X,{className:"mr-2"})," Batal"]}),e.jsxs(t.button,{type:"button",onClick:se,whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-colors flex items-center shadow-md",children:[e.jsx(Y,{className:"mr-2"})," ",O!==null?"Simpan Perubahan":"Simpan"]})]})]})})})})]})}const Z=(b,y)=>{if(!b||!y)return"-";const l=new Date(b),c=new Date(y);if(isNaN(l.getTime()))return"Tanggal mulai tidak valid";if(isNaN(c.getTime()))return"Tanggal selesai tidak valid";const H=c-l,d=Math.floor(H/(1e3*60*60*24));if(d<0)return"Tanggal tidak valid";const x=Math.floor(d/365),u=Math.floor(d%365/30),m=d%30;let r=[];return x>0&&r.push(`${x} tahun`),u>0&&r.push(`${u} bulan`),m>0&&x<1&&r.push(`${m} hari`),r.length>0?r.join(" "):"Kurang dari 1 hari"};export{Z as calculateDuration,ve as default};
