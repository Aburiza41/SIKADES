import{K,r,j as e,L as V,$ as B,S as x}from"./app-CVPon-in.js";import{S as l}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as F}from"./AuthenticatedLayout-uxNNxEb-.js";import P from"./List-D5BVGFhb.js";import{H as R}from"./index-CQ3QYBQr.js";import y from"./Modal-DRh93-8t.js";import H from"./PDF-D2WKVzvb.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./transition-CxQxzVBW.js";import"./LoadingPage-D5KRQg6W.js";import"./proxy-D2F4h_SH.js";import"./index-Bz8wJd-C.js";import"./index.es-Cx28G3hx.js";import"./xlsx-5rFX-EW9.js";import"./Actions-Cbjsa_cM.js";import"./index-Bid0kMqz.js";import"./jspdf.plugin.autotable-Ct2Crhd4.js";import"./typeof-QjJsDpFa.js";var N;const w=((N=document.querySelector('meta[name="csrf-token"]'))==null?void 0:N.getAttribute("content"))||"";function ce({initialOfficials:S,officials:U}){const{flash:s}=K().props,[E,C]=r.useState(S),[O,m]=r.useState(!1),[k,p]=r.useState(!1),[o,f]=r.useState(!1),[b,j]=r.useState(!1),[n,v]=r.useState(null),[a,d]=r.useState({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""});r.useEffect(()=>{s!=null&&s.success&&l.fire("Success",s.success,"success"),s!=null&&s.error&&l.fire("Error",s.error,"error")},[s]);const g=({page:t=1,perPage:i=10,search:h="",filters:u="",sortField:_="",sortDirection:T=""})=>{m(!0),x.get("/village/official",{page:t,per_page:i,search:h,filters:u,sort_field:_,sort_direction:T},{preserveState:!0,replace:!0,onSuccess:$=>{C($.props.officials),m(!1)},onError:()=>{l.fire("Error","Failed to fetch data. Please try again.","error"),m(!1)}})},D=t=>{window.location.href=`/village/official/${t.nik}/edit`},A=t=>{v(t),f(!1),j(!0),p(!0)},I=t=>{l.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&x.delete(`/village/official/${t}/delete`,{headers:{"X-CSRF-TOKEN":w},onSuccess:()=>{l.fire("Deleted!","Data has been successfully deleted.","success"),g({})},onError:()=>{l.fire("Error","An error occurred while deleting the data.","error")}})})},L=t=>{const i={nama_lengkap:t.nama_lengkap,nik:t.nik,niad:t.niad,tempat_lahir:t.tempat_lahir,tanggal_lahir:t.tanggal_lahir,jenis_kelamin:t.jenis_kelamin,status_perkawinan:t.status_perkawinan,agama:t.agama,alamat:t.alamat,handphone:t.handphone,gol_darah:t.gol_darah,pendidikan:t.pendidikan,bpjs_kesehatan:t.bpjs_kesehatan,bpjs_ketenagakerjaan:t.bpjs_ketenagakerjaan,npwp:t.npwp,status:t.status};H(i)},M=t=>{t.preventDefault();const i=o?`/village/official/${n.id}`:"/village/official",h=o?"put":"post",u={village_id:a.village_id,nik:a.nik,niad:a.niad,nama_lengkap:a.nama_lengkap,gelar_depan:a.gelar_depan,gelar_belakang:a.gelar_belakang,tempat_lahir:a.tempat_lahir,tanggal_lahir:a.tanggal_lahir,jenis_kelamin:a.jenis_kelamin,status_perkawinan:a.status_perkawinan,agama:a.agama,alamat:a.alamat,rt:a.rt,rw:a.rw,regency_code:a.regency_code,regency_name:a.regency_name,district_code:a.district_code,district_name:a.district_name,village_code:a.village_code,village_name:a.village_name,handphone:a.handphone,gol_darah:a.gol_darah,pendidikan:a.pendidikan,bpjs_kesehatan:a.bpjs_kesehatan,bpjs_ketenagakerjaan:a.bpjs_ketenagakerjaan,npwp:a.npwp,status:a.status};x[h](i,u,{headers:{"X-CSRF-TOKEN":w},onSuccess:()=>{l.fire("Success",`Official ${o?"updated":"added"} successfully.`,"success"),p(!1),g({})},onError:_=>{l.fire("Error",Object.values(_).join(", "),"error")}})},c=()=>{p(!1),f(!1),j(!1),v(null),d({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""})};return e.jsxs(F,{header:e.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Official",e.jsx("p",{className:"text-sm font-thin mt-1",children:"Daftar Official"})]}),breadcrumb:[{name:"Official",path:"/village/official",active:!0,icon:e.jsx(R,{className:"w-5 h-5 mr-3"})}],children:[e.jsx(V,{title:"Official"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-4 py-2",children:e.jsx(B,{href:route("village.official.create"),className:"flex items-center p-2 rounded transition-colors duration-700 font-bold bg-green-700 text-white border-l-4 border-green-900 hover:bg-white hover:text-green-900 hover:border-none",children:"Tambah"})}),e.jsx(P,{officials:E,fetchData:g,loading:O,onEdit:D,onDelete:I,onView:A,onPrint:L})]}),e.jsx(y,{isOpen:k&&!b,onClose:c,title:o?"Edit Official":"Add Official",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:a.nama_lengkap,onChange:t=>d({...a,nama_lengkap:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),e.jsx("input",{type:"text",value:a.nik,onChange:t=>d({...a,nik:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),e.jsx("input",{type:"text",value:a.niad,onChange:t=>d({...a,niad:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:c,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:o?"Update":"Save"})]})]})})}),e.jsx(y,{isOpen:k&&b,onClose:c,title:"View Official",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),e.jsx("p",{className:"mt-1 text-gray-900",children:n==null?void 0:n.nama_lengkap})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),e.jsx("p",{className:"mt-1 text-gray-900",children:n==null?void 0:n.nik})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),e.jsx("p",{className:"mt-1 text-gray-900",children:n==null?void 0:n.niad})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})})]})}export{ce as default};
