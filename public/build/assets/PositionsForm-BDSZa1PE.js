import{r as s,j as e,a as Q}from"./app-EIz8nQ5Q.js";import{c as O,d as U,e as V}from"./index-D-VSm5dn.js";import{S as W}from"./react-select.esm-Q-Xj6kKm.js";import{S as r}from"./sweetalert2.esm.all-LHqzTR4y.js";import{m as i}from"./proxy-Br4hXrCY.js";import{A as B}from"./index-26-9MRme.js";import"./iconBase-CIswt8ol.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-B8EcdQ8U.js";function de({positions:H=[],setPositions:F=()=>{},officialPositions:l=[],setOfficialPositions:y=()=>{}}){const[E,C]=s.useState(!1),[G,P]=s.useState(!1),[j,J]=s.useState(""),[A,D]=s.useState(""),[o,d]=s.useState(null),[N,c]=s.useState(""),[w,m]=s.useState(""),[f,x]=s.useState(""),[I,p]=s.useState(null),[k,u]=s.useState(""),[T,h]=s.useState(""),[M,g]=s.useState(""),[b,v]=s.useState(null);console.log(l);const R=H.map(a=>({value:a.id,label:a.name})),Y=()=>{C(!0)},S=()=>{C(!1),J(""),D("")},_=(a=null)=>{if(a!==null){const t=l[a].position;d({value:t.id,label:t.name}),c(t.penetap),m(t.nomor_sk),x(t.tanggal_sk),p(t.file_sk||null),u(t.mulai),h(t.selesai||""),g(t.keterangan||""),v(a)}else d(null),c(""),m(""),x(""),p(null),u(""),h(""),g(""),v(null);P(!0)},K=()=>{P(!1),d(null),c(""),m(""),x(""),p(null),u(""),h(""),g(""),v(null)},$=async()=>{if(!j.trim()){r.fire({icon:"error",title:"Oops...",text:"Nama posisi tidak boleh kosong!"});return}try{const a=await Q.post("/village/official/position/store",{name:j,description:A});if(a.data.success){const t={id:a.data.data.id,name:a.data.data.name,description:a.data.data.description};F(n=>[...n,t]),S()}else r.fire({icon:"error",title:"Gagal",text:"Gagal menambahkan posisi baru: "+a.data.message})}catch(a){console.error("Gagal menambahkan posisi baru:",a),r.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat menambahkan posisi baru. Silakan coba lagi."}),S()}},q=()=>{if(!o||!N||!w||!f||!k){r.fire({icon:"error",title:"Oops...",text:"Harap isi semua field yang diperlukan!"});return}const a={position_id:o.value,position_name:o.label,penetap:N,nomor_sk:w,tanggal_sk:f,file_sk:I,mulai:k,selesai:T,keterangan:M};if(b!==null){const t=[...l];t[b]=a,y(t)}else y([...l,a]);K()},z=a=>{r.fire({title:"Apakah Anda yakin?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){const n=l.filter((X,L)=>L!==a);y(n),r.fire("Dihapus!","Data telah dihapus.","success")}})};return e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"bg-white w-full p-4 shadow rounded-lg mt-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center border-b",children:[e.jsxs("div",{className:"space-y-0",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-700",children:"F. Formulir Riwayat Jabatan"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Formulir ini digunakan untuk mengisi riwayat jabatan pejabat desa."})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(i.button,{type:"button",onClick:Y,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:[e.jsx(O,{className:"mr-2"}),"Jenis Posisi"]}),e.jsxs(i.button,{type:"button",onClick:()=>_(),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center",children:[e.jsx(O,{className:"mr-2"})," Tambah"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posisi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Penetap"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nomor SK"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal SK"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mulai Jabatan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selesai Jabatan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Keterangan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length>0?l.map((a,t)=>{var n;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.position_name||((n=a.position)==null?void 0:n.name)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.penetap}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.nomor_sk}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.tanggal_sk}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.mulai}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.selesai||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.keterangan||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",onClick:()=>_(t),className:"px-2 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 flex items-center",children:[e.jsx(U,{className:"mr-1"})," Edit"]}),e.jsxs("button",{type:"button",onClick:()=>z(t),className:"px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[e.jsx(V,{className:"mr-1"})," Hapus"]})]})})]},t)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-sm text-gray-500",children:"Tidak ada data riwayat jabatan."})})})]})})]}),e.jsx(B,{children:E&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(i.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tambah Jenis Posisi Baru"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Posisi"}),e.jsx("input",{type:"text",value:j,onChange:a=>J(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Nama Jenis Posisi"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deskripsi"}),e.jsx("textarea",{value:A,onChange:a=>D(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Deskripsi Jenis Posisi",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:S,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Simpan"})]})]})})}),e.jsx(B,{children:G&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(i.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/2 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:b!==null?"Edit Riwayat Jabatan":"Tambah Riwayat Jabatan"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Posisi"}),e.jsx(W,{options:R,value:o,onChange:d,placeholder:"Pilih Posisi",isClearable:!0,isSearchable:!0,className:"mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Penetap"}),e.jsx("input",{type:"text",value:N,onChange:a=>c(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Penetap"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nomor SK"}),e.jsx("input",{type:"text",value:w,onChange:a=>m(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Nomor SK"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal SK"}),e.jsx("input",{type:"date",value:f,onChange:a=>x(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"File SK"}),e.jsx("input",{type:"file",onChange:a=>p(a.target.files[0]),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mulai Jabatan"}),e.jsx("input",{type:"date",value:k,onChange:a=>u(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Selesai Jabatan"}),e.jsx("input",{type:"date",value:T,onChange:a=>h(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("textarea",{value:M,onChange:a=>g(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Keterangan",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:K,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:b!==null?"Simpan Perubahan":"Simpan"})]})]})})})]})}export{de as default};
