import{r as l,a as N,j as e}from"./app-EIz8nQ5Q.js";import{C as v,r as G}from"./chart-BbJoQLWu.js";import{a as T,M as I,N as $,f as z,C as M,g as J,H as U,h as b,u as W,s as Q,P as Z,Q as q,R as X,G as Y,S as ee,c as L,K as ae}from"./index-CuuF2Vom.js";import"./index.es-BsUn4GSa.js";import{m as r}from"./proxy-Br4hXrCY.js";import{A as se}from"./index-26-9MRme.js";import"./iconBase-CIswt8ol.js";v.register(...G);function ce(){const[o,K]=l.useState([]),[c,y]=l.useState([]),[g,w]=l.useState([]),[n,E]=l.useState(""),[d,_]=l.useState(""),[h,f]=l.useState(""),[k,i]=l.useState([]),[s,D]=l.useState(null),[j,S]=l.useState(!1),[A,m]=l.useState(!1),[u,O]=l.useState({}),[p,V]=l.useState({});l.useEffect(()=>{m(!0),N.get("/profile-village/kabupaten").then(a=>{const t=a.data;K(t),i(t)}).catch(a=>{console.error("Gagal mengambil data Kabupaten:",a)}).finally(()=>m(!1))},[]),l.useEffect(()=>{n?u[n]?(y(u[n]),i(u[n])):(m(!0),N.get(`/profile-village/kecamatan/${n}`).then(a=>{const t=a.data;y(t),i(t),O(x=>({...x,[n]:t}))}).catch(a=>{console.error("Gagal mengambil data Kecamatan:",a)}).finally(()=>m(!1))):i(o)},[n,o,u]),l.useEffect(()=>{d?p[d]?(w(p[d]),i(p[d])):(m(!0),N.get(`/profile-village/desa/${d}`).then(a=>{const t=a.data;w(t),i(t),V(x=>({...x,[d]:t}))}).catch(a=>{console.error("Gagal mengambil data Desa:",a)}).finally(()=>m(!1))):c.length>0?i(c):i(o)},[d,c,o,p]),l.useEffect(()=>{if(h){const a=g.find(t=>t.code_bps===h);i(a?[a]:[])}else g.length>0?i(g):c.length>0?i(c):i(o)},[h,g,c,o]);const C=a=>{D(a),S(!0)},B=()=>{S(!1),D(null)};l.useEffect(()=>{j&&s&&H(s)},[j,s]);const H=a=>{var P,F;const t=(P=document.getElementById("educationChart"))==null?void 0:P.getContext("2d");t&&new v(t,{type:"bar",data:{labels:Object.keys((a==null?void 0:a.education_totals)||{}),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values((a==null?void 0:a.education_totals)||{}),backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}});const x=(F=document.getElementById("genderChart"))==null?void 0:F.getContext("2d");x&&new v(x,{type:"pie",data:{labels:Object.keys((a==null?void 0:a.gender_totals)||{}).map(R=>R==="L"?"Laki-laki":"Perempuan"),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values((a==null?void 0:a.gender_totals)||{}),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})};return s&&Object.entries((s==null?void 0:s.education_totals)||{}).map(([a,t])=>({category:a,total:t})),s&&Object.entries((s==null?void 0:s.gender_totals)||{}).map(([a,t])=>({category:a==="L"?"Laki-laki":"Perempuan",total:t})),e.jsx("section",{className:"py-32 text-green-900 min-h-screen bg-gradient-to-b from-green-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:"w-full bg-white rounded-lg shadow-lg p-6 border",children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Profil Desa"}),e.jsx("nav",{className:"flex mb-2","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center space-x-2",children:[e.jsx("li",{className:"inline-flex items-center",children:e.jsxs("a",{href:"/",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-green-600",children:[e.jsx(T,{className:"w-4 h-4 mr-1 text-gray-500"}),"Beranda"]})}),e.jsx("li",{"aria-current":"page",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"w-3 h-3 text-gray-400 mx-1"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Profil"})]})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4 text-justify",children:"Profil Desa dalam SIKADES (Sistem Informasi Kumpulan Data Aparatur Desa) berisi data lengkap mengenai struktur pemerintahan desa, informasi kependudukan, serta berbagai aspek pembangunan desa. Sistem ini dirancang untuk menyediakan akses mudah terhadap data aparatur desa, potensi wilayah, serta program dan kegiatan yang sedang berlangsung. Dengan SIKADES, pengelolaan administrasi desa menjadi lebih efisien, transparan, dan dapat diakses oleh masyarakat serta pihak terkait untuk mendukung pembangunan desa yang berkelanjutan."})]}),e.jsx(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!0},className:"w-full",children:e.jsx("div",{className:"flex gap-2 justify-center w-full",children:e.jsxs("div",{className:"w-full bg-gradient-to-r from-green-50 to-green-100 flex gap-2 p-4 rounded-lg border border-green-200 hover:border-green-300 transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsxs("select",{value:n,onChange:a=>{E(a.target.value),_(""),f("")},className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",children:[e.jsx("option",{value:"",children:"Pilih Kabupaten"}),o.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]}),e.jsxs("select",{value:d,onChange:a=>{_(a.target.value),f("")},className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",disabled:!n,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),c.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]}),e.jsxs("select",{value:h,onChange:a=>f(a.target.value),className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",disabled:!d,children:[e.jsx("option",{value:"",children:"Pilih Desa/Kelurahan"}),g.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]})]})})}),e.jsx(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.4},viewport:{once:!0},className:"w-full",children:e.jsx("div",{children:A?e.jsxs("div",{className:"flex flex-col justify-center items-center p-16 gap-4 text-gray-900",children:[e.jsx($,{className:"animate-spin text-5xl text-green-600"}),e.jsx("p",{className:"text-xl font-semibold text-gray-700 animate-pulse",children:"Memuat Data..."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Harap tunggu sebentar, kami sedang menyiapkan data untuk Anda."})]}):e.jsx("div",{className:"space-y-6 text-left",children:k.length>0?k.map(a=>e.jsxs(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},whileHover:{scale:1.02},className:"flex justify-between items-center p-6 bg-white border rounded-lg shadow-lg hover:shadow-xl cursor-pointer hover:bg-gradient-to-r hover:from-green-700 hover:to-green-800 hover:text-white transition-all duration-300",onClick:()=>C(a),children:[e.jsxs(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex items-center space-x-4",children:[e.jsx("div",{className:"relative w-16 h-16 flex items-center justify-center bg-green-100 rounded-full hover:bg-green-200 transition-all duration-300",children:a.logo_path?e.jsx(r.img,{src:a.logo_path,alt:`Logo ${a.name_dagri}`,className:"w-16 h-16 object-cover rounded-full hover:scale-110 transition-all duration-300",whileHover:{scale:1.1}}):e.jsx(z,{className:"text-2xl text-green-600 hover:text-green-700 transition-all duration-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 hover:text-white transition-all duration-300",children:a.name_dagri}),e.jsx("p",{className:"text-sm text-gray-600 hover:text-gray-200 transition-all duration-300",children:a.code_dagri})]})]}),e.jsxs(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"flex justify-between items-center space-x-4 w-[30%]",children:[e.jsxs("div",{className:"grid gap-2 w-[80%]",children:[a.total_districts>0&&e.jsxs(r.div,{whileHover:{scale:1.05},transition:{duration:.2},className:"flex items-center gap-2 w-full bg-green-100 py-2 px-4 rounded-lg hover:bg-green-200 transition-all duration-300",children:[e.jsx(M,{className:"text-lg text-green-600"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[e.jsx("p",{className:"text-sm text-gray-700 hover:text-gray-900 transition-all duration-300",children:"Kecamatan"}),e.jsx("p",{className:"font-semibold text-green-700 hover:text-green-900 transition-all duration-300",children:a.total_districts})]})]}),a.total_villages>0&&e.jsxs(r.div,{whileHover:{scale:1.05},transition:{duration:.2},className:"flex items-center gap-2 w-full bg-green-100 py-2 px-4 rounded-lg hover:bg-green-200 transition-all duration-300",children:[e.jsx(J,{className:"text-lg text-green-600"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[e.jsx("p",{className:"text-sm text-gray-700 hover:text-gray-900 transition-all duration-300",children:"Desa"}),e.jsx("p",{className:"font-semibold text-green-700 hover:text-green-900 transition-all duration-300",children:a.total_villages})]})]})]}),e.jsx(r.div,{whileHover:{scale:1.1},transition:{duration:.2},className:"flex items-center justify-center p-3 bg-green-100 rounded-full hover:bg-green-200 transition-all duration-300",onClick:t=>{t.stopPropagation(),C(a)},children:e.jsx(I,{className:"text-2xl text-green-600 hover:text-green-700 transition-all duration-300"})})]})]},a.code_bps)):e.jsx("p",{className:"text-gray-500",children:"Tidak ada data yang dipilih."})})})}),e.jsx(se,{children:j&&s&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-start justify-center pt-20 shadow-lg",children:e.jsxs(r.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-full max-w-5xl max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 px-5",children:[e.jsxs("h3",{className:"text-2xl font-bold",children:["Profil ",s.name_bps]}),e.jsx("button",{onClick:B,className:"text-gray-500 hover:text-gray-700 transition-all duration-300",children:e.jsx(U,{size:24})})]}),e.jsxs("div",{className:"max-h-[65vh] overflow-y-auto p-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200 shadow-md",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(M,{})," Lokasi"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Nama Dagri:"})," ",s.name_dagri]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Nama BPS:"})," ",s.name_bps]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Kode BPS:"})," ",s.code_bps]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Kode Dagri:"})," ",s.code_dagri]})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200 shadow-md",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(b,{})," Informasi Umum"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Perangkat:"})," ",s.total_officials||0]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Dibuat Pada:"})," ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Diperbarui Pada:"})," ",new Date(s.updated_at).toLocaleDateString()]})]})]}),s.education_totals&&e.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200 shadow-md mt-6",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(W,{})," Pendidikan Perangkat Desa"]}),Object.values(s.education_totals).some(a=>a>0)?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(s.education_totals).map(([a,t])=>t>0&&e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:a}),e.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-semibold",children:[t," orang"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${t/s.total_officials*100}%`}})})]},a))}):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(b,{className:"inline-block mr-2"}),"Data pendidikan perangkat tidak tersedia"]})]}),s.gender_totals&&e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200 shadow-md mt-6",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Q,{})," Gender Perangkat Desa"]}),Object.values(s.gender_totals).some(a=>a>0)?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Z,{className:"text-blue-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Laki-laki"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:s.gender_totals.L||0}),e.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(s.gender_totals.L/s.total_officials*100),"%"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(q,{className:"text-pink-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Perempuan"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-2xl font-bold text-pink-600",children:s.gender_totals.P||0}),e.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(s.gender_totals.P/s.total_officials*100),"%"]})]})]})]}):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(b,{className:"inline-block mr-2"}),"Data gender perangkat tidak tersedia"]})]}),s.village_idm_latest?e.jsxs("div",{className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-2",children:[e.jsx(X,{}),e.jsx("span",{className:"font-medium",children:"Skor IDM"})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("span",{className:"text-3xl font-bold",children:s.village_idm_latest.score_idm}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.village_idm_latest.score_idm>=80?"bg-green-100 text-green-800":s.village_idm_latest.score_idm>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.village_idm_latest.status_idm})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-2",children:[e.jsx(Y,{}),e.jsx("span",{className:"font-medium",children:"Tahun"})]}),e.jsx("span",{className:"text-3xl font-bold",children:s.village_idm_latest.year})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[e.jsx(ee,{}),e.jsx("span",{className:"font-medium",children:"Klasifikasi"})]}),e.jsx("span",{className:"text-xl font-semibold capitalize",children:s.village_idm_latest.classification})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(L,{className:"text-blue-500"}),"Skor Prodeskel"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-blue-600 h-4 rounded-full",style:{width:`${s.village_idm_latest.score_prodeskel}%`}})}),e.jsxs("span",{className:"font-bold text-blue-600 whitespace-nowrap",children:[s.village_idm_latest.score_prodeskel,"%"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(L,{className:"text-green-500"}),"Skor Epdeskel"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-green-600 h-4 rounded-full",style:{width:`${s.village_idm_latest.score_epdeskel}%`}})}),e.jsxs("span",{className:"font-bold text-green-600 whitespace-nowrap",children:[s.village_idm_latest.score_epdeskel,"%"]})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(b,{className:"text-yellow-600"}),"Status Pengembangan"]}),e.jsx("p",{className:"text-gray-700",children:s.village_idm_latest.status||"Tidak ada informasi status"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block p-4 bg-gray-100 rounded-full mb-3",children:e.jsx(ae,{className:"text-gray-400 text-2xl"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-600 mb-1",children:"Data IDM Tidak Tersedia"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Desa ini belum memiliki data Indeks Desa Membangun"})]})]})]})})})]})})}export{ce as default};
