import{r as a,j as e}from"./app-cnLqKnWv.js";import f from"./Modal-9x-8vsWt.js";import"./index-CSb7vC3W.js";import"./proxy-0toHJmZX.js";function y({isOpen:m,onClose:c,onFilter:x,csrfToken:n}){const[i,t]=a.useState({year:"2024",district:"",subdistrict:"",village:"",gender:"",period:"",education:"",bloodType:"",religion:"",position:""}),[p,j]=a.useState([]),[b,u]=a.useState([]),[v,h]=a.useState([]);a.useEffect(()=>{fetch("/admin/village/regencies",{headers:{"X-CSRF-TOKEN":n,Accept:"application/json"},credentials:"include"}).then(l=>l.json()).then(l=>{l.success&&j(l.data)}).catch(l=>{console.error("Error fetching regencies:",l)})},[n]),a.useEffect(()=>{i.district?fetch(`/admin/village/districts/${i.district}`,{headers:{"X-CSRF-TOKEN":n,Accept:"application/json"},credentials:"include"}).then(l=>l.json()).then(l=>{l.success&&u(l.data)}).catch(l=>{console.error("Error fetching districts:",l)}):(u([]),t(l=>({...l,subdistrict:"",village:""})))},[i.district,n]),a.useEffect(()=>{i.subdistrict?fetch(`/api/villages/${i.subdistrict}`,{headers:{Accept:"application/json"}}).then(l=>l.json()).then(l=>{l.success&&h(l.data)}).catch(l=>{console.error("Error fetching villages:",l)}):(h([]),t(l=>({...l,village:""})))},[i.subdistrict]);const s=l=>{const{name:d,value:r}=l.target;t(d==="district"?o=>({...o,district:r,subdistrict:"",village:""}):d==="subdistrict"?o=>({...o,subdistrict:r,village:""}):{...i,[d]:r})},g=()=>{x(i),c()};return e.jsx(f,{isOpen:m,onClose:c,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filter Data Pejabat Desa"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tahun"}),e.jsx("input",{type:"text",name:"year",value:i.year,className:"w-full p-2 border rounded",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Periode ke"}),e.jsx("input",{type:"text",name:"period",value:i.period,onChange:s,className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Pilih Kabupaten"}),e.jsxs("select",{name:"district",value:i.district,onChange:s,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Pilih Kabupaten"}),p.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Pilih Kecamatan"}),e.jsxs("select",{name:"subdistrict",value:i.subdistrict,onChange:s,className:"w-full p-2 border rounded",disabled:!i.district,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),b.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Pilih Desa"}),e.jsxs("select",{name:"village",value:i.village,onChange:s,className:"w-full p-2 border rounded",disabled:!i.subdistrict,children:[e.jsx("option",{value:"",children:"Pilih Desa"}),v.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Jenis Kelamin"}),e.jsxs("select",{name:"gender",value:i.gender,onChange:s,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Pilih Jenis Kelamin"}),e.jsx("option",{value:"Laki-laki",children:"Laki-laki"}),e.jsx("option",{value:"Perempuan",children:"Perempuan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Riwayat Pendidikan"}),e.jsx("select",{name:"education",value:i.education,onChange:s,className:"w-full p-2 border rounded",children:e.jsx("option",{value:"",children:"Pilih Riwayat Pendidikan"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Golongan Darah"}),e.jsxs("select",{name:"bloodType",value:i.bloodType,onChange:s,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Pilih Golongan Darah"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"AB",children:"AB"}),e.jsx("option",{value:"O",children:"O"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Agama"}),e.jsx("select",{name:"religion",value:i.religion,onChange:s,className:"w-full p-2 border rounded",children:e.jsx("option",{value:"",children:"Pilih Agama"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Jabatan"}),e.jsx("select",{name:"position",value:i.position,onChange:s,className:"w-full p-2 border rounded",children:e.jsx("option",{value:"",children:"Pilih Jabatan"})})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-lg mr-2",onClick:c,children:"Batal"}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg",onClick:g,children:"Terapkan"})]})]})})}export{y as default};
