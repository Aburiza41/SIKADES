import{r as l,a as C,j as e}from"./app-EIz8nQ5Q.js";import{C as o}from"./chart-BbJoQLWu.js";import{H as w,C as k,h as _,c as d,O as c}from"./index-CuuF2Vom.js";import{X as m}from"./index.es-BsUn4GSa.js";import{m as x}from"./proxy-Br4hXrCY.js";import"./iconBase-CIswt8ol.js";o.register(...registerables);const S=({isModalOpen:i,closeModal:g,item:r})=>{const[a,h]=l.useState(null),[p,n]=l.useState(!1);l.useEffect(()=>{i&&r&&(n(!0),C.get(`/profile-village/${r.type}/${r.code}`).then(s=>{h(s.data)}).catch(s=>{console.error("Gagal mengambil data detail:",s)}).finally(()=>n(!1)))},[i,r]),l.useEffect(()=>{a&&b(a)},[a]);const b=s=>{const t=document.getElementById("educationChart").getContext("2d");new o(t,{type:"bar",data:{labels:Object.keys(s.education_totals),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values(s.education_totals),backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}});const v=document.getElementById("genderChart").getContext("2d");new o(v,{type:"pie",data:{labels:Object.keys(s.gender_totals).map(y=>y==="L"?"Laki-laki":"Perempuan"),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values(s.gender_totals),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})},u=[{name:"Pendidikan",selector:s=>s.category,sortable:!0},{name:"Jumlah",selector:s=>s.total,sortable:!0}],j=[{name:"Jenis Kelamin",selector:s=>s.category,sortable:!0},{name:"Jumlah",selector:s=>s.total,sortable:!0}],f=a?Object.entries(a.education_totals).map(([s,t])=>({category:s,total:t})):[],N=a?Object.entries(a.gender_totals).map(([s,t])=>({category:s==="L"?"Laki-laki":"Perempuan",total:t})):[];return e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-start justify-center pt-20 shadow-lg",children:e.jsxs(x.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-full max-w-5xl max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 px-5",children:[e.jsxs("h3",{className:"text-2xl font-bold",children:["Profil ",(a==null?void 0:a.name_bps)||"Loading..."]}),e.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 transition-all duration-300",children:e.jsx(w,{size:24})})]}),p?e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx(FaSpinner,{className:"animate-spin text-2xl text-green-600"})}):e.jsx("div",{className:"max-h-[65vh] overflow-y-auto p-5",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200 shadow-md",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(k,{})," Lokasi"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Nama Dagri:"})," ",a.name_dagri]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Nama BPS:"})," ",a.name_bps]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Kode BPS:"})," ",a.code_bps]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Kode Dagri:"})," ",a.code_dagri]})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200 shadow-md",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(_,{})," Informasi Umum"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Kecamatan:"})," ",a.total_districts]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Desa:"})," ",a.total_villages]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Pejabat:"})," ",a.total_officials]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Dibuat Pada:"})," ",new Date(a.created_at).toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Diperbarui Pada:"})," ",new Date(a.updated_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(d,{})," Pendidikan"]}),e.jsx("div",{className:"h-48",children:e.jsx("canvas",{id:"educationChart"})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(d,{})," Jenis Kelamin"]}),e.jsx("div",{className:"h-48",children:e.jsx("canvas",{id:"genderChart"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(c,{})," Pendidikan"]}),e.jsx(m,{columns:u,data:f,pagination:!0,highlightOnHover:!0,responsive:!0})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(c,{})," Jenis Kelamin"]}),e.jsx(m,{columns:j,data:N,pagination:!0,highlightOnHover:!0,responsive:!0})]})]})]})})]})})};export{S as default};
