import{K as F,r as n,j as e,L as I,S as y}from"./app-CVPon-in.js";import{S as r}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as R}from"./AuthenticatedLayout-uxNNxEb-.js";import $ from"./List-BeeK2eUp.js";import{H}from"./index-CQ3QYBQr.js";import _ from"./Modal-BJW0-R5B.js";import U from"./PDF-Y62zQWZw.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./transition-CxQxzVBW.js";import"./LoadingPage-D5KRQg6W.js";import"./proxy-D2F4h_SH.js";import"./index-Bz8wJd-C.js";import"./index.es-Cx28G3hx.js";import"./xlsx-5rFX-EW9.js";import"./Actions-BSxh_zKZ.js";import"./index-Bid0kMqz.js";import"./jspdf.plugin.autotable-Ct2Crhd4.js";import"./typeof-QjJsDpFa.js";var w;const S=((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"))||"";function me({initialOrganizations:C,organizations:E}){var k;const{flash:i}=F().props,[z,O]=n.useState(C),[D,p]=n.useState(!1),[N,c]=n.useState(!1),[m,u]=n.useState(!1),[v,f]=n.useState(!1),[t,g]=n.useState(null),[s,l]=n.useState({official_id:"",organization_id:"",doc_scan:"",nama:"",posisi:"",keterangan:""});n.useEffect(()=>{i!=null&&i.success&&r.fire("Success",i.success,"success"),i!=null&&i.error&&r.fire("Error",i.error,"error")},[i]);const h=({page:a=1,perPage:o=10,search:d="",filters:b="",sortField:j="",sortDirection:V=""})=>{p(!0),y.get("/admin/organization",{page:a,per_page:o,search:d,filters:b,sort_field:j,sort_direction:V},{preserveState:!0,replace:!0,onSuccess:B=>{O(B.props.official_organizations),p(!1)},onError:()=>{r.fire("Error","Failed to fetch data. Please try again.","error"),p(!1)}})},A=()=>{u(!1),f(!1),c(!0),l({official_id:"",organization_id:"",doc_scan:"",nama:"",posisi:"",keterangan:""})},M=a=>{g(a),u(!0),f(!1),c(!0),l({official_id:a.official_id,organization_id:a.organization_id,doc_scan:a.doc_scan,nama:a.nama,posisi:a.posisi,keterangan:a.keterangan})},P=a=>{g(a),u(!1),f(!0),c(!0)},K=a=>{r.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&y.delete(`/admin/organization/${a}`,{headers:{"X-CSRF-TOKEN":S},onSuccess:()=>{r.fire("Deleted!","Data has been successfully deleted.","success"),h({})},onError:()=>{r.fire("Error","An error occurred while deleting the data.","error")}})})},L=a=>{var d;const o={nama:a.nama,organization:((d=a.organization)==null?void 0:d.title)||"-",posisi:a.posisi,keterangan:a.keterangan};U(o)},T=a=>{a.preventDefault();const o=m?`/admin/organization/${t.id}`:"/admin/organization",d=m?"put":"post",b={official_id:s.official_id,organization_id:s.organization_id,doc_scan:s.doc_scan,nama:s.nama,posisi:s.posisi,keterangan:s.keterangan};y[d](o,b,{headers:{"X-CSRF-TOKEN":S},onSuccess:()=>{r.fire("Success",`Organization ${m?"updated":"added"} successfully.`,"success"),c(!1),h({})},onError:j=>{r.fire("Error",Object.values(j).join(", "),"error")}})},x=()=>{c(!1),u(!1),f(!1),g(null),l({official_id:"",organization_id:"",doc_scan:"",nama:"",posisi:"",keterangan:""})};return e.jsxs(R,{header:e.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Organization",e.jsx("p",{className:"text-sm font-thin mt-1",children:"Daftar Organisasi"})]}),breadcrumb:[{name:"Organization",path:"/admin/organization",active:!0,icon:e.jsx(H,{className:"w-5 h-5 mr-3"})}],children:[e.jsx(I,{title:"Organization"}),e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:A,className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Organization"}),e.jsx($,{official_organizations:z,organizations:E,fetchData:h,loading:D,onEdit:M,onDelete:K,onView:P,onPrint:L})]}),e.jsx(_,{isOpen:N&&!v,onClose:x,title:m?"Edit Organization":"Add Organization",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("input",{type:"text",value:s.nama,onChange:a=>l({...s,nama:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Posisi"}),e.jsx("input",{type:"text",value:s.posisi,onChange:a=>l({...s,posisi:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("textarea",{value:s.keterangan,onChange:a=>l({...s,keterangan:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:x,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:m?"Update":"Save"})]})]})})}),e.jsx(_,{isOpen:N&&v,onClose:x,title:"View Organization",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.nama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Organization"}),e.jsx("p",{className:"mt-1 text-gray-900",children:((k=t==null?void 0:t.organization)==null?void 0:k.title)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Posisi"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.posisi})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.keterangan})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})})]})}export{me as default};
