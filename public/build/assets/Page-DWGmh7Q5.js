import{K as I,r as l,j as a,L as O,S as m}from"./app-EIz8nQ5Q.js";import{S as t}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as L}from"./AuthenticatedLayout-DaJ7Bo11.js";import M from"./List-Dfq0Y_Cl.js";import{a as R}from"./index-D-VSm5dn.js";import F from"./Modal-ot6EY46M.js";import K from"./PDF--aiv3nbJ.js";import"./index-CuuF2Vom.js";import"./iconBase-CIswt8ol.js";import"./transition-DuUQTJM_.js";import"./LoadingPage-DIqH4F6W.js";import"./proxy-Br4hXrCY.js";import"./index-26-9MRme.js";import"./Actions-BHXNyQiN.js";import"./index-BTPrMAX7.js";import"./Procces-DAdfw5z-.js";import"./jspdf.plugin.autotable-C7mnqvEA.js";import"./typeof-QjJsDpFa.js";var w;const q=((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"))||"";function me({initialOfficials:y,officials:H,role:p,position:u}){const{flash:s}=I().props,[c,g]=l.useState(y),[v,k]=l.useState(!1),[S,h]=l.useState(!1),[U,_]=l.useState(!1),[N,f]=l.useState(!1),[i,x]=l.useState(null),[X,C]=l.useState({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""});l.useEffect(()=>{s!=null&&s.success&&t.fire("Success",s.success,"success"),s!=null&&s.error&&t.fire("Error",s.error,"error")},[s]);const j=({page:e=1,perPage:n=10,search:r="",filters:o="",sortField:d="",sortDirection:P=""})=>{k(!0),m.get(`/regency/official/${p}`,{page:e,per_page:n,search:r,filters:o,sort_field:d,sort_direction:P},{preserveState:!0,replace:!0,onSuccess:V=>{g(V.props.officials),k(!1)},onError:()=>{t.fire("Error","Failed to fetch data. Please try again.","error"),k(!1)}})},E=(e,n)=>{window.location.href=`/village/official/${n}/${e.nik}/edit`},B=e=>{x(e),_(!1),f(!0),h(!0)},T=(e,n)=>{t.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&m.delete(`/village/official/${n}/${e.nik}/delete`,{headers:{"X-CSRF-TOKEN":q},onSuccess:()=>{t.fire("Deleted!","Data has been successfully deleted.","success"),j({})},onError:()=>{t.fire("Error","An error occurred while deleting the data.","error")}})})},$=e=>{const n={nama_lengkap:e.nama_lengkap,nik:e.nik,niad:e.niad,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,jenis_kelamin:e.jenis_kelamin,status_perkawinan:e.status_perkawinan,agama:e.agama,alamat:e.alamat,handphone:e.handphone,gol_darah:e.gol_darah,pendidikan:e.pendidikan,bpjs_kesehatan:e.bpjs_kesehatan,bpjs_ketenagakerjaan:e.bpjs_ketenagakerjaan,npwp:e.npwp,status:e.status};K(n)},b=()=>{h(!1),_(!1),f(!1),x(null),C({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""})},D=e=>{t.fire({title:"Apakah anda yakin?",text:`Pilih terima untuk menyetujui verifikasi ${e.nama_lengkap}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Terima",cancelButtonText:"Batal"}).then(n=>{n.isConfirmed&&(setIsProcessing(!0),m.put(`/regency/official/${e.nik}/accept`,{},{onSuccess:r=>{t.fire("Terima!",`Verifikasi ${r.nama_lengkap} diterima`,"success");const o=c.data.map(d=>d.nik===r.nik?{...d,status:"validasi"}:d);g({...c,data:o}),setIsProcessing(!1)},onError:r=>{t.fire("Error",`Verifikasi Terima ${r.nama_lengkap} dalam kendala`,"error"),setIsProcessing(!1)}}))})},A=e=>{t.fire({title:"Apakah anda yakin?",text:`Pilih terima untuk menolak verifikasi ${e.nama_lengkap}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Terima",cancelButtonText:"Batal"}).then(n=>{n.isConfirmed&&m.put(`/regency/official/${e.nik}/reject`,{},{onSuccess:()=>{t.fire("Tolak!",`Verifikasi ${e.nama_lengkap} ditolak`,"success");const r=c.data.map(o=>o.nik===e.nik?{...o,status:"tolak"}:o);g({...c,data:r})},onError:()=>{t.fire("Error",`Verifikasi Tolak ${e.nama_lengkap} dalam kendala`,"error")}})})};return a.jsxs(L,{header:a.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Daftar ",u.name,a.jsxs("p",{className:"text-sm font-thin mt-1",children:["Daftar pejabat desa dengan jabatan ",u.name]})]}),breadcrumb:[{name:"Pejabat",path:`/admin/official/${p}`,active:!0,icon:a.jsx(R,{className:"w-5 h-5 mr-3"})}],children:[a.jsx(O,{title:"Official"}),a.jsx("div",{className:"p-4",children:a.jsx(M,{officials:c,fetchData:j,loading:v,onEdit:E,onDelete:T,onView:B,onPrint:$,position:u,onAccept:D,onReject:A,role:p})}),a.jsx(F,{isOpen:S&&N,onClose:b,title:"View Official",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),a.jsx("p",{className:"mt-1 text-gray-900",children:i==null?void 0:i.nama_lengkap})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),a.jsx("p",{className:"mt-1 text-gray-900",children:i==null?void 0:i.nik})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),a.jsx("p",{className:"mt-1 text-gray-900",children:i==null?void 0:i.niad})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})})]})}export{me as default};
