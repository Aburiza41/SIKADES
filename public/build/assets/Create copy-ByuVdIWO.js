import{r as o,j as t,L as I,a as U}from"./app-cnLqKnWv.js";import{S as F}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as q}from"./AuthenticatedLayout-DtE7q2g1.js";import{l as M,m as R}from"./index-CyDsHmf4.js";import B from"./OfficialIdentifyForm-BJ9dCHbk.js";import G from"./StudiesForm-Cx_dz5WU.js";import J from"./OfficialTempatKerjaForm-CS1EnpOv.js";import Q from"./OrangTuaForm-CSrBZQ3v.js";import V from"./HubunganForm-CjiLbhrS.js";import W from"./AnakForm-ChAMw0W0.js";import X from"./PositionsForm-BkfhjPQI.js";import Y from"./TrainingsForm-Dv3dJMEo.js";import Z from"./OrganizationsForm-C7R7fV2x.js";import{m as d}from"./proxy-0toHJmZX.js";import"./index-sj701c6h.js";import"./iconBase-CMF4PMHw.js";import"./transition-LX_87-cn.js";import"./LoadingPage-CsjTuYab.js";import"./index-CSb7vC3W.js";import"./index-DC9iVcT_.js";import"./index-DidX0__a.js";import"./react-select.esm-kjDh-dq3.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-c6l4leOc.js";import"./floating-ui.dom-CHZBHl4C.js";var v;(v=document.querySelector('meta[name="csrf-token"]'))!=null&&v.getAttribute("content");function va({initialPositions:E,initialOrganizations:N,initialTrainings:w,position:u,jabatan:c}){const[r,A]=o.useState([]),[f,H]=o.useState([]),[h,L]=o.useState([]),[m,z]=o.useState([]),[j,x]=o.useState([]),[g,y]=o.useState([]),[b,D]=o.useState([]),[p,K]=o.useState([]),[S,P]=o.useState([]),[$,O]=o.useState(!1),[n,aa]=o.useState({}),_=async(l,C)=>{var T,k;l.preventDefault(),O(!0);const i=new FormData;for(const a in r)a==="foto"&&r[a]instanceof File?i.append(`official[${a}]`,r[a]):i.append(`official[${a}]`,r[a]);for(const a in f)i.append(`tempat_kerja[${a}]`,f[a]);for(const a in m)i.append(`position[${a}]`,m[a]);g.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`organizations[${s}][${e}]`,a[e]):i.append(`organizations[${s}][${e}]`,a[e])}),h.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`studies[${s}][${e}]`,a[e]):i.append(`studies[${s}][${e}]`,a[e])}),j.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`trainings[${s}][${e}]`,a[e]):i.append(`trainings[${s}][${e}]`,a[e])}),b.forEach((a,s)=>{for(const e in a)a[e]!==void 0&&a[e]!==null&&i.append(`orang_tua[${s}][${e}]`,a[e])});for(const a in p)i.append(`hubungan[${a}]`,p[a]);S.forEach((a,s)=>{for(const e in a)i.append(`anak[${s}][${e}]`,a[e])});try{const a=await U.post(`/village/official/${C}/store`,i,{headers:{"Content-Type":"multipart/form-data"}});F.fire("Success","Data berhasil diperbarui.","success")}catch(a){F.fire("Error",((k=(T=a.response)==null?void 0:T.data)==null?void 0:k.message)||"Terjadi kesalahan","error")}finally{O(!1)}};return t.jsxs(q,{header:t.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Tambah ",c.name,t.jsxs("p",{className:"text-sm font-thin mt-1",children:["Tambah pejabat desa dengan jabatan ",c.name]})]}),breadcrumb:[{name:"Tambah Official",path:"/village/official/create",active:!0,icon:t.jsx(R,{className:"w-5 h-5 mr-3"})}],children:[t.jsx(I,{title:"Update Official"}),t.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:t.jsxs("form",{onSubmit:l=>_(l,u),className:"space-y-8",children:[t.jsx(B,{official:r,setOfficial:A,errors:n}),t.jsx(J,{tempat_kerja:f,setTempatKerja:H,errors:n}),t.jsx(X,{jabatan:c,position:u,positions:E,officialPosition:m,setOfficialPosition:z}),t.jsx(Z,{organizations:N,setOrganizations:y,officialOrganizations:g,setOfficialOrganizations:y}),t.jsx(G,{officialStudies:h,setOfficialStudies:L}),t.jsx(Y,{trainings:w,setTrainings:x,officialTrainings:j,setOfficialTrainings:x}),t.jsx(Q,{orang_tua:b,setOrangTua:D,errors:n}),t.jsx(V,{hubungan:p,setHubungan:K,errors:n}),t.jsx(W,{anak:S,setAnak:P,errors:n}),t.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:t.jsxs(d.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:$,children:[t.jsx(M,{className:"mr-2"}),$?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{va as default};
