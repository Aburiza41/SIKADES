import{r as s,a as H,j as e}from"./app-EIz8nQ5Q.js";import{C as v,r as T}from"./chart-BbJoQLWu.js";import{a as G,M as P,N as W,f as X,C as z,g as U,H as Z,c as A,O as E}from"./index-CuuF2Vom.js";import{X as M}from"./index.es-BsUn4GSa.js";import{m as r}from"./proxy-Br4hXrCY.js";import{A as q}from"./index-26-9MRme.js";import"./iconBase-CIswt8ol.js";v.register(...T);function ne({regencies:o}){var D;const[m,y]=s.useState([]),[x,w]=s.useState([]),[d,O]=s.useState(""),[c,N]=s.useState(""),[g,j]=s.useState(""),[k,l]=s.useState([]),[n,_]=s.useState(null),[f,C]=s.useState(!1),[I,u]=s.useState(!1),[h,K]=s.useState({}),[p,L]=s.useState({});s.useEffect(()=>{l(o)},[o]),s.useEffect(()=>{d?h[d]?(y(h[d]),l(h[d])):(u(!0),H.get(`/member-list/kecamatan/${d}`).then(a=>{const t=a.data;y(t),l(t),K(i=>({...i,[d]:t}))}).catch(a=>{console.error("Gagal mengambil data Kecamatan:",a)}).finally(()=>u(!1))):l(o)},[d,o,h]),s.useEffect(()=>{c?p[c]?(w(p[c]),l(p[c])):(u(!0),H.get(`/member-list/desa/${c}`).then(a=>{const t=a.data;w(t),l(t),L(i=>({...i,[c]:t}))}).catch(a=>{console.error("Gagal mengambil data Desa:",a)}).finally(()=>u(!1))):m.length>0?l(m):l(o)},[c,m,o,p]),s.useEffect(()=>{if(g){const a=x.find(t=>t.code_bps===g);l(a?[a]:[])}else x.length>0?l(x):m.length>0?l(m):l(o)},[g,x,m,o]);const S=a=>{_(a),C(!0)},F=()=>{C(!1),_(null)};s.useEffect(()=>{f&&n&&J(n)},[f,n]);const J=a=>{const t=document.getElementById("educationChart").getContext("2d");new v(t,{type:"bar",data:{labels:Object.keys(a.education_totals),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values(a.education_totals),backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}});const i=document.getElementById("genderChart").getContext("2d");new v(i,{type:"pie",data:{labels:Object.keys(a.gender_totals).map(b=>b==="L"?"Laki-laki":"Perempuan"),datasets:[{label:"Jumlah Perangkat Desa",data:Object.values(a.gender_totals),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})},V=[{name:"Pendidikan",selector:a=>a.category,sortable:!0},{name:"Jumlah",selector:a=>a.total,sortable:!0}],B=[{name:"Jenis Kelamin",selector:a=>a.category,sortable:!0},{name:"Jumlah",selector:a=>a.total,sortable:!0}],R=n?Object.entries(n.education_totals).map(([a,t])=>({category:a,total:t})):[],$=n?Object.entries(n.gender_totals).map(([a,t])=>({category:a==="L"?"Laki-laki":"Perempuan",total:t})):[];return e.jsx("section",{className:"py-32 text-green-900 min-h-screen bg-gradient-to-b from-green-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:"w-full bg-white rounded-lg shadow-lg p-6 border",children:[e.jsx("h2",{className:"text-4xl font-bold mb-2",children:"Anggota Desa"}),e.jsx("nav",{className:"flex mb-2","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center space-x-2",children:[e.jsx("li",{className:"inline-flex items-center",children:e.jsxs("a",{href:"/",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-green-600",children:[e.jsx(G,{className:"w-4 h-4 mr-1 text-gray-500"}),"Beranda"]})}),e.jsx("li",{"aria-current":"page",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"w-3 h-3 text-gray-400 mx-1"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Anggota"})]})})]})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4 text-justify",children:"Anggota desa atau aparatur desa dalam SIKADES terdiri dari kepala desa, perangkat desa, serta lembaga masyarakat yang berperan dalam pemerintahan dan pembangunan desa. Mereka bertanggung jawab dalam administrasi, pelayanan masyarakat, serta pengelolaan sumber daya desa. Melalui SIKADES, pencatatan dan akses informasi terkait struktur pemerintahan, kependudukan, serta program desa menjadi lebih efisien dan transparan. Sistem ini mempermudah pengelolaan administrasi, memastikan akurasi data, serta meningkatkan keterlibatan masyarakat dalam pembangunan desa secara berkelanjutan."})]}),e.jsx(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!0},className:"w-full",children:e.jsx("div",{className:"flex gap-2 justify-center w-full",children:e.jsxs("div",{className:"w-full bg-gradient-to-r from-green-50 to-green-100 flex gap-2 p-4 rounded-lg border border-green-200 hover:border-green-300 transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsxs("select",{value:d,onChange:a=>{O(a.target.value),N(""),j("")},className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",children:[e.jsx("option",{value:"",children:"Pilih Kabupaten"}),o.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]}),e.jsxs("select",{value:c,onChange:a=>{N(a.target.value),j("")},className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",disabled:!d,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),m.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]}),e.jsxs("select",{value:g,onChange:a=>j(a.target.value),className:"w-full border-0 focus:ring-2 focus:ring-green-500 focus:outline-none rounded-md px-3 py-2 transition-all duration-300 bg-white",disabled:!c,children:[e.jsx("option",{value:"",children:"Pilih Desa/Kelurahan"}),x.map(a=>e.jsx("option",{value:a.code_bps,children:a.name_bps},a.code_bps))]})]})})}),e.jsx(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.4},viewport:{once:!0},className:"w-full",children:e.jsx("div",{children:I?e.jsxs("div",{className:"flex flex-col justify-center items-center p-16 gap-4 text-gray-900",children:[e.jsx(W,{className:"animate-spin text-5xl text-green-600"}),e.jsx("p",{className:"text-xl font-semibold text-gray-700 animate-pulse",children:"Memuat Data..."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Harap tunggu sebentar, kami sedang menyiapkan data untuk Anda."})]}):e.jsx("div",{className:"space-y-6 text-left",children:k.length>0?k.map(a=>e.jsxs(r.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},whileHover:{scale:1.02},className:"flex justify-between items-center p-6 bg-white border rounded-lg shadow-lg hover:shadow-xl cursor-pointer hover:bg-gradient-to-r hover:from-green-700 hover:to-green-800 hover:text-white transition-all duration-300",onClick:()=>S(a),children:[e.jsxs(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex items-center space-x-4",children:[e.jsx("div",{className:"relative w-16 h-16 flex items-center justify-center bg-green-100 rounded-full hover:bg-green-200 transition-all duration-300",children:a.logo_path?e.jsx(r.img,{src:a.logo_path,alt:`Logo ${a.name_dagri}`,className:"w-16 h-16 object-cover rounded-full hover:scale-110 transition-all duration-300",whileHover:{scale:1.1}}):e.jsx(X,{className:"text-2xl text-green-600 hover:text-green-700 transition-all duration-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 hover:text-white transition-all duration-300",children:a.name_dagri}),e.jsx("p",{className:"text-sm text-gray-600 hover:text-gray-200 transition-all duration-300",children:a.code_dagri})]})]}),e.jsxs(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"flex justify-between items-center space-x-4 w-[30%]",children:[e.jsxs("div",{className:"grid gap-2 w-[80%]",children:[a.total_districts>0&&e.jsxs(r.div,{whileHover:{scale:1.05},transition:{duration:.2},className:"flex items-center gap-2 w-full bg-green-100 py-2 px-4 rounded-lg hover:bg-green-200 transition-all duration-300",children:[e.jsx(z,{className:"text-lg text-green-600"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[e.jsx("p",{className:"text-sm text-gray-700 hover:text-gray-900 transition-all duration-300",children:"Kecamatan"}),e.jsx("p",{className:"font-semibold text-green-700 hover:text-green-900 transition-all duration-300",children:a.total_districts})]})]}),a.total_villages>0&&e.jsxs(r.div,{whileHover:{scale:1.05},transition:{duration:.2},className:"flex items-center gap-2 w-full bg-green-100 py-2 px-4 rounded-lg hover:bg-green-200 transition-all duration-300",children:[e.jsx(U,{className:"text-lg text-green-600"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[e.jsx("p",{className:"text-sm text-gray-700 hover:text-gray-900 transition-all duration-300",children:"Desa"}),e.jsx("p",{className:"font-semibold text-green-700 hover:text-green-900 transition-all duration-300",children:a.total_villages})]})]})]}),e.jsx(r.div,{whileHover:{scale:1.1},transition:{duration:.2},className:"flex items-center justify-center p-3 bg-green-100 rounded-full hover:bg-green-200 transition-all duration-300",onClick:t=>{t.stopPropagation(),S(a)},children:e.jsx(P,{className:"text-2xl text-green-600 hover:text-green-700 transition-all duration-300"})})]})]},a.code_bps)):e.jsx("p",{className:"text-gray-500",children:"Tidak ada data yang dipilih."})})})}),e.jsx(q,{children:f&&n&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-start justify-center pt-20 shadow-lg",children:e.jsxs(r.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-full max-w-5xl max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center px-5",children:[e.jsxs("h3",{className:"text-2xl font-bold",children:["Anggota ",n.name_bps]}),e.jsx("button",{onClick:F,className:"text-gray-500 hover:text-gray-700 transition-all duration-300",children:e.jsx(Z,{size:24})})]}),e.jsxs("div",{className:"max-h-[65vh] overflow-y-auto p-5",children:[((D=n==null?void 0:n.officials)==null?void 0:D.length)>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Perangkat Desa"}),n.officials.map((a,t)=>{var b;const i=a==null?void 0:a.positions;return i?e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold",children:[a.gelar_depan&&`${a.gelar_depan} `,a.nama_lengkap,a.gelar_belakang&&`, ${a.gelar_belakang}`]}),e.jsx("p",{className:"text-gray-600",children:((b=i==null?void 0:i.position)==null?void 0:b.name)||"Jabatan tidak tersedia"})]}),e.jsx("div",{className:"mt-2 md:mt-0",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium
                                ${a.jenis_kelamin==="L"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"}`,children:a.jenis_kelamin==="L"?"Laki-laki":"Perempuan"})})]})},t):null})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs(r.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(A,{})," Pendidikan"]}),e.jsx("div",{className:"h-48",children:e.jsx("canvas",{id:"educationChart"})})]}),e.jsxs(r.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(A,{})," Jenis Kelamin"]}),e.jsx("div",{className:"h-48",children:e.jsx("canvas",{id:"genderChart"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-6",children:[e.jsxs(r.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(E,{})," Pendidikan"]}),e.jsx(M,{columns:V,data:R,pagination:!0,highlightOnHover:!0,responsive:!0})]}),e.jsxs(r.div,{whileHover:{scale:1.02},transition:{duration:.2},className:"bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-lg border border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg",children:[e.jsxs("h4",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(E,{})," Jenis Kelamin"]}),e.jsx(M,{columns:B,data:$,pagination:!0,highlightOnHover:!0,responsive:!0})]})]})]})]})})})]})})}export{ne as default};
