import{r as n,a as D,j as e}from"./app-cnLqKnWv.js";import{b as P,D as O,a as W,A as z}from"./index-sj701c6h.js";import{H as J}from"./index-CyDsHmf4.js";import{m as F}from"./proxy-0toHJmZX.js";import"./iconBase-CMF4PMHw.js";function B({orang_tua:b=[],setOrangTua:E=()=>{}}){const j=["ayah","ibu"],v={jenis:"",nama:"",tempat_lahir:"",tanggal_lahir:"",pekerjaan:"",alamat:"",rt:"",rw:"",telp:"",kode_pos:"",province_code:"",province_name:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""},N=()=>{const a={ayah:{...v,jenis:"ayah"},ibu:{...v,jenis:"ibu"}};return b&&b.length>0&&b.forEach(r=>{r.jenis&&["ayah","ibu"].includes(r.jenis)&&(a[r.jenis]={...a[r.jenis],...r})}),a},[d,p]=n.useState(N()),[_,L]=n.useState([]),[y,S]=n.useState({ayah:[],ibu:[]}),[k,K]=n.useState({ayah:[],ibu:[]}),[w,$]=n.useState({ayah:[],ibu:[]}),[A,R]=n.useState(!0);n.useEffect(()=>{D.get("/village/bps/wilayah").then(a=>L(a.data)).catch(a=>console.error("Error fetching provinces:",a)).finally(()=>R(!1))},[]),n.useEffect(()=>{p(N())},[b]);const i=(a,r,l)=>{const{value:c}=a.target,o={...d,[r]:{...d[r],[l]:c}};p(o),C(o)},x=async(a,r,l)=>{var c,o,m,s;try{const h={...d,[r]:{...d[r],[`${a}_code`]:l,[`${a}_name`]:l?a==="province"?(c=_.find(t=>t.kode_bps===l))==null?void 0:c.nama_bps:a==="regency"?(o=y[r].find(t=>t.kode_bps===l))==null?void 0:o.nama_bps:a==="district"?(m=k[r].find(t=>t.kode_bps===l))==null?void 0:m.nama_bps:(s=w[r].find(t=>t.kode_bps===l))==null?void 0:s.nama_bps:"",...a==="province"&&{regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""},...a==="regency"&&{district_code:"",district_name:"",village_code:"",village_name:""},...a==="district"&&{village_code:"",village_name:""}}};if(p(h),l){let t="",f=()=>{};a==="province"?(t=`/village/bps/wilayah/kabupaten/${l}`,f=u=>S(g=>({...g,[r]:u}))):a==="regency"?(t=`/village/bps/wilayah/kecamatan/${l}`,f=u=>K(g=>({...g,[r]:u}))):a==="district"&&(t=`/village/bps/wilayah/desa/${l}`,f=u=>$(g=>({...g,[r]:u})));const I=await D.get(t);f(I.data)}C(h)}catch(h){console.error(`Error handling ${a} change:`,h)}},C=a=>{const r=j.map(l=>({...a[l]}));E(r)},H=a=>{var c,o,m;if(A)return e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});const r=d[a],l=a==="ayah"?"Ayah":"Ibu";return e.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 mb-8 p-6 border rounded-lg bg-white shadow-sm",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[e.jsx(P,{className:"mr-2 text-blue-500"}),"Data ",l]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap *"}),e.jsx("input",{type:"text",value:r.nama,onChange:s=>i(s,a,"nama"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:`Nama ${l}`})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempat Lahir *"}),e.jsx("input",{type:"text",value:r.tempat_lahir,onChange:s=>i(s,a,"tempat_lahir"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Tempat Lahir"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Lahir *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:r.tanggal_lahir,onChange:s=>i(s,a,"tanggal_lahir"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"}),e.jsx(O,{className:"absolute right-3 top-3 text-gray-400"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pekerjaan *"}),e.jsx("input",{type:"text",value:r.pekerjaan,onChange:s=>i(s,a,"pekerjaan"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Pekerjaan"})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("h3",{className:"text-md font-medium text-gray-700 flex items-center",children:[e.jsx(W,{className:"mr-2 text-blue-500"}),"Alamat ",l]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat Lengkap *"}),e.jsx("textarea",{value:r.alamat,onChange:s=>i(s,a,"alamat"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Contoh: Jl. Merdeka No. 123",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RT *"}),e.jsx("input",{type:"text",value:r.rt,onChange:s=>i(s,a,"rt"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"001"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RW *"}),e.jsx("input",{type:"text",value:r.rw,onChange:s=>i(s,a,"rw"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"002"})]}),e.jsxs("div",{className:"form-group md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kode Pos"}),e.jsx("input",{type:"text",value:r.kode_pos,onChange:s=>i(s,a,"kode_pos"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"12345"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provinsi *"}),e.jsxs("select",{value:r.province_code,onChange:s=>x("province",a,s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",children:[e.jsx("option",{value:"",children:"Pilih Provinsi"}),_.map(s=>e.jsx("option",{value:s.kode_bps,children:s.nama_bps},s.kode_bps))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kabupaten/Kota *"}),e.jsxs("select",{value:r.regency_code,onChange:s=>x("regency",a,s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",disabled:!r.province_code,children:[e.jsx("option",{value:"",children:"Pilih Kabupaten"}),(c=y[a])==null?void 0:c.map(s=>e.jsx("option",{value:s.kode_bps,children:s.nama_bps},s.kode_bps))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kecamatan *"}),e.jsxs("select",{value:r.district_code,onChange:s=>x("district",a,s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",disabled:!r.regency_code,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),(o=k[a])==null?void 0:o.map(s=>e.jsx("option",{value:s.kode_bps,children:s.nama_bps},s.kode_bps))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desa/Kelurahan *"}),e.jsxs("select",{value:r.village_code,onChange:s=>x("village",a,s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",disabled:!r.district_code,children:[e.jsx("option",{value:"",children:"Pilih Desa"}),(m=w[a])==null?void 0:m.map(s=>e.jsx("option",{value:s.kode_bps,children:s.nama_bps},s.kode_bps))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(z,{className:"mr-2 text-blue-500"})," Nomor Telepon"]}),e.jsx("input",{type:"tel",value:r.telp,onChange:s=>i(s,a,"telp"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"081234567890"})]})]})]})};return e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white w-full p-6 shadow-lg rounded-xl mt-8 border border-gray-200",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 pb-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(P,{className:"text-2xl text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Data Orang Tua"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center",children:[e.jsx(J,{className:"mr-1 text-blue-500"}),"Lengkapi data orang tua (ayah dan ibu)"]})]})]})}),e.jsx("div",{className:"space-y-8 mt-6",children:j.map(a=>e.jsx("div",{children:H(a)},a))})]})}export{B as default};
