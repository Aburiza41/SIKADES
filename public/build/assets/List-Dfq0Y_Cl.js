import{K as q,r as c,j as e}from"./app-EIz8nQ5Q.js";import{S as k}from"./sweetalert2.esm.all-LHqzTR4y.js";import{i as G,j as Q,k as V,l as W,d as X,m as Y,n as Z,o as z}from"./index-CuuF2Vom.js";import ee from"./Actions-BHXNyQiN.js";import te from"./Procces-DAdfw5z-.js";import{m as u}from"./proxy-Br4hXrCY.js";import"./iconBase-CIswt8ol.js";import"./index-BTPrMAX7.js";function oe({officials:s,fetchData:v,loading:S,onEdit:f,onDelete:P,onView:F,onPrint:C,position:b,onAccept:D,onReject:E,role:_}){var N;q().props.auth.user;const[x,M]=c.useState(""),[p,T]=c.useState(""),[r,y]=c.useState((s==null?void 0:s.current_page)||1),[n,$]=c.useState((s==null?void 0:s.per_page)||10),[d,A]=c.useState("id"),[i,w]=c.useState("asc"),L=["SD/MI","SMP/MTS","SMA/SMK/MA","D1","D2","D3","D4","S1","S2","S3"];c.useEffect(()=>{v({page:r,perPage:n,search:x,filters:p,sortField:d,sortDirection:i})},[r,n,x,p,d,i]);const g=t=>y(t),R=t=>{$(Number(t.target.value)),y(1)},m=t=>{d===t?w(i==="asc"?"desc":"asc"):(A(t),w("asc"))},j=async t=>{try{const a={page:r,per_page:n,search:x,filters:p,sort_field:d,sort_direction:i},l=await axios.get(`/admin/official/${b.slug}/export/${t}`,{params:a,responseType:"blob"}),O={json:"json",excel:"xlsx",pdf:"pdf"},B={json:"application/json",excel:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pdf:"application/pdf"},J=window.URL.createObjectURL(new Blob([l.data],{type:B[t]})),o=document.createElement("a");o.href=J,o.setAttribute("download",`Pejabat_${b.slug}_${new Date().toLocaleDateString()}.${O[t]}`),document.body.appendChild(o),o.click(),o.remove(),k.fire("Success",`${t.toUpperCase()} exported successfully!`,"success")}catch(a){console.error(`Export ${t} error:`,a),k.fire("Error",`Failed to export ${t.toUpperCase()}. Please try again.`,"error")}},K=()=>j("json"),U=()=>j("excel"),H=()=>j("pdf"),h=t=>d!==t?e.jsx(Y,{className:"ml-1"}):i==="asc"?e.jsx(Z,{className:"ml-1"}):e.jsx(z,{className:"ml-1"}),I=({role:t})=>{let a="",l="";switch(t){case"tolak":a="bg-red-500",l="Tolak";break;case"daftar":a="bg-blue-500",l="Daftar";break;case"validasi":a="bg-green-500",l="Terima";break;case"proses":a="bg-yellow-500",l="Proses";break;default:a="bg-gray-500",l="Tidak Diketahui"}return e.jsx("span",{className:`px-2 py-1 text-xs text-white rounded-full ${a}`,children:l})};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[e.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{htmlFor:"search",className:"text-sm font-medium",children:"Pecarian"}),e.jsx(u.input,{type:"text",id:"search",name:"search",placeholder:"Pencarian ...",value:x,onChange:t=>M(t.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-green-500 w-full md:w-auto",whileHover:{scale:1.02},whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300}})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"education",className:"text-sm font-medium",children:"Pendidikan"}),e.jsxs("select",{id:"education",name:"education",value:p,onChange:t=>T(t.target.value),className:"border rounded focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Semua"}),L.map((t,a)=>e.jsx("option",{value:t,children:t},a))]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[e.jsxs(u.button,{onClick:K,className:"bg-green-700 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(G,{className:"mr-2"})," JSON"]}),e.jsxs(u.button,{onClick:H,className:"bg-green-700 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(Q,{className:"mr-2"})," PDF"]}),e.jsxs(u.button,{onClick:U,className:"bg-green-700 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(V,{className:"mr-2"})," Excel"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs border",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"70px"},children:"No"}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"250px"},onClick:()=>m("nama_lengkap"),children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:["Nama Lengkap",h("nama_lengkap")]})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},onClick:()=>m("nik"),children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:["NIK",h("nik")]})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},onClick:()=>m("nipd"),children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:["NIPD",h("nipd")]})}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"150px"},onClick:()=>m("pendidikan"),children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:["Pendidikan",h("pendidikan")]})}),e.jsx("th",{className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Desa"}),e.jsx("th",{className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kecamatan"}),e.jsx("th",{className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kabupaten"}),e.jsx("th",{className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"120px"},children:"Proses"}),e.jsx("th",{scope:"col",className:"px-2 py-2 border text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"120px"},children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-2 py-4 border text-center",children:"Memuat data..."})}):((N=s==null?void 0:s.data)==null?void 0:N.length)>0?s.data.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:(r-1)*n+a+1}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.nama_lengkap}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.nik}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.nipd}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.identities.pendidikan||"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.village.name_bps||"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.village.district.name_bps||"-"}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:t.village.district.regency.name_bps||"-"}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500 text-center",children:e.jsx(I,{role:t.status})}),e.jsx("td",{className:"border px-2 py-2 whitespace-nowrap text-sm text-gray-500 text-center",children:e.jsx(te,{row:t,onAccept:D,onReject:E})}),e.jsx("td",{className:"px-2 py-2 border whitespace-nowrap",children:e.jsx(ee,{row:t,onEdit:f,onDelete:P,onView:F,onPrint:C,role:_})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center",children:"Tidak ada data yang ditemukan"})})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-4",children:[e.jsxs("div",{className:"mb-2 md:mb-0 flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("select",{id:"rowsPerPage",value:n,onChange:R,className:"border rounded",children:[5,10,25,50,100].map(t=>e.jsx("option",{value:t,children:t},t))})}),e.jsxs("span",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:(r-1)*n+1})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(r*n,(s==null?void 0:s.total)||0)})," ","Total"," ",e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.total)||0})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>g(r-1),disabled:r===1,className:"px-3 py-1 border rounded disabled:opacity-50 bg-green-700 text-white",children:e.jsx(W,{})}),Array.from({length:Math.ceil(((s==null?void 0:s.total)||0)/n)},(t,a)=>a+1).slice(Math.max(0,r-3),Math.min(Math.ceil(((s==null?void 0:s.total)||0)/n),r+2)).map(t=>e.jsx("button",{onClick:()=>g(t),className:`px-3 py-1 border rounded ${r===t?"bg-green-700 text-white opacity-50":""}`,children:t},t)),e.jsx("button",{onClick:()=>g(r+1),disabled:r===Math.ceil(((s==null?void 0:s.total)||0)/n),className:"px-3 py-1 border rounded disabled:opacity-50 bg-green-700 text-white",children:e.jsx(X,{})})]})})]})]})}export{oe as default};
