import{r as c,a as C,j as e}from"./app-EIz8nQ5Q.js";import{b as P,a as I,A as H}from"./index-CuuF2Vom.js";import{b as O}from"./index-D-VSm5dn.js";import{m as D}from"./proxy-Br4hXrCY.js";import"./iconBase-CIswt8ol.js";function q({orang_tua:u=[],setOrangTua:$=()=>{}}){const f=["ayah","ibu"],v={jenis:"",nama:"",tempatLahir:"",tanggalLahir:"",bulanLahir:"",tahunLahir:"",pekerjaan:"",alamat:"",rt:"",rw:"",telp:"",kodePos:"",province_code:"",province_name:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""},N=()=>{const s={ayah:{...v,jenis:"ayah"},ibu:{...v,jenis:"ibu"}};return u&&u.length>0&&u.forEach(l=>{if(l.jenis==="ayah"){const{tanggalLahir:r,...o}=l,[t,n,a]=(r==null?void 0:r.split("-"))||["","",""];s.ayah={...o,tanggalLahir:t,bulanLahir:n,tahunLahir:a}}else if(l.jenis==="ibu"){const{tanggalLahir:r,...o}=l,[t,n,a]=(r==null?void 0:r.split("-"))||["","",""];s.ibu={...o,tanggalLahir:t,bulanLahir:n,tahunLahir:a}}}),s},[m,j]=c.useState(N()),[y,E]=c.useState([]),[_,F]=c.useState({ayah:[],ibu:[]}),[k,S]=c.useState({ayah:[],ibu:[]}),[L,K]=c.useState({ayah:[],ibu:[]}),[Y,A]=c.useState(!0);c.useEffect(()=>{C.get("/village/bps/wilayah").then(s=>E(s.data)).catch(s=>console.error("Error fetching provinces:",s)).finally(()=>A(!1))},[]),c.useEffect(()=>{j(N())},[u]);const d=(s,l,r)=>{const{value:o}=s.target,t={...m,[l]:{...m[l],[r]:o}};j(t),w(t)},g=async(s,l,r)=>{var o,t,n,a;try{const b={...m,[l]:{...m[l],[`${s}_code`]:r,[`${s}_name`]:r?s==="province"?(o=y.find(i=>i.kode_bps===r))==null?void 0:o.nama_bps:s==="regency"?(t=_[l].find(i=>i.kode_bps===r))==null?void 0:t.nama_bps:s==="district"?(n=k[l].find(i=>i.kode_bps===r))==null?void 0:n.nama_bps:(a=L[l].find(i=>i.kode_bps===r))==null?void 0:a.nama_bps:"",...s==="province"&&{regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""},...s==="regency"&&{district_code:"",district_name:"",village_code:"",village_name:""},...s==="district"&&{village_code:"",village_name:""}}};if(j(b),r){let i="",p=()=>{};s==="province"?(i=`/village/bps/wilayah/kabupaten/${r}`,p=x=>F(h=>({...h,[l]:x}))):s==="regency"?(i=`/village/bps/wilayah/kecamatan/${r}`,p=x=>S(h=>({...h,[l]:x}))):s==="district"&&(i=`/village/bps/wilayah/desa/${r}`,p=x=>K(h=>({...h,[l]:x})));const M=await C.get(i);p(M.data)}w(b)}catch(b){console.error(`Error handling ${s} change:`,b)}},w=s=>{const l=f.map(r=>({...s[r],tanggalLahir:`${s[r].tanggalLahir}-${s[r].bulanLahir}-${s[r].tahunLahir}`}));$(l)},R=s=>{var o,t,n;if(Y)return e.jsx("div",{children:"Memuat data..."});const l=m[s],r=s==="ayah"?"Ayah":"Ibu";return e.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 mb-8 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[e.jsx(P,{className:"mr-2 text-blue-500"}),"Data ",r]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap *"}),e.jsx("input",{type:"text",value:l.nama,onChange:a=>d(a,s,"nama"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:`Nama ${r}`})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempat Lahir *"}),e.jsx("input",{type:"text",value:l.tempatLahir,onChange:a=>d(a,s,"tempatLahir"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Tempat Lahir"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Lahir *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"31",value:l.tanggalLahir,onChange:a=>d(a,s,"tanggalLahir"),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"DD"}),e.jsx("input",{type:"number",min:"1",max:"12",value:l.bulanLahir,onChange:a=>d(a,s,"bulanLahir"),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"MM"}),e.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear(),value:l.tahunLahir,onChange:a=>d(a,s,"tahunLahir"),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"YYYY"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pekerjaan *"}),e.jsx("input",{type:"text",value:l.pekerjaan,onChange:a=>d(a,s,"pekerjaan"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Pekerjaan"})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("h3",{className:"text-md font-medium text-gray-700 flex items-center",children:[e.jsx(I,{className:"mr-2 text-blue-500"}),"Alamat ",r]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat Lengkap *"}),e.jsx("textarea",{value:l.alamat,onChange:a=>d(a,s,"alamat"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Contoh: Jl. Merdeka No. 123",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RT *"}),e.jsx("input",{type:"text",value:l.rt,onChange:a=>d(a,s,"rt"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"001"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RW *"}),e.jsx("input",{type:"text",value:l.rw,onChange:a=>d(a,s,"rw"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"002"})]}),e.jsxs("div",{className:"form-group md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kode Pos"}),e.jsx("input",{type:"text",value:l.kodePos,onChange:a=>d(a,s,"kodePos"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"12345"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provinsi *"}),e.jsxs("select",{value:l.province_code,onChange:a=>g("province",s,a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Pilih Provinsi"}),y.map(a=>e.jsx("option",{value:a.kode_bps,children:a.nama_bps},a.kode_bps))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kabupaten/Kota *"}),e.jsxs("select",{value:l.regency_code,onChange:a=>g("regency",s,a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:!l.province_code,children:[e.jsx("option",{value:"",children:"Pilih Kabupaten"}),(o=_[s])==null?void 0:o.map(a=>e.jsx("option",{value:a.kode_bps,children:a.nama_bps},a.kode_bps))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kecamatan *"}),e.jsxs("select",{value:l.district_code,onChange:a=>g("district",s,a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:!l.regency_code,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),(t=k[s])==null?void 0:t.map(a=>e.jsx("option",{value:a.kode_bps,children:a.nama_bps},a.kode_bps))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desa/Kelurahan *"}),e.jsxs("select",{value:l.village_code,onChange:a=>g("village",s,a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:!l.district_code,children:[e.jsx("option",{value:"",children:"Pilih Desa"}),(n=L[s])==null?void 0:n.map(a=>e.jsx("option",{value:a.kode_bps,children:a.nama_bps},a.kode_bps))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(H,{className:"mr-2 text-blue-500"})," Nomor Telepon"]}),e.jsx("input",{type:"tel",value:l.telp,onChange:a=>d(a,s,"telp"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"081234567890"})]})]})]})};return e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white w-full p-6 shadow-lg rounded-xl mt-8 border border-gray-200",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 pb-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(P,{className:"text-2xl text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Data Orang Tua"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center",children:[e.jsx(O,{className:"mr-1 text-blue-500"}),"Lengkapi data orang tua (ayah dan ibu)"]})]})]})}),e.jsx("div",{className:"space-y-6",children:f.map(s=>e.jsx("div",{children:R(s)},s))})]})}export{q as default};
