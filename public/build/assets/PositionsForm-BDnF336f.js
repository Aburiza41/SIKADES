import{r as s,j as e}from"./app-CVPon-in.js";import{k as K,l as Q,m as U}from"./index-CQ3QYBQr.js";import{S as V}from"./react-select.esm-DGr4SDH5.js";import{X as W}from"./index.es-Cx28G3hx.js";import{S as n}from"./sweetalert2.esm.all-LHqzTR4y.js";import{m as l}from"./proxy-D2F4h_SH.js";import{A as B}from"./index-Bz8wJd-C.js";import"./iconBase-DWCpscjx.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-CM85KNXL.js";function ce({positions:H=[],setPositions:F=()=>{},officialPositions:i=[],setOfficialPositions:g=()=>{}}){const[E,C]=s.useState(!1),[R,P]=s.useState(!1),[y,J]=s.useState(""),[D,_]=s.useState(""),[o,r]=s.useState(null),[j,m]=s.useState(""),[N,d]=s.useState(""),[f,c]=s.useState(""),[G,u]=s.useState(null),[k,p]=s.useState(""),[A,b]=s.useState(""),[T,x]=s.useState(""),[h,w]=s.useState(null),I=H.map(a=>({value:a.id,label:a.name})),X=()=>{C(!0)},v=()=>{C(!1),J(""),_("")},M=(a=null)=>{if(a!==null){const t=i[a];r({value:t.position_id,label:t.position_name}),m(t.penetap),d(t.nomor_sk),c(t.tanggal_sk),u(t.file_sk||null),p(t.mulai),b(t.selesai||""),x(t.keterangan||""),w(a)}else r(null),m(""),d(""),c(""),u(null),p(""),b(""),x(""),w(null);P(!0)},O=()=>{P(!1),r(null),m(""),d(""),c(""),u(null),p(""),b(""),x(""),w(null)},Y=async()=>{if(!y.trim()){n.fire({icon:"error",title:"Oops...",text:"Nama posisi tidak boleh kosong!"});return}try{const a=await axios.post("/village/official/position/store",{name:y,description:D});if(a.data.success){const t={id:a.data.data.id,name:a.data.data.name,description:a.data.data.description};F(S=>[...S,t]),v()}else n.fire({icon:"error",title:"Gagal",text:"Gagal menambahkan posisi baru: "+a.data.message})}catch(a){console.error("Gagal menambahkan posisi baru:",a),n.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat menambahkan posisi baru. Silakan coba lagi."}),v()}},$=()=>{if(!o||!j||!N||!f||!k){n.fire({icon:"error",title:"Oops...",text:"Harap isi semua field yang diperlukan!"});return}const a={position_id:o.value,position_name:o.label,penetap:j,nomor_sk:N,tanggal_sk:f,file_sk:G,mulai:k,selesai:A,keterangan:T};if(h!==null){const t=[...i];t[h]=a,g(t)}else g([...i,a]);O()},q=a=>{n.fire({title:"Apakah Anda yakin?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){const S=i.filter((Z,L)=>L!==a);g(S),n.fire("Dihapus!","Data telah dihapus.","success")}})},z=[{name:"Posisi",selector:a=>a.position_name,sortable:!0},{name:"Penetap",selector:a=>a.penetap,sortable:!0},{name:"Nomor SK",selector:a=>a.nomor_sk,sortable:!0},{name:"Tanggal SK",selector:a=>a.tanggal_sk,sortable:!0},{name:"Mulai Jabatan",selector:a=>a.mulai,sortable:!0},{name:"Selesai Jabatan",selector:a=>a.selesai,sortable:!0},{name:"Keterangan",selector:a=>a.keterangan,sortable:!0},{name:"Aksi",cell:(a,t)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",onClick:()=>M(t),className:"px-2 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 flex items-center",children:[e.jsx(Q,{className:"mr-1"})," Edit"]}),e.jsxs("button",{type:"button",onClick:()=>q(t),className:"px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[e.jsx(U,{className:"mr-1"})," Hapus"]})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}];return e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"bg-white w-full p-4 shadow rounded-lg mt-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center border-b",children:[e.jsxs("div",{className:"space-y-0",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-700",children:"F. Formulir Riwayat Jabatan"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Formulir ini digunakan untuk mengisi riwayat jabatan pejabat desa."})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(l.button,{type:"button",onClick:X,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:[e.jsx(K,{className:"mr-2"}),"Jenis Posisi"]}),e.jsxs(l.button,{type:"button",onClick:()=>M(),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center",children:[e.jsx(K,{className:"mr-2"})," Tambah"]})]})]}),e.jsx(W,{columns:z,data:i,pagination:!0,highlightOnHover:!0,responsive:!0,noDataComponent:"Tidak ada data riwayat jabatan."})]}),e.jsx(B,{children:E&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tambah Jenis Posisi Baru"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Posisi"}),e.jsx("input",{type:"text",value:y,onChange:a=>J(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Nama Jenis Posisi"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deskripsi"}),e.jsx("textarea",{value:D,onChange:a=>_(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Deskripsi Jenis Posisi",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:v,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:Y,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Simpan"})]})]})})}),e.jsx(B,{children:R&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/2 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:h!==null?"Edit Riwayat Jabatan":"Tambah Riwayat Jabatan"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Posisi"}),e.jsx(V,{options:I,value:o,onChange:r,placeholder:"Pilih Posisi",isClearable:!0,isSearchable:!0,className:"mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Penetap"}),e.jsx("input",{type:"text",value:j,onChange:a=>m(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Penetap"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nomor SK"}),e.jsx("input",{type:"text",value:N,onChange:a=>d(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Nomor SK"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal SK"}),e.jsx("input",{type:"date",value:f,onChange:a=>c(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"File SK"}),e.jsx("input",{type:"file",onChange:a=>u(a.target.files[0]),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mulai Jabatan"}),e.jsx("input",{type:"date",value:k,onChange:a=>p(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Selesai Jabatan"}),e.jsx("input",{type:"date",value:A,onChange:a=>b(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("textarea",{value:T,onChange:a=>x(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Keterangan",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:O,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:h!==null?"Simpan Perubahan":"Simpan"})]})]})})})]})}export{ce as default};
