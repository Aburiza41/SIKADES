import{r as o,a as d,j as s,L as J,S as K}from"./app-EIz8nQ5Q.js";import{S as w}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as Q}from"./AuthenticatedLayout-DaJ7Bo11.js";import{H as W,a as X}from"./index-D-VSm5dn.js";import Y from"./OfficialForm-CPCWIR9o.js";import Z from"./OfficialAddressForm-BOS8EDYb.js";import ee from"./StudiesForm-B8yYieFG.js";import ae from"./OfficialContactForm-qz-IIqi0.js";import te from"./OfficialIdentityForm-CzWyDz0R.js";import ie from"./PositionsForm-BDSZa1PE.js";import se from"./TrainingsForm-BXm5aMzL.js";import ne from"./OrganizationsForm-D_RMureh.js";import{m as g}from"./proxy-Br4hXrCY.js";import"./index-CuuF2Vom.js";import"./iconBase-CIswt8ol.js";import"./transition-DuUQTJM_.js";import"./LoadingPage-DIqH4F6W.js";import"./index-26-9MRme.js";import"./react-select.esm-Q-Xj6kKm.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-B8EcdQ8U.js";var C;(C=document.querySelector('meta[name="csrf-token"]'))!=null&&C.getAttribute("content");function we({positions:P,trainings:D,organizations:N,studies:T}){const[m,z]=o.useState({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"Menikah",agama:""}),[r,c]=o.useState({alamat:"",rt:"",rw:"",province_code:"",province_name:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""}),[p,A]=o.useState({handphone:"",email:""}),[f,L]=o.useState({gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:""}),[u,h]=o.useState([]),[_,v]=o.useState([]),[b,y]=o.useState([]),[k,S]=o.useState([]),[j,H]=o.useState([]),[x,R]=o.useState([]),[$,U]=o.useState([]),[O,I]=o.useState([]),[F,E]=o.useState(!1),[l,oe]=o.useState({});o.useEffect(()=>{d.get("/village/bps/wilayah").then(n=>H(n.data)).catch(n=>console.error("Error fetching provinces:",n))},[]);const V=n=>{const i=n.target.value,e=j.find(a=>a.kode_bps===n.target.value);c({...r,province_code:e.kode_bps,province_name:e.nama_bps,regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""}),d.get(`/village/bps/wilayah/kabupaten/${i}`).then(a=>R(a.data)).catch(a=>console.error("Error fetching regencies:",a))},M=n=>{const i=n.target.value,e=x.find(a=>a.kode_bps===n.target.value);c({...r,regency_code:e.kode_bps,regency_name:e.nama_bps,district_code:"",district_name:"",village_code:"",village_name:""}),d.get(`/village/bps/wilayah/kecamatan/${i}`).then(a=>U(a.data)).catch(a=>console.error("Error fetching districts:",a))},q=n=>{const i=n.target.value,e=$.find(a=>a.kode_bps===n.target.value);c({...r,district_code:e.kode_bps,district_name:e.nama_bps,village_code:"",village_name:""}),d.get(`/village/bps/wilayah/desa/${i}`).then(a=>I(a.data)).catch(a=>console.error("Error fetching villages:",a))},B=n=>{const i=O.find(e=>e.kode_bps===n.target.value);c({...r,village_code:i.kode_bps,village_name:i.nama_bps})},G=n=>{n.preventDefault(),E(!0);const i=new FormData;for(const e in m)i.append(`official[${e}]`,m[e]);for(const e in r)i.append(`address[${e}]`,r[e]);for(const e in p)i.append(`contact[${e}]`,p[e]);for(const e in f)i.append(`identity[${e}]`,f[e]);u.forEach((e,a)=>{for(const t in e)t==="doc_scan"&&e[t]instanceof File?i.append(`studies[${a}][${t}]`,e[t]):i.append(`studies[${a}][${t}]`,e[t])}),_.forEach((e,a)=>{for(const t in e)t==="foto"&&e[t]instanceof File?i.append(`positions[${a}][${t}]`,e[t]):i.append(`positions[${a}][${t}]`,e[t])}),b.forEach((e,a)=>{for(const t in e)t==="doc_scan"&&e[t]instanceof File?i.append(`trainings[${a}][${t}]`,e[t]):i.append(`trainings[${a}][${t}]`,e[t])}),k.forEach((e,a)=>{for(const t in e)t==="doc_scan"&&e[t]instanceof File?i.append(`organizations[${a}][${t}]`,e[t]):i.append(`organizations[${a}][${t}]`,e[t])}),K.post("/village/official/store",i,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{w.fire("Success","Data berhasil diperbarui.","success")},onError:e=>{w.fire("Error",Object.values(e).join(", "),"error")},onFinish:()=>{E(!1)}})};return s.jsxs(Q,{header:s.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Update Official",s.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Pembaruan Data Official"})]}),breadcrumb:[{name:"Tambah Official",path:"/village/official/create",active:!0,icon:s.jsx(X,{className:"w-5 h-5 mr-3"})}],children:[s.jsx(J,{title:"Update Official"}),s.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:s.jsxs("form",{onSubmit:G,className:"space-y-4",children:[s.jsx(Y,{official:m,setOfficial:z,errors:l}),s.jsx(Z,{address:r,setAddress:c,provinces:j,regencies:x,districts:$,villages:O,handleProvinceChange:V,handleRegencyChange:M,handleDistrictChange:q,handleVillageChange:B,errors:l}),s.jsx(ae,{contact:p,setContact:A,errors:l}),s.jsx(te,{identity:f,setIdentity:L,errors:l}),s.jsx(ee,{studies:T,setStudies:h,officialStudies:u,setOfficialStudies:h}),s.jsx(ie,{positions:P,setPositions:v,officialPositions:_,setOfficialPositions:v}),s.jsx(se,{trainings:D,setTrainings:y,officialTrainings:b,setOfficialTrainings:y}),s.jsx(ne,{organizations:N,setOrganizations:S,officialOrganizations:k,setOfficialOrganizations:S}),s.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:s.jsxs(g.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:F,children:[s.jsx(W,{className:"mr-2"})," ",F?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{we as default};
