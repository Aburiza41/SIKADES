import{K as te,r as i,j as e,L as se,S as o}from"./app-cnLqKnWv.js";import{S as n}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as re}from"./AuthenticatedLayout-DtE7q2g1.js";import ne from"./List-1c_hGExM.js";import{m as le}from"./index-CyDsHmf4.js";import Y from"./Modal-DOFTX8qc.js";import de from"./PDF-BrYMjmYf.js";import"./index-sj701c6h.js";import"./iconBase-CMF4PMHw.js";import"./transition-LX_87-cn.js";import"./LoadingPage-CsjTuYab.js";import"./proxy-0toHJmZX.js";import"./index-CSb7vC3W.js";import"./xlsx-5rFX-EW9.js";import"./Actions-C-NpQ2xA.js";import"./index-CoBPEikz.js";import"./Procces-Vi4hWbmB.js";import"./index-Cg9YPSb5.js";import"./jspdf.plugin.autotable-Cut1Q0GP.js";import"./typeof-QjJsDpFa.js";var H;const q=((H=document.querySelector('meta[name="csrf-token"]'))==null?void 0:H.getAttribute("content"))||"";function Te({initialOfficials:U,officials:me}){var C,E,A,P,T,K,D,B,L,I,R,J,M,$,F,V;const{flash:m}=te().props,[c,u]=i.useState(U),[W,j]=i.useState(!1),[v,h]=i.useState(!1),[x,y]=i.useState(!1),[S,k]=i.useState(!1),[t,b]=i.useState(null),[s,g]=i.useState({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""});i.useEffect(()=>{m!=null&&m.success&&n.fire("Success",m.success,"success"),m!=null&&m.error&&n.fire("Error",m.error,"error")},[m]);const _=({page:a=1,perPage:r=10,search:d="",filters:l="",sortField:w="",sortDirection:ee=""})=>{j(!0),o.get("/regency/official",{page:a,per_page:r,search:d,filters:l,sort_field:w,sort_direction:ee},{preserveState:!0,replace:!0,onSuccess:ae=>{u(ae.props.officials),j(!1)},onError:()=>{n.fire("Error","Failed to fetch data. Please try again.","error"),j(!1)}})},X=a=>{b(a),y(!0),k(!1),h(!0),g({village_id:a.village_id,nik:a.nik,niad:a.niad,nama_lengkap:a.nama_lengkap,gelar_depan:a.gelar_depan,gelar_belakang:a.gelar_belakang,tempat_lahir:a.tempat_lahir,tanggal_lahir:a.tanggal_lahir,jenis_kelamin:a.jenis_kelamin,status_perkawinan:a.status_perkawinan,agama:a.agama,alamat:a.alamat,rt:a.rt,rw:a.rw,regency_code:a.regency_code,regency_name:a.regency_name,district_code:a.district_code,district_name:a.district_name,village_code:a.village_code,village_name:a.village_name,handphone:a.handphone,gol_darah:a.gol_darah,pendidikan:a.pendidikan,bpjs_kesehatan:a.bpjs_kesehatan,bpjs_ketenagakerjaan:a.bpjs_ketenagakerjaan,npwp:a.npwp,status:a.status})},z=a=>{console.log(a),b(a),y(!1),k(!0),h(!0)},G=a=>{n.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&o.delete(`/regency/official/${a}`,{headers:{"X-CSRF-TOKEN":q},onSuccess:()=>{n.fire("Deleted!","Data has been successfully deleted.","success"),_({})},onError:()=>{n.fire("Error","An error occurred while deleting the data.","error")}})})},[ie,N]=i.useState(!1),f=a=>{n.fire({title:"Are you sure?",text:"This official will be accepted!",icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, accept it!"}).then(r=>{r.isConfirmed&&(N(!0),o.put(`/regency/official/${a.nik}/accept`,{},{onSuccess:()=>{n.fire("Accepted!","The official has been accepted.","success");const d=c.data.map(l=>l.nik===a.nik?{...l,status:"validasi"}:l);u({...c,data:d}),N(!1)},onError:()=>{n.fire("Error","An error occurred while accepting the official.","error"),N(!1)}}))})},Q=a=>{n.fire({title:"Are you sure?",text:"This official will be rejected!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, reject it!"}).then(r=>{r.isConfirmed&&o.put(`/regency/official/${a.nik}/reject`,{},{onSuccess:()=>{n.fire("Rejected!","The official has been rejected.","success");const d=c.data.map(l=>l.nik===a.nik?{...l,status:"tolak"}:l);u({...c,data:d})},onError:()=>{n.fire("Error","An error occurred while rejecting the official.","error")}})})},Z=a=>{const r={nama_lengkap:a.nama_lengkap,nik:a.nik,niad:a.niad,tempat_lahir:a.tempat_lahir,tanggal_lahir:a.tanggal_lahir,jenis_kelamin:a.jenis_kelamin,status_perkawinan:a.status_perkawinan,agama:a.agama,alamat:a.alamat,handphone:a.handphone,gol_darah:a.gol_darah,pendidikan:a.pendidikan,bpjs_kesehatan:a.bpjs_kesehatan,bpjs_ketenagakerjaan:a.bpjs_ketenagakerjaan,npwp:a.npwp,status:a.status};de(r)},O=a=>{a.preventDefault();const r=x?`/regency/official/${t.id}`:"/regency/official",d=x?"put":"post",l={village_id:s.village_id,nik:s.nik,niad:s.niad,nama_lengkap:s.nama_lengkap,gelar_depan:s.gelar_depan,gelar_belakang:s.gelar_belakang,tempat_lahir:s.tempat_lahir,tanggal_lahir:s.tanggal_lahir,jenis_kelamin:s.jenis_kelamin,status_perkawinan:s.status_perkawinan,agama:s.agama,alamat:s.alamat,rt:s.rt,rw:s.rw,regency_code:s.regency_code,regency_name:s.regency_name,district_code:s.district_code,district_name:s.district_name,village_code:s.village_code,village_name:s.village_name,handphone:s.handphone,gol_darah:s.gol_darah,pendidikan:s.pendidikan,bpjs_kesehatan:s.bpjs_kesehatan,bpjs_ketenagakerjaan:s.bpjs_ketenagakerjaan,npwp:s.npwp,status:s.status};o[d](r,l,{headers:{"X-CSRF-TOKEN":q},onSuccess:()=>{n.fire("Success",`Official ${x?"updated":"added"} successfully.`,"success"),h(!1),_({})},onError:w=>{n.fire("Error",Object.values(w).join(", "),"error")}})},p=()=>{h(!1),y(!1),k(!1),b(null),g({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""})};return e.jsxs(re,{header:e.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Official",e.jsx("p",{className:"text-sm font-thin mt-1",children:"Daftar Official"})]}),breadcrumb:[{name:"Official",path:"/regency/official",active:!0,icon:e.jsx(le,{className:"w-5 h-5 mr-3"})}],children:[e.jsx(se,{title:"Official"}),e.jsx("div",{className:"p-4",children:e.jsx(ne,{officials:c,fetchData:_,loading:W,onEdit:X,onDelete:G,onAccept:f,onReject:Q,onPrint:Z,onView:z})}),e.jsx(Y,{isOpen:v&&!S,onClose:p,title:x?"Edit Official":"Add Official",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:s.nama_lengkap,onChange:a=>g({...s,nama_lengkap:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),e.jsx("input",{type:"text",value:s.nik,onChange:a=>g({...s,nik:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),e.jsx("input",{type:"text",value:s.niad,onChange:a=>g({...s,niad:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:p,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:x?"Update":"Save"})]})]})})}),e.jsxs(Y,{isOpen:v&&S,onClose:p,title:`Detail Pejabat: ${t==null?void 0:t.nama_lengkap}`,size:"xl",children:[e.jsxs("div",{className:"max-h-[90vh] overflow-y-auto pr-2 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-3",children:"Informasi Pribadi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nama Lengkap"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.nama_lengkap})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"NIK"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.nik})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"NIAD"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.niad})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tempat/Tanggal Lahir"}),e.jsxs("p",{className:"mt-1 text-gray-900",children:[t==null?void 0:t.tempat_lahir,","," ",t==null?void 0:t.tanggal_lahir]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Jenis Kelamin"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(t==null?void 0:t.jenis_kelamin)==="L"?"Laki-laki":"Perempuan"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status Perkawinan"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.status_perkawinan})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Agama"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.agama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.status})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-3",children:"Alamat"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Alamat Lengkap"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(C=t==null?void 0:t.addresses)==null?void 0:C.alamat})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"RT/RW"}),e.jsxs("p",{className:"mt-1 text-gray-900",children:[(E=t==null?void 0:t.addresses)==null?void 0:E.rt,"/",(A=t==null?void 0:t.addresses)==null?void 0:A.rw]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Provinsi"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(P=t==null?void 0:t.addresses)==null?void 0:P.province_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kabupaten/Kota"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(T=t==null?void 0:t.addresses)==null?void 0:T.regency_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kecamatan"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(K=t==null?void 0:t.addresses)==null?void 0:K.district_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Desa/Kelurahan"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(D=t==null?void 0:t.addresses)==null?void 0:D.village_name})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-3",children:"Kontak"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nomor Handphone"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(B=t==null?void 0:t.contacts)==null?void 0:B.handphone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(L=t==null?void 0:t.contacts)==null?void 0:L.email})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-3",children:"Identitas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Golongan Darah"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(I=t==null?void 0:t.identities)==null?void 0:I.gol_darah})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Pendidikan Terakhir"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(R=t==null?void 0:t.identities)==null?void 0:R.pendidikan})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"BPJS Kesehatan"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(J=t==null?void 0:t.identities)==null?void 0:J.bpjs_kesehatan})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"BPJS Ketenagakerjaan"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(M=t==null?void 0:t.identities)==null?void 0:M.bpjs_ketenagakerjaan})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"NPWP"}),e.jsx("p",{className:"mt-1 text-gray-900",children:($=t==null?void 0:t.identities)==null?void 0:$.npwp})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-3",children:"Riwayat Pendidikan"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenjang"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Sekolah"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alamat Sekolah"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jurusan"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tahun"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(F=t==null?void 0:t.studies)==null?void 0:F.map((a,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a.study.name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a.nama_sekolah}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.alamat_sekolah}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a.jurusan||"-"}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:[a.tahun_masuk," -"," ",a.tahun_keluar]})]},r))})]})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-3",children:"Riwayat Jabatan"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jabatan"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Penetap"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nomor SK"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal SK"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Periode"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Keterangan"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(V=t==null?void 0:t.positions)==null?void 0:V.map((a,r)=>{var d;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(d=a==null?void 0:a.position)==null?void 0:d.name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a==null?void 0:a.penetap}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a==null?void 0:a.nomor_sk}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:a==null?void 0:a.tanggal_sk}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:[a==null?void 0:a.mulai," -"," ",(a==null?void 0:a.selesai)||"Sekarang"]}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a==null?void 0:a.keterangan})]},r)})})]})})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 py-2",children:e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Tutup"})})]})]})}export{Te as default};
