import{r,j as s}from"./app-CVPon-in.js";import{X as A}from"./index.es-Cx28G3hx.js";import{i as b}from"./index-QcoFFRoy.js";import{u as i,w as M}from"./xlsx-5rFX-EW9.js";import X from"./Actions-DW1hvRJo.js";import{m as p}from"./proxy-D2F4h_SH.js";import"./iconBase-DWCpscjx.js";import"./index-Bid0kMqz.js";function V({official_trainings:t,trainings:j,fetchData:v,loading:S,onEdit:P,onDelete:N,onView:y,onPrint:f}){const[c,k]=r.useState(""),[d,D]=r.useState(""),[l,m]=r.useState((t==null?void 0:t.current_page)||1),[u,C]=r.useState((t==null?void 0:t.per_page)||10),[h,E]=r.useState("id"),[x,F]=r.useState("asc");r.useEffect(()=>{v({page:l,perPage:u,search:c,filters:d,sortField:h,sortDirection:x})},[l,u,c,d,h,x]);const R=e=>{m(e)},O=(e,o)=>{C(e),m(o)},T=(e,o)=>{const a=["asc","desc"].includes(o)?o:"asc",g=["id","nama","mulai","selesai","created_at","updated_at"].includes(e.selector)?e.selector:"id";E(g),F(a)},L=()=>{const e=JSON.stringify(t.data,null,2),o=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download="official_trainings.json",a.click(),URL.revokeObjectURL(n)},H=()=>{const e=i.json_to_sheet(t.data),o=i.book_new();i.book_append_sheet(o,e,"official_trainings"),M(o,"official_trainings.xlsx")},J=(e,o)=>{const n=new Date(e),a=new Date(o),w=Math.abs(a-n);return`${Math.ceil(w/(1e3*60*60*24))} hari`},U=[{name:"No",cell:(e,o)=>(l-1)*u+o+1,width:"70px"},{name:"Nama",selector:e=>e.official.nama_lengkap,sortable:!0,width:"200px"},{name:"Jenis",selector:e=>e.training.title,sortable:!0},{name:"Pelatihan",selector:e=>e.nama,sortable:!0},{name:"Lama Pelatihan",cell:e=>J(e.mulai,e.selesai),sortable:!0,width:"150px"},{name:"Aksi",cell:e=>s.jsx(X,{row:e,onEdit:P,onDelete:N,onView:y,onPrint:f}),ignoreRowClick:!0,allowOverflow:!0,button:!0,width:"100px"}];return s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-300",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[s.jsx(p.input,{type:"text",placeholder:"Cari nama...",value:c,onChange:e=>k(e.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto",whileHover:{scale:1.02},whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300}}),s.jsxs("select",{name:"training",value:d,onChange:e=>D(e.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto",children:[s.jsx("option",{value:"",children:"Semua Training"}),j.map(e=>s.jsx("option",{value:e.id,children:e.title},e.id))]}),s.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[s.jsxs(p.button,{onClick:L,className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[s.jsx(b,{className:"mr-2"})," Export JSON"]}),s.jsxs(p.button,{onClick:H,className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[s.jsx(b,{className:"mr-2"})," Export Excel"]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx(A,{columns:U,data:(t==null?void 0:t.data)||[],pagination:!0,paginationServer:!0,paginationTotalRows:(t==null?void 0:t.total)||0,paginationDefaultPage:l,onChangePage:R,onChangeRowsPerPage:O,onSort:T,highlightOnHover:!0,pointerOnHover:!0,striped:!0,responsive:!0,progressPending:S})})]})}export{V as default};
