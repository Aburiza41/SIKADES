import{r as x,j as e}from"./app-cnLqKnWv.js";import{I as y,J as O,K as R,G as U,L as A,M as H,N as J}from"./index-sj701c6h.js";import{u as g,w as B}from"./xlsx-5rFX-EW9.js";import{S as G}from"./react-select.esm-kjDh-dq3.js";import{m}from"./proxy-0toHJmZX.js";import"./iconBase-CMF4PMHw.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-c6l4leOc.js";import"./floating-ui.dom-CHZBHl4C.js";function Z({districts:t,fetchData:f,loading:b,onEdit:N,onDelete:v,onView:k,regencies:_,selectedRegency:i,setSelectedRegency:C}){const[h,S]=x.useState(""),[l,j]=x.useState((t==null?void 0:t.current_page)||1),[p,F]=x.useState((t==null?void 0:t.per_page)||10),[u,P]=x.useState("id"),[d,E]=x.useState("asc");x.useEffect(()=>{f({page:l,perPage:p,search:h,sortField:u,sortDirection:d,regency_id:(i==null?void 0:i.value)||""})},[l,p,h,u,d,i]);const w=a=>{j(a)},D=a=>{F(a),j(1)},n=a=>{const s=["id","regency_id","code_bps","name_bps","code_dagri","name_dagri","active","code","created_at","updated_at"].includes(a)?a:"id";let r="asc";s===a&&(r=d==="asc"?"desc":"asc"),P(s),E(r)},L=()=>{const a=JSON.stringify(t.data,null,2),c=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(c),r=document.createElement("a");r.href=s,r.download="districts.json",r.click(),URL.revokeObjectURL(s)},T=()=>{const a=g.json_to_sheet(t.data.map(s=>{var r;return{...s,regency_name:((r=s.regency)==null?void 0:r.name_bps)||""}})),c=g.book_new();g.book_append_sheet(c,a,"districts"),B(c,"districts.xlsx")},I={control:a=>({...a,borderColor:"#d1d5db",borderRadius:"0.375rem",padding:"0.25rem","&:hover":{borderColor:"#3b82f6"}}),menu:a=>({...a,zIndex:9999})},o=a=>u!==a?e.jsx(A,{className:"ml-1"}):d==="asc"?e.jsx(H,{className:"ml-1"}):e.jsx(J,{className:"ml-1"});return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[e.jsx(m.div,{className:"w-full md:w-64",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:e.jsx(G,{options:_.map(a=>({value:a.id,label:a.name_bps})),value:i,onChange:C,placeholder:"Pilih Kabupaten",isClearable:!0,styles:I})}),e.jsx(m.input,{type:"text",placeholder:"Cari nama atau kode...",value:h,onChange:a=>S(a.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto",whileHover:{scale:1.02},whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300}})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[e.jsxs(m.button,{onClick:L,className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(y,{className:"mr-2"})," Export JSON"]}),e.jsxs(m.button,{onClick:T,className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[e.jsx(y,{className:"mr-2"})," Export Excel"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>n("regency_id"),children:["Kabupaten ",o("regency_id")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>n("code_bps"),children:["Code BPS ",o("code_bps")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>n("name_bps"),children:["Name BPS ",o("name_bps")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>n("code_dagri"),children:["Code DAGRI ",o("code_dagri")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>n("name_dagri"),children:["Name DAGRI ",o("name_dagri")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>n("active"),children:["Active ",o("active")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>n("code"),children:["Code ",o("code")]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading..."})}):((t==null?void 0:t.data)||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-sm text-gray-500",children:"Tidak ada data"})}):((t==null?void 0:t.data)||[]).map((a,c)=>{var s;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(l-1)*p+c+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((s=a.regency)==null?void 0:s.name_bps)||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.code_bps||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.name_bps||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.code_dagri||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.name_dagri||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.active?"Ya":"Tidak"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>k(a),className:"text-blue-600 hover:text-blue-900",children:e.jsx(O,{})}),e.jsx("button",{onClick:()=>N(a),className:"text-yellow-600 hover:text-yellow-900",children:e.jsx(R,{})}),e.jsx("button",{onClick:()=>v(a.id),className:"text-red-600 hover:text-red-900",children:e.jsx(U,{})})]})})]},a.id)})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"mr-2",children:"Rows per page:"}),e.jsxs("select",{value:p,onChange:a=>D(parseInt(a.target.value)),className:"border p-1 rounded",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>w(l-1),disabled:l===1,className:"px-3 py-1 border rounded mr-2 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",l," of ",(t==null?void 0:t.last_page)||1]}),e.jsx("button",{onClick:()=>w(l+1),disabled:l===((t==null?void 0:t.last_page)||1),className:"px-3 py-1 border rounded ml-2 disabled:opacity-50",children:"Next"})]})]})]})}export{Z as default};
