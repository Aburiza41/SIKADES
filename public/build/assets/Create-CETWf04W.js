import{r as o,j as t,L as _,a as U}from"./app-cnLqKnWv.js";import{S as k}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as I}from"./AuthenticatedLayout-DtE7q2g1.js";import{l as q,m as C}from"./index-CyDsHmf4.js";import M from"./OfficialIdentifyForm-y2cHYNpX.js";import R from"./StudiesForm-CY2Cro80.js";import B from"./OfficialTempatKerjaForm-D62leDPU.js";import G from"./OrangTuaForm-B-hg5zGL.js";import J from"./HubunganForm-pCpMhwkF.js";import Q from"./AnakForm-t3hfEZeB.js";import V from"./PositionsForm-DDx5znSm.js";import W from"./TrainingsForm-DcvMfEGu.js";import X from"./OrganizationsForm-Dl7OcAFF.js";import{m as l}from"./proxy-0toHJmZX.js";import"./index-sj701c6h.js";import"./iconBase-CMF4PMHw.js";import"./transition-LX_87-cn.js";import"./LoadingPage-CsjTuYab.js";import"./index-CSb7vC3W.js";import"./index-DC9iVcT_.js";import"./index-DidX0__a.js";import"./react-select.esm-kjDh-dq3.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-c6l4leOc.js";import"./floating-ui.dom-CHZBHl4C.js";var T;(T=document.querySelector('meta[name="csrf-token"]'))!=null&&T.getAttribute("content");function va({initialPositions:F,initialTrainings:Y,initialOrganizations:v,initialStudies:Z,position:d}){const[r,E]=o.useState([]),[c,N]=o.useState([]),[u,w]=o.useState([]),[f,D]=o.useState([]),[h,P]=o.useState([]),[j,x]=o.useState([]),[b,A]=o.useState([]),[m,H]=o.useState([]),[y,L]=o.useState([]),[S,g]=o.useState(!1),[n,aa]=o.useState({}),z=async(p,K)=>{var $,O;p.preventDefault(),g(!0);const i=new FormData;for(const a in r)a==="foto"&&r[a]instanceof File?i.append(`official[${a}]`,r[a]):i.append(`official[${a}]`,r[a]);for(const a in c)i.append(`tempat_kerja[${a}]`,c[a]);for(const a in f)i.append(`position[${a}]`,f[a]);j.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`organizations[${s}][${e}]`,a[e]):i.append(`organizations[${s}][${e}]`,a[e])}),u.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`studies[${s}][${e}]`,a[e]):i.append(`studies[${s}][${e}]`,a[e])}),h.forEach((a,s)=>{for(const e in a)e==="doc_scan"&&a[e]instanceof File?i.append(`trainings[${s}][${e}]`,a[e]):i.append(`trainings[${s}][${e}]`,a[e])}),b.forEach((a,s)=>{for(const e in a)a[e]!==void 0&&a[e]!==null&&i.append(`orang_tua[${s}][${e}]`,a[e])});for(const a in m)i.append(`hubungan[${a}]`,m[a]);y.forEach((a,s)=>{for(const e in a)i.append(`anak[${s}][${e}]`,a[e])});try{const a=await U.post(`/admin/official/${K}/store`,i,{headers:{"Content-Type":"multipart/form-data"}});k.fire("Success","Data berhasil diperbarui.","success")}catch(a){k.fire("Error",((O=($=a.response)==null?void 0:$.data)==null?void 0:O.message)||"Terjadi kesalahan","error")}finally{g(!1)}};return t.jsxs(I,{header:t.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Tambah Pejabat Desa",t.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Penambahan Data Pejabat Desa"})]}),breadcrumb:[{name:"Tambah Official",path:"/village/official/create",active:!0,icon:t.jsx(C,{className:"w-5 h-5 mr-3"})}],children:[t.jsx(_,{title:"Update Official"}),t.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:t.jsxs("form",{onSubmit:p=>z(p,d),className:"space-y-8",children:[t.jsx(M,{official:r,setOfficial:E,errors:n}),t.jsx(B,{tempat_kerja:c,setTempatKerja:N,errors:n}),t.jsx(V,{position:d,positions:F,officialPosition:f,setOfficialPosition:D}),t.jsx(X,{organizations:v,setOrganizations:x,officialOrganizations:j,setOfficialOrganizations:x}),t.jsx(R,{officialStudies:u,setOfficialStudies:w}),t.jsx(W,{officialTrainings:h,setOfficialTrainings:P}),t.jsx(G,{orang_tua:b,setOrangTua:A,errors:n}),t.jsx(J,{hubungan:m,setHubungan:H,errors:n}),t.jsx(Q,{anak:y,setAnak:L,errors:n}),t.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:t.jsxs(l.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:S,children:[t.jsx(q,{className:"mr-2"}),S?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{va as default};
