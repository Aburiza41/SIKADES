import{r as s,j as e,e as z}from"./app-CVPon-in.js";import{k as O,l as L,m as Q}from"./index-CQ3QYBQr.js";import{S as U}from"./react-select.esm-DGr4SDH5.js";import{S as i}from"./sweetalert2.esm.all-LHqzTR4y.js";import{m as l}from"./proxy-D2F4h_SH.js";import{A as B}from"./index-Bz8wJd-C.js";import"./iconBase-DWCpscjx.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-CM85KNXL.js";function de({studies:J=[],setStudies:H=()=>{},officialStudies:n=[],setOfficialStudies:b=()=>{}}){const[E,w]=s.useState(!1),[K,v]=s.useState(!1),[y,S]=s.useState(""),[C,T]=s.useState(""),[d,r]=s.useState(null),[k,o]=s.useState(""),[_,c]=s.useState(""),[A,m]=s.useState(""),[g,u]=s.useState(""),[P,h]=s.useState(""),[G,x]=s.useState(null),[p,j]=s.useState(null),I=J.map(a=>({value:a.id,label:a.name})),R=()=>{w(!0)},N=()=>{w(!1),S(""),T("")},D=(a=null)=>{if(a!==null){const t=n[a];r({value:t.study_id,label:t.study_name}),o(t.nama_sekolah),c(t.alamat_sekolah||""),m(t.jurusan||""),u(t.tahun_masuk),h(t.tahun_keluar||""),x(t.dokumen||null),j(a)}else r(null),o(""),c(""),m(""),u(""),h(""),x(null),j(null);v(!0)},M=()=>{v(!1),r(null),o(""),c(""),m(""),u(""),h(""),x(null),j(null)},F=async()=>{if(!y.trim()){i.fire({icon:"error",title:"Oops...",text:"Judul pendidikan tidak boleh kosong!"});return}try{const a=await z.post("/village/official/study/store",{title:y,description:C});if(a.data.success){const t={id:a.data.data.id,name:a.data.data.title,description:a.data.data.description};H(f=>[...f,t]),N()}else i.fire({icon:"error",title:"Gagal",text:"Gagal menambahkan pendidikan baru: "+a.data.message})}catch(a){console.error("Gagal menambahkan pendidikan baru:",a),i.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat menambahkan pendidikan baru. Silakan coba lagi."}),N()}},Y=()=>{if(!d||!k||!g){i.fire({icon:"error",title:"Oops...",text:"Harap isi semua field yang diperlukan!"});return}const a={study_id:d.value,study_name:d.label,nama_sekolah:k,alamat_sekolah:_,jurusan:A,tahun_masuk:g,tahun_keluar:P,dokumen:G};if(p!==null){const t=[...n];t[p]=a,b(t)}else b([...n,a]);M()},$=a=>{i.fire({title:"Apakah Anda yakin?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){const f=n.filter((V,q)=>q!==a);b(f),i.fire("Dihapus!","Data telah dihapus.","success")}})};return e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"bg-white w-full p-4 shadow rounded-lg mt-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center border-b",children:[e.jsxs("div",{className:"space-y-0",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-700",children:"E. Formulir Riwayat Pendidikan"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Formulir ini digunakan untuk mengisi riwayat pendidikan pejabat desa."})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(l.button,{type:"button",onClick:R,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:[e.jsx(O,{className:"mr-2"})," Jenis Pendidikan"]}),e.jsxs(l.button,{type:"button",onClick:()=>D(),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center",children:[e.jsx(O,{className:"mr-2"})," Tambah"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Pendidikan"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Nama Sekolah"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Alamat Sekolah"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Jurusan"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Tahun Masuk"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Tahun Keluar"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Aksi"})]})}),e.jsx("tbody",{children:n.length>0?n.map((a,t)=>e.jsxs("tr",{className:"bg-white border-b",children:[e.jsx("td",{className:"px-4 py-3",children:a.study_name}),e.jsx("td",{className:"px-4 py-3",children:a.nama_sekolah}),e.jsx("td",{className:"px-4 py-3",children:a.alamat_sekolah}),e.jsx("td",{className:"px-4 py-3",children:a.jurusan}),e.jsx("td",{className:"px-4 py-3",children:a.tahun_masuk}),e.jsx("td",{className:"px-4 py-3",children:a.tahun_keluar}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",onClick:()=>D(t),className:"px-2 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 flex items-center",children:[e.jsx(L,{className:"mr-1"})," Edit"]}),e.jsxs("button",{type:"button",onClick:()=>$(t),className:"px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[e.jsx(Q,{className:"mr-1"})," Hapus"]})]})})]},t)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-3 text-center",children:"Tidak ada data riwayat pendidikan."})})})]})})]}),e.jsx(B,{children:E&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tambah Jenis Pendidikan Baru"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Judul Pendidikan"}),e.jsx("input",{type:"text",value:y,onChange:a=>S(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Judul Pendidikan"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deskripsi"}),e.jsx("textarea",{value:C,onChange:a=>T(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Deskripsi Pendidikan",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:N,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Simpan"})]})]})})}),e.jsx(B,{children:K&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/2 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:p!==null?"Edit Riwayat Pendidikan":"Tambah Riwayat Pendidikan"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pendidikan"}),e.jsx(U,{options:I,value:d,onChange:r,placeholder:"Pilih Pendidikan",isClearable:!0,isSearchable:!0,className:"mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Sekolah"}),e.jsx("input",{type:"text",value:k,onChange:a=>o(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Nama Sekolah"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Alamat Sekolah"}),e.jsx("input",{type:"text",value:_,onChange:a=>c(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Alamat Sekolah"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Jurusan"}),e.jsx("input",{type:"text",value:A,onChange:a=>m(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Jurusan"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tahun Masuk"}),e.jsx("input",{type:"number",value:g,onChange:a=>u(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Tahun Masuk"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tahun Keluar"}),e.jsx("input",{type:"number",value:P,onChange:a=>h(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Tahun Keluar"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dokumen"}),e.jsx("input",{type:"file",onChange:a=>x(a.target.files[0]),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:M,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:Y,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:p!==null?"Simpan Perubahan":"Simpan"})]})]})})})]})}export{de as default};
