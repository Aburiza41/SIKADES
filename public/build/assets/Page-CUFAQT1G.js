import{K as B,r,j as a,L as F,S as x}from"./app-CVPon-in.js";import{S as l}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as P}from"./AuthenticatedLayout-uxNNxEb-.js";import R from"./List-CnurUkF4.js";import{H as $}from"./index-CQ3QYBQr.js";import w from"./Modal-CYYU0Diz.js";import H from"./PDF-Cym1ua-E.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./transition-CxQxzVBW.js";import"./LoadingPage-D5KRQg6W.js";import"./proxy-D2F4h_SH.js";import"./index-Bz8wJd-C.js";import"./index.es-Cx28G3hx.js";import"./xlsx-5rFX-EW9.js";import"./Actions-CHLjMDz1.js";import"./index-Bid0kMqz.js";import"./jspdf.plugin.autotable-Ct2Crhd4.js";import"./typeof-QjJsDpFa.js";var S;const N=((S=document.querySelector('meta[name="csrf-token"]'))==null?void 0:S.getAttribute("content"))||"";function oe({initialOfficials:C,officials:U}){const{flash:s}=B().props,[E,O]=r.useState(C),[f,_]=r.useState(!1),[y,m]=r.useState(!1),[o,c]=r.useState(!1),[v,p]=r.useState(!1),[n,h]=r.useState(null),[t,d]=r.useState({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""});r.useEffect(()=>{s!=null&&s.success&&l.fire("Success",s.success,"success"),s!=null&&s.error&&l.fire("Error",s.error,"error")},[s]);const u=({page:e=1,perPage:i=10,search:k="",filters:j="",sortField:b="",sortDirection:T=""})=>{_(!0),x.get("/admin/official",{page:e,per_page:i,search:k,filters:j,sort_field:b,sort_direction:T},{preserveState:!0,replace:!0,onSuccess:V=>{O(V.props.officials),_(!1)},onError:()=>{l.fire("Error","Failed to fetch data. Please try again.","error"),_(!1)}})},D=()=>{c(!1),p(!1),m(!0),d({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""})},A=e=>{h(e),c(!0),p(!1),m(!0),d({village_id:e.village_id,nik:e.nik,niad:e.niad,nama_lengkap:e.nama_lengkap,gelar_depan:e.gelar_depan,gelar_belakang:e.gelar_belakang,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,jenis_kelamin:e.jenis_kelamin,status_perkawinan:e.status_perkawinan,agama:e.agama,alamat:e.alamat,rt:e.rt,rw:e.rw,regency_code:e.regency_code,regency_name:e.regency_name,district_code:e.district_code,district_name:e.district_name,village_code:e.village_code,village_name:e.village_name,handphone:e.handphone,gol_darah:e.gol_darah,pendidikan:e.pendidikan,bpjs_kesehatan:e.bpjs_kesehatan,bpjs_ketenagakerjaan:e.bpjs_ketenagakerjaan,npwp:e.npwp,status:e.status})},I=e=>{h(e),c(!1),p(!0),m(!0)},L=e=>{l.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&x.delete(`/admin/official/${e}`,{headers:{"X-CSRF-TOKEN":N},onSuccess:()=>{l.fire("Deleted!","Data has been successfully deleted.","success"),u({})},onError:()=>{l.fire("Error","An error occurred while deleting the data.","error")}})})},M=e=>{const i={nama_lengkap:e.nama_lengkap,nik:e.nik,niad:e.niad,tempat_lahir:e.tempat_lahir,tanggal_lahir:e.tanggal_lahir,jenis_kelamin:e.jenis_kelamin,status_perkawinan:e.status_perkawinan,agama:e.agama,alamat:e.alamat,handphone:e.handphone,gol_darah:e.gol_darah,pendidikan:e.pendidikan,bpjs_kesehatan:e.bpjs_kesehatan,bpjs_ketenagakerjaan:e.bpjs_ketenagakerjaan,npwp:e.npwp,status:e.status};H(i)},K=e=>{e.preventDefault();const i=o?`/admin/official/${n.id}`:"/admin/official",k=o?"put":"post",j={village_id:t.village_id,nik:t.nik,niad:t.niad,nama_lengkap:t.nama_lengkap,gelar_depan:t.gelar_depan,gelar_belakang:t.gelar_belakang,tempat_lahir:t.tempat_lahir,tanggal_lahir:t.tanggal_lahir,jenis_kelamin:t.jenis_kelamin,status_perkawinan:t.status_perkawinan,agama:t.agama,alamat:t.alamat,rt:t.rt,rw:t.rw,regency_code:t.regency_code,regency_name:t.regency_name,district_code:t.district_code,district_name:t.district_name,village_code:t.village_code,village_name:t.village_name,handphone:t.handphone,gol_darah:t.gol_darah,pendidikan:t.pendidikan,bpjs_kesehatan:t.bpjs_kesehatan,bpjs_ketenagakerjaan:t.bpjs_ketenagakerjaan,npwp:t.npwp,status:t.status};x[k](i,j,{headers:{"X-CSRF-TOKEN":N},onSuccess:()=>{l.fire("Success",`Official ${o?"updated":"added"} successfully.`,"success"),m(!1),u({})},onError:b=>{l.fire("Error",Object.values(b).join(", "),"error")}})},g=()=>{m(!1),c(!1),p(!1),h(null),d({village_id:"",nik:"",niad:"",nama_lengkap:"",gelar_depan:"",gelar_belakang:"",tempat_lahir:"",tanggal_lahir:"",jenis_kelamin:"",status_perkawinan:"",agama:"",alamat:"",rt:"",rw:"",regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:"",handphone:"",gol_darah:"",pendidikan:"",bpjs_kesehatan:"",bpjs_ketenagakerjaan:"",npwp:"",status:""})};return a.jsxs(P,{header:a.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Official",a.jsx("p",{className:"text-sm font-thin mt-1",children:"Daftar Official"})]}),breadcrumb:[{name:"Official",path:"/admin/official",active:!0,icon:a.jsx($,{className:"w-5 h-5 mr-3"})}],children:[a.jsx(F,{title:"Official"}),a.jsxs("div",{className:"p-4",children:[a.jsx("button",{onClick:D,className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Official"}),a.jsx(R,{officials:E,fetchData:u,loading:f,onEdit:A,onDelete:L,onView:I,onPrint:M})]}),a.jsx(w,{isOpen:y&&!v,onClose:g,title:o?"Edit Official":"Add Official",children:a.jsx("div",{className:"p-4",children:a.jsxs("form",{onSubmit:K,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),a.jsx("input",{type:"text",value:t.nama_lengkap,onChange:e=>d({...t,nama_lengkap:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),a.jsx("input",{type:"text",value:t.nik,onChange:e=>d({...t,nik:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),a.jsx("input",{type:"text",value:t.niad,onChange:e=>d({...t,niad:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),a.jsxs("div",{className:"flex justify-end",children:[a.jsx("button",{type:"button",onClick:g,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:o?"Update":"Save"})]})]})})}),a.jsx(w,{isOpen:y&&v,onClose:g,title:"View Official",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),a.jsx("p",{className:"mt-1 text-gray-900",children:n==null?void 0:n.nama_lengkap})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),a.jsx("p",{className:"mt-1 text-gray-900",children:n==null?void 0:n.nik})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"NIAD"}),a.jsx("p",{className:"mt-1 text-gray-900",children:n==null?void 0:n.niad})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})})]})}export{oe as default};
