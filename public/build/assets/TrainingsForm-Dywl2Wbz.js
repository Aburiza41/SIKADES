import{r as f,j as e}from"./app-EIz8nQ5Q.js";import{b as j,c as N,i as x,d as P,e as w,h as F,l as E,k as g,f as I,g as B}from"./index-D-VSm5dn.js";import{u as v}from"./index-CuuF2Vom.js";import{S as o}from"./sweetalert2.esm.all-LHqzTR4y.js";import{m as t}from"./proxy-Br4hXrCY.js";import{A as D}from"./index-26-9MRme.js";import"./iconBase-CIswt8ol.js";function z({officialTrainings:c=[],setOfficialTrainings:p}){const[l,i]=f.useState({nama:"",tempat:"",pelatihan:"",penyelenggara:"",nomor:"",tanggal:"",docScan:null}),[m,y]=f.useState(null),[k,u]=f.useState(!1),b=()=>{i({nama:"",tempat:"",pelatihan:"",penyelenggara:"",nomor:"",tanggal:"",docScan:null}),y(null)},h=(a=null)=>{if(a!==null){const s=c[a];i({nama:s.nama,tempat:s.tempat,pelatihan:s.pelatihan,penyelenggara:s.penyelenggara,nomor:s.nomor,tanggal:s.tanggal,docScan:s.docScan||null}),y(a)}u(!0)},r=a=>{const{name:s,value:n}=a.target;i(d=>({...d,[s]:n}))},S=a=>{const s=a.target.files[0];if(!s)return;if(!["application/pdf","image/jpeg","image/png"].includes(s.type)){o.fire("Error","Hanya file PDF, JPEG, atau PNG yang diizinkan","error");return}if(s.size>5*1024*1024){o.fire("Error","Ukuran file maksimal 5MB","error");return}i(d=>({...d,docScan:s}))},C=()=>{i(a=>({...a,docScan:null}))},T=()=>{if(!l.nama||!l.tempat||!l.pelatihan||!l.penyelenggara){o.fire({icon:"error",title:"Oops...",text:"Harap isi semua field yang diperlukan!"});return}const a={...l};if(m!==null){const s=[...c];s[m]=a,p(s)}else p(s=>[...s,a]);u(!1),b()},H=a=>{o.fire({title:"Apakah Anda yakin?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(s=>{s.isConfirmed&&(p(n=>n.filter((d,A)=>A!==a)),o.fire("Dihapus!","Data telah dihapus.","success"))})};return e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"bg-white w-full p-6 shadow rounded-lg mt-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(t.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5},children:e.jsx(v,{className:"text-3xl text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"F. RIWAYAT PELATIHAN/BIMBINGAN TEKNIS/SOSIALISASI"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1 text-blue-500"}),"Formulir ini digunakan untuk mengisi riwayat pelatihan pejabat desa."]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(t.button,{type:"button",onClick:()=>h(),whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 flex items-center text-sm font-medium shadow-md",children:[e.jsx(N,{className:"mr-2 text-lg"})," Tambah Riwayat"]})})]}),e.jsx(t.div,{variants:{hidden:{opacity:0},visible:{opacity:1}},initial:"hidden",animate:"visible",className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NAMA"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TEMPAT"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PELATIHAN"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PENYELENGGARA"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NOMOR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TANGGAL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AKSI"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.length>0?c.map((a,s)=>e.jsxs(t.tr,{className:"hover:bg-gray-50",variants:{hidden:{opacity:0},visible:{opacity:1}},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:a.nama}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:a.tempat}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:a.pelatihan}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:a.penyelenggara}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:[a.nomor||"-",e.jsxs("a",{href:(a==null?void 0:a.docScan)instanceof Blob?URL.createObjectURL(a.docScan):"#",target:"_blank",className:"text-blue-500 hover:underline flex items-center",onClick:n=>{(a==null?void 0:a.docScan)instanceof Blob||n.preventDefault()},children:[e.jsx(x,{className:"mr-1"})," Lihat"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:a.tanggal||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(t.button,{type:"button",onClick:()=>h(s),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 flex items-center text-xs shadow-sm",children:[e.jsx(P,{className:"mr-1"})," Edit"]}),e.jsxs(t.button,{type:"button",onClick:()=>H(s),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-3 py-1 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 flex items-center text-xs shadow-sm",children:[e.jsx(w,{className:"mr-1"})," Hapus"]})]})})]},s)):e.jsx(t.tr,{variants:{hidden:{opacity:0},visible:{opacity:1}},children:e.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[e.jsx(j,{className:"text-4xl mb-2 text-blue-200"}),e.jsx("p",{className:"text-sm font-medium",children:"Tidak ada data riwayat pelatihan."}),e.jsxs(t.button,{type:"button",onClick:()=>h(),whileHover:{scale:1.03},whileTap:{scale:.98},className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 flex items-center text-sm font-medium shadow-md",children:[e.jsx(N,{className:"mr-2"})," Tambah Riwayat"]})]})})})})]})})]}),e.jsx(D,{children:k&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx(t.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",damping:25},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[e.jsx(v,{className:"mr-2 text-blue-500"}),m!==null?"Edit Riwayat Pelatihan":"Tambah Riwayat Pelatihan"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(F,{className:"mr-2 text-blue-500"})," Nama *"]}),e.jsx(t.input,{type:"text",name:"nama",value:l.nama,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Nama",required:!0,whileFocus:"focus"})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(E,{className:"mr-2 text-blue-500"})," Tempat *"]}),e.jsx(t.input,{type:"text",name:"tempat",value:l.tempat,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Tempat",required:!0,whileFocus:"focus"})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(g,{className:"mr-2 text-blue-500"})," Pelatihan *"]}),e.jsx(t.input,{type:"text",name:"pelatihan",value:l.pelatihan,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Pelatihan",required:!0,whileFocus:"focus"})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.4},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(g,{className:"mr-2 text-blue-500"})," Penyelenggara *"]}),e.jsx(t.input,{type:"text",name:"penyelenggara",value:l.penyelenggara,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Penyelenggara",required:!0,whileFocus:"focus"})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.5},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(x,{className:"mr-2 text-blue-500"})," Nomor"]}),e.jsx(t.input,{type:"text",name:"nomor",value:l.nomor,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Nomor",whileFocus:"focus"})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.6},children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(g,{className:"mr-2 text-blue-500"})," Tanggal"]}),e.jsx(t.input,{type:"date",name:"tanggal",value:l.tanggal,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",whileFocus:"focus"})]}),e.jsxs(t.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.7},className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(x,{className:"mr-2 text-blue-500"})," Dokumen Scan"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t.input,{type:"file",onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:".pdf,.jpg,.jpeg,.png",whileFocus:"focus"}),l.docScan&&e.jsx("button",{onClick:C,className:"p-2 text-red-500 hover:text-red-700",title:"Hapus dokumen",children:e.jsx(w,{})})]}),l.docScan&&e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-600",children:[e.jsx(x,{className:"mr-2"}),e.jsx("span",{children:l.docScan.name}),e.jsxs("span",{className:"ml-2 text-gray-400",children:["(",(l.docScan.size/1024).toFixed(1)," KB)"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxs(t.button,{type:"button",onClick:()=>{u(!1),b()},whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center",children:[e.jsx(I,{className:"mr-2"})," Batal"]}),e.jsxs(t.button,{type:"button",onClick:T,whileHover:{scale:1.03},whileTap:{scale:.98},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-colors flex items-center shadow-md",children:[e.jsx(B,{className:"mr-2"})," ",m!==null?"Simpan Perubahan":"Simpan"]})]})]})})})})]})}export{z as default};
