import{r as n,a as f,j as a,L as te,S as se}from"./app-cnLqKnWv.js";import{S as w}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as ie}from"./AuthenticatedLayout-DtE7q2g1.js";import{l as ae,m as oe}from"./index-CyDsHmf4.js";import ne from"./OfficialForm-C6ivDeDO.js";import re from"./OfficialAddressForm-C6G8okEk.js";import ce from"./StudiesForm-CsDfaXfT.js";import le from"./OfficialContactForm-BhRcLnhE.js";import de from"./OfficialIdentityForm-4nNToLdF.js";import fe from"./PositionsForm-CQWEK7gV.js";import pe from"./TrainingsForm-BGjuyVJW.js";import me from"./OrganizationsForm-BbQGMDYN.js";import{m as g}from"./proxy-0toHJmZX.js";import"./index-sj701c6h.js";import"./iconBase-CMF4PMHw.js";import"./transition-LX_87-cn.js";import"./LoadingPage-CsjTuYab.js";import"./index-CSb7vC3W.js";import"./react-select.esm-kjDh-dq3.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-c6l4leOc.js";import"./floating-ui.dom-CHZBHl4C.js";var C;(C=document.querySelector('meta[name="csrf-token"]'))!=null&&C.getAttribute("content");function Ue({official:P,addresses:D,contacts:N,identities:T,studies:z,positions:A,trainings:L,organizations:U,opsPositions:R,opsTrainings:H,opsOrganizations:I,opsStudies:V}){const[c,q]=n.useState(P),[r,l]=n.useState(D),[p,M]=n.useState(N),[m,B]=n.useState(T),[u,h]=n.useState(z),[v,b]=n.useState(A),[y,_]=n.useState(L),[S,x]=n.useState(U),[$,G]=n.useState([]),[j,J]=n.useState([]),[k,K]=n.useState([]),[O,Q]=n.useState([]),[F,E]=n.useState(!1),[d,ge]=n.useState({});n.useEffect(()=>{f.get("/village/bps/wilayah").then(o=>G(o.data)).catch(o=>console.error("Error fetching provinces:",o))},[]);const W=o=>{const i=o.target.value,e=$.find(t=>t.kode_bps===o.target.value);l({...r,province_code:e.kode_bps,province_name:e.nama_bps,regency_code:"",regency_name:"",district_code:"",district_name:"",village_code:"",village_name:""}),f.get(`/village/bps/wilayah/kabupaten/${i}`).then(t=>J(t.data)).catch(t=>console.error("Error fetching regencies:",t))},X=o=>{const i=o.target.value,e=j.find(t=>t.kode_bps===o.target.value);l({...r,regency_code:e.kode_bps,regency_name:e.nama_bps,district_code:"",district_name:"",village_code:"",village_name:""}),f.get(`/village/bps/wilayah/kecamatan/${i}`).then(t=>K(t.data)).catch(t=>console.error("Error fetching districts:",t))},Y=o=>{const i=o.target.value,e=k.find(t=>t.kode_bps===o.target.value);l({...r,district_code:e.kode_bps,district_name:e.nama_bps,village_code:"",village_name:""}),f.get(`/village/bps/wilayah/desa/${i}`).then(t=>Q(t.data)).catch(t=>console.error("Error fetching villages:",t))},Z=o=>{const i=O.find(e=>e.kode_bps===o.target.value);l({...r,village_code:i.kode_bps,village_name:i.nama_bps})},ee=o=>{o.preventDefault(),E(!0);const i=new FormData;for(const e in c)i.append(`official[${e}]`,c[e]);for(const e in r)i.append(`address[${e}]`,r[e]);for(const e in p)i.append(`contact[${e}]`,p[e]);for(const e in m)i.append(`identity[${e}]`,m[e]);u.forEach((e,t)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?i.append(`studies[${t}][${s}]`,e[s]):i.append(`studies[${t}][${s}]`,e[s])}),v.forEach((e,t)=>{for(const s in e)s==="foto"&&e[s]instanceof File?i.append(`positions[${t}][${s}]`,e[s]):i.append(`positions[${t}][${s}]`,e[s])}),y.forEach((e,t)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?i.append(`trainings[${t}][${s}]`,e[s]):i.append(`trainings[${t}][${s}]`,e[s])}),S.forEach((e,t)=>{for(const s in e)s==="doc_scan"&&e[s]instanceof File?i.append(`organizations[${t}][${s}]`,e[s]):i.append(`organizations[${t}][${s}]`,e[s])}),se.post(`/village/official/${c.nik}/update`,i,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{w.fire("Success","Data berhasil diperbarui.","success")},onError:e=>{w.fire("Error",Object.values(e).join(", "),"error")},onFinish:()=>{E(!1)}})};return a.jsxs(ie,{header:a.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Update Official",a.jsx("p",{className:"text-sm font-thin mt-1",children:"Formulir Pembaruan Data Official"})]}),breadcrumb:[{name:"Update Official",path:`/village/official/update/${c.id}`,active:!0,icon:a.jsx(oe,{className:"w-5 h-5 mr-3"})}],children:[a.jsx(te,{title:"Update Official"}),a.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-4",children:a.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[a.jsx(ne,{official:c,setOfficial:q,errors:d}),a.jsx(re,{address:r,setAddress:l,provinces:$,regencies:j,districts:k,villages:O,handleProvinceChange:W,handleRegencyChange:X,handleDistrictChange:Y,handleVillageChange:Z,errors:d}),a.jsx(le,{contact:p,setContact:M,errors:d}),a.jsx(de,{identity:m,setIdentity:B,errors:d}),a.jsx(ce,{studies:V,setStudies:h,officialStudies:u,setOfficialStudies:h}),a.jsx(fe,{positions:R,setPositions:b,officialPositions:v,setOfficialPositions:b}),a.jsx(pe,{trainings:H,setTrainings:_,officialTrainings:y,setOfficialTrainings:_}),a.jsx(me,{organizations:I,setOrganizations:x,officialOrganizations:S,setOfficialOrganizations:x}),a.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex justify-end mt-8",children:a.jsxs(g.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",disabled:F,children:[a.jsx(ae,{className:"mr-2"})," ",F?"Menyimpan...":"Simpan Perubahan"]})})]})})]})}export{Ue as default};
