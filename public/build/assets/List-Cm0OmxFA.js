import{r as l,j as a}from"./app-CVPon-in.js";import{X as U}from"./index.es-Cx28G3hx.js";import{i as w}from"./index-QcoFFRoy.js";import{u as g,w as J}from"./xlsx-5rFX-EW9.js";import B from"./Actions-Bg-QjaER.js";import{m as p}from"./proxy-D2F4h_SH.js";import"./iconBase-DWCpscjx.js";import"./index-Bid0kMqz.js";function M({users:o,fetchData:v,loading:j,onEdit:y,onDelete:N,onView:S,onPrint:k}){const[i,P]=l.useState(""),[c,_]=l.useState(""),[d,m]=l.useState((o==null?void 0:o.current_page)||1),[x,R]=l.useState((o==null?void 0:o.per_page)||10),[h,C]=l.useState("id"),[f,E]=l.useState("asc");l.useEffect(()=>{v({page:d,perPage:x,search:i,filters:c,sortField:h,sortDirection:f})},[d,x,i,c,h,f]);const F=e=>{m(e)},D=(e,t)=>{R(e),m(t)},A=(e,t)=>{const r=["asc","desc"].includes(t)?t:"asc",s=["id","name","email","role","created_at","updated_at"].includes(e.selector)?e.selector:"id";C(s),E(r)},O=()=>{const e=JSON.stringify(o.data,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="users.json",r.click(),URL.revokeObjectURL(n)},H=()=>{const e=g.json_to_sheet(o.data),t=g.book_new();g.book_append_sheet(t,e,"users"),J(t,"users.xlsx")},L=[{name:"ID",selector:e=>e.id,sortable:!0,width:"70px"},{name:"Nama",selector:e=>e.name,sortable:!0},{name:"Email",selector:e=>e.email,sortable:!0},{name:"Daerah",selector:e=>{var t,n,r,u,s,b;return e.role==="regency"?((n=(t=e.user_regency)==null?void 0:t.regency)==null?void 0:n.name_bps)||"N/A":e.role==="district"?((u=(r=e.user_district)==null?void 0:r.district)==null?void 0:u.name_bps)||"N/A":e.role==="village"?((b=(s=e.user_village)==null?void 0:s.village)==null?void 0:b.name_bps)||"N/A":"Admin Pusat"},sortable:!0},{name:"Role",selector:e=>e.role,sortable:!0,cell:e=>a.jsx(T,{role:e.role})},{name:"Aksi",cell:e=>a.jsx(B,{row:e,onEdit:y,onDelete:N,onView:S,onPrint:k}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],T=({role:e})=>{let t="",n="";switch(e){case"admin":t="bg-red-500",n="Admin";break;case"regency":t="bg-blue-500",n="Kabupaten";break;case"district":t="bg-green-500",n="Kecamatan";break;case"village":t="bg-yellow-500",n="Desa";break;default:t="bg-gray-500",n="Unknown"}return a.jsx("span",{className:`px-2 py-0 text-sm text-white rounded ${t}`,children:n})};return a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-300",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[a.jsx(p.input,{type:"text",placeholder:"Cari nama...",value:i,onChange:e=>P(e.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto",whileHover:{scale:1.02},whileFocus:{scale:1.02},transition:{type:"spring",stiffness:300}}),a.jsxs("select",{name:"role",value:c,onChange:e=>_(e.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto",children:[a.jsx("option",{value:"",children:"Semua Role"}),a.jsx("option",{value:"village",children:"Village"}),a.jsx("option",{value:"district",children:"District"}),a.jsx("option",{value:"regency",children:"Regency"}),a.jsx("option",{value:"admin",children:"Admin"})]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[a.jsxs(p.button,{onClick:O,className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[a.jsx(w,{className:"mr-2"})," Export JSON"]}),a.jsxs(p.button,{onClick:H,className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:[a.jsx(w,{className:"mr-2"})," Export Excel"]})]})]}),a.jsx(U,{columns:L,data:(o==null?void 0:o.data)||[],pagination:!0,paginationServer:!0,paginationTotalRows:(o==null?void 0:o.total)||0,paginationDefaultPage:d,onChangePage:F,onChangeRowsPerPage:D,onSort:A,highlightOnHover:!0,pointerOnHover:!0,striped:!0,responsive:!0,progressPending:j})]})}export{M as default};
