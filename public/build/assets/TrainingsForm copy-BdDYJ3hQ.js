import{r as s,j as e}from"./app-cnLqKnWv.js";import{a as M,b as $,c as q}from"./index-CyDsHmf4.js";import{S as z}from"./react-select.esm-kjDh-dq3.js";import{X as L}from"./index.es-Q68aKp3t.js";import{S as n}from"./sweetalert2.esm.all-LHqzTR4y.js";import{m as l}from"./proxy-0toHJmZX.js";import{A as O}from"./index-CSb7vC3W.js";import"./iconBase-CMF4PMHw.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-c6l4leOc.js";import"./floating-ui.dom-CHZBHl4C.js";function oe({trainings:B=[],setTrainings:H=()=>{},officialTrainings:i=[],setOfficialTrainings:x=()=>{}}){const[_,N]=s.useState(!1),[E,v]=s.useState(!1),[b,k]=s.useState(""),[S,C]=s.useState(""),[r,o]=s.useState(null),[g,c]=s.useState(""),[y,d]=s.useState(""),[T,m]=s.useState(""),[G,u]=s.useState(null),[D,h]=s.useState(""),[p,j]=s.useState(null),J=B.map(a=>({value:a.id,label:a.title})),R=()=>{N(!0)},f=()=>{N(!1),k(""),C("")},P=(a=null)=>{if(a!==null){const t=i[a];o({value:t.training_id,label:t.training_title}),c(t.nama),d(t.mulai),m(t.selesai||""),u(t.doc_scan||null),h(t.keterangan||""),j(a)}else o(null),c(""),d(""),m(""),u(null),h(""),j(null);v(!0)},A=()=>{v(!1),o(null),c(""),d(""),m(""),u(null),h(""),j(null)},I=async()=>{if(!b.trim()){n.fire({icon:"error",title:"Oops...",text:"Judul pelatihan tidak boleh kosong!"});return}try{const a=await axios.post("/village/official/training/store",{title:b,description:S});if(a.data.success){const t={id:a.data.data.id,title:a.data.data.title,description:a.data.data.description};H(w=>[...w,t]),f()}else n.fire({icon:"error",title:"Gagal",text:"Gagal menambahkan pelatihan baru: "+a.data.message})}catch(a){console.error("Gagal menambahkan pelatihan baru:",a),n.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat menambahkan pelatihan baru. Silakan coba lagi."}),f()}},K=()=>{if(!r||!g||!y){n.fire({icon:"error",title:"Oops...",text:"Harap isi semua field yang diperlukan!"});return}const a={training_id:r.value,training_title:r.label,nama:g,mulai:y,selesai:T,doc_scan:G,keterangan:D};if(p!==null){const t=[...i];t[p]=a,x(t)}else x([...i,a]);A()},F=a=>{n.fire({title:"Apakah Anda yakin?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(t=>{if(t.isConfirmed){const w=i.filter((Q,Y)=>Y!==a);x(w),n.fire("Dihapus!","Data telah dihapus.","success")}})},X=[{name:"Pelatihan",selector:a=>a.training_title,sortable:!0},{name:"Nama",selector:a=>a.nama,sortable:!0},{name:"Mulai",selector:a=>a.mulai,sortable:!0},{name:"Selesai",selector:a=>a.selesai,sortable:!0},{name:"Keterangan",selector:a=>a.keterangan,sortable:!0},{name:"Aksi",cell:(a,t)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",onClick:()=>P(t),className:"px-2 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 flex items-center",children:[e.jsx($,{className:"mr-1"})," Edit"]}),e.jsxs("button",{type:"button",onClick:()=>F(t),className:"px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[e.jsx(q,{className:"mr-1"})," Hapus"]})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}];return e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"bg-white w-full p-4 shadow rounded-lg mt-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center border-b",children:[e.jsxs("div",{className:"space-y-0",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-700",children:"G. Formulir Riwayat Pelatihan"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Formulir ini digunakan untuk mengisi riwayat pelatihan pejabat desa."})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(l.button,{type:"button",onClick:R,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:[e.jsx(M,{className:"mr-2"})," Jenis Pelatihan"]}),e.jsxs(l.button,{type:"button",onClick:()=>P(),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center",children:[e.jsx(M,{className:"mr-2"})," Tambah"]})]})]}),e.jsx(L,{columns:X,data:i,pagination:!0,highlightOnHover:!0,responsive:!0,noDataComponent:"Tidak ada data riwayat pelatihan."})]}),e.jsx(O,{children:_&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tambah Jenis Pelatihan Baru"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Judul Pelatihan"}),e.jsx("input",{type:"text",value:b,onChange:a=>k(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Judul Pelatihan"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deskripsi"}),e.jsx("textarea",{value:S,onChange:a=>C(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Deskripsi Pelatihan",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:f,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Simpan"})]})]})})}),e.jsx(O,{children:E&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"bg-white p-6 rounded-lg w-1/2 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:p!==null?"Edit Riwayat Pelatihan":"Tambah Riwayat Pelatihan"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pelatihan"}),e.jsx(z,{options:J,value:r,onChange:o,placeholder:"Pilih Pelatihan",isClearable:!0,isSearchable:!0,className:"mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("input",{type:"text",value:g,onChange:a=>c(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Nama"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mulai"}),e.jsx("input",{type:"date",value:y,onChange:a=>d(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Selesai"}),e.jsx("input",{type:"date",value:T,onChange:a=>m(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dokumen"}),e.jsx("input",{type:"file",onChange:a=>u(a.target.files[0]),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("textarea",{value:D,onChange:a=>h(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Keterangan",rows:"3"})]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{type:"button",onClick:A,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Batal"}),e.jsx("button",{type:"button",onClick:K,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:p!==null?"Simpan Perubahan":"Simpan"})]})]})})})]})}export{oe as default};
