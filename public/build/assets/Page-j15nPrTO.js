import{K as I,r as n,j as e,L as R,S as y}from"./app-CVPon-in.js";import{S as r}from"./sweetalert2.esm.all-LHqzTR4y.js";import{A as $}from"./AuthenticatedLayout-uxNNxEb-.js";import H from"./List-Ca9MUe-z.js";import{H as U}from"./index-CQ3QYBQr.js";import S from"./Modal-BuqugHas.js";import X from"./PDF-C0ngs7OP.js";import"./index-QcoFFRoy.js";import"./iconBase-DWCpscjx.js";import"./transition-CxQxzVBW.js";import"./LoadingPage-D5KRQg6W.js";import"./proxy-D2F4h_SH.js";import"./index-Bz8wJd-C.js";import"./index.es-Cx28G3hx.js";import"./xlsx-5rFX-EW9.js";import"./Actions-DW1hvRJo.js";import"./index-Bid0kMqz.js";import"./jspdf.plugin.autotable-Ct2Crhd4.js";import"./typeof-QjJsDpFa.js";var w;const _=((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"))||"";function me({initialTrainings:C,trainings:E}){var k;const{flash:i}=I().props,[D,T]=n.useState(C),[A,h]=n.useState(!1),[N,c]=n.useState(!1),[m,u]=n.useState(!1),[v,x]=n.useState(!1),[t,g]=n.useState(null),[s,l]=n.useState({official_id:"",training_id:"",doc_scan:"",nama:"",keterangan:"",mulai:"",selesai:""});n.useEffect(()=>{i!=null&&i.success&&r.fire("Success",i.success,"success"),i!=null&&i.error&&r.fire("Error",i.error,"error")},[i]);const p=({page:a=1,perPage:o=10,search:d="",filters:b="",sortField:j="",sortDirection:B=""})=>{h(!0),y.get("/admin/training",{page:a,per_page:o,search:d,filters:b,sort_field:j,sort_direction:B},{preserveState:!0,replace:!0,onSuccess:F=>{T(F.props.official_trainings),h(!1)},onError:()=>{r.fire("Error","Failed to fetch data. Please try again.","error"),h(!1)}})},M=()=>{u(!1),x(!1),c(!0),l({official_id:"",training_id:"",doc_scan:"",nama:"",keterangan:"",mulai:"",selesai:""})},O=a=>{g(a),u(!0),x(!1),c(!0),l({official_id:a.official_id,training_id:a.training_id,doc_scan:a.doc_scan,nama:a.nama,keterangan:a.keterangan,mulai:a.mulai,selesai:a.selesai})},K=a=>{g(a),u(!1),x(!0),c(!0)},L=a=>{r.fire({title:"Are you sure?",text:"This data will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&y.delete(`/admin/training/${a}`,{headers:{"X-CSRF-TOKEN":_},onSuccess:()=>{r.fire("Deleted!","Data has been successfully deleted.","success"),p({})},onError:()=>{r.fire("Error","An error occurred while deleting the data.","error")}})})},P=a=>{var d;const o={nama:a.nama,training:((d=a.training)==null?void 0:d.title)||"-",mulai:a.mulai,selesai:a.selesai,keterangan:a.keterangan};X(o)},V=a=>{a.preventDefault();const o=m?`/admin/training/${t.id}`:"/admin/training",d=m?"put":"post",b={official_id:s.official_id,training_id:s.training_id,doc_scan:s.doc_scan,nama:s.nama,keterangan:s.keterangan,mulai:s.mulai,selesai:s.selesai};y[d](o,b,{headers:{"X-CSRF-TOKEN":_},onSuccess:()=>{r.fire("Success",`Training ${m?"updated":"added"} successfully.`,"success"),c(!1),p({})},onError:j=>{r.fire("Error",Object.values(j).join(", "),"error")}})},f=()=>{c(!1),u(!1),x(!1),g(null),l({official_id:"",training_id:"",doc_scan:"",nama:"",keterangan:"",mulai:"",selesai:""})};return e.jsxs($,{header:e.jsxs("div",{className:"text-2xl font-semibold leading-tight",children:["Training",e.jsx("p",{className:"text-sm font-thin mt-1",children:"Daftar Pelatihan"})]}),breadcrumb:[{name:"Training",path:"/admin/training",active:!0,icon:e.jsx(U,{className:"w-5 h-5 mr-3"})}],children:[e.jsx(R,{title:"Training"}),e.jsxs("div",{className:"p-4",children:[e.jsx("button",{onClick:M,className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Training"}),e.jsx(H,{official_trainings:D,trainings:E,fetchData:p,loading:A,onEdit:O,onDelete:L,onView:K,onPrint:P})]}),e.jsx(S,{isOpen:N&&!v,onClose:f,title:m?"Edit Training":"Add Training",children:e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("input",{type:"text",value:s.nama,onChange:a=>l({...s,nama:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mulai"}),e.jsx("input",{type:"date",value:s.mulai,onChange:a=>l({...s,mulai:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Selesai"}),e.jsx("input",{type:"date",value:s.selesai,onChange:a=>l({...s,selesai:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("textarea",{value:s.keterangan,onChange:a=>l({...s,keterangan:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:f,className:"mr-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:m?"Update":"Save"})]})]})})}),e.jsx(S,{isOpen:N&&v,onClose:f,title:"View Training",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.nama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Training"}),e.jsx("p",{className:"mt-1 text-gray-900",children:((k=t==null?void 0:t.training)==null?void 0:k.title)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mulai"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.mulai})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Selesai"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.selesai})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t==null?void 0:t.keterangan})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Close"})})]})})]})}export{me as default};
